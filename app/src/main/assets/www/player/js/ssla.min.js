function CreateTableOfContents(){this.strIdRef="",this.strId="",this.parseXMLToObjectInstance={},this.objXmlData={},this.strCurrentActivityId="",this.aryCompletionStatus={},this.schemaversion="",this.data={},this.blnShowIndent=config.tocDisplayType,this.totalNumOfSCOs=0,this.menuInstance=new Menu,this.activityId=""}function traverse(e,t){var i;for(var r in e)if(e.hasOwnProperty(r)){if(r==t)return e[r];if("object"==typeof e[r]&&(i=traverse(e[r],t),null!==i))return i}return null}function DebugWriter(e,t){this.aryDebugText=new Array,this.aryDebugType=new Array,this.objWin=new Object,this.strDebugDivName="_debug_window",this.strDebugToolbarDivName="_debug_window_toolbar";new Object;this.status=e,this.presentation=t,this.createDebugWindow(this.presentation)}function StatementLogger(e,t){this.courseId=e,this.studentId=t,this.uuid=generateUUID(),this.statements=[],this.listeners=[]}function StatementLogEntry(e){this.when=new Date,this.statement="",this.displayWhen=null,this.timeTaken=0,this.statementType=e,this.subStatements=[],this.debugLevel="INFO"}function Utils(){this.currentCourseDetails={}}function generateUUID(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?i:7&i|8).toString(16)})}function isEmptyObject(e){var t;for(t in e)return!1;return!0}function matchRegEx(e,t){t+="";var i=new RegExp(e);return!!t.match(i)}function endsWith(e,t){return e.indexOf(t,e.length-t.length)!==-1}function getCourseId(){return courseId}function getCourseDirectory(){return config.courseBaseHtmlPath+courseDirectory}function getStudentId(){return config.getStudentIdOverrideFn?config.getStudentIdOverrideFn():studentId}function getStudentName(){return config.getStudentNameOverrideFn?config.getStudentNameOverrideFn():studentName}function prepareFrames(){var e=document.getElementById("frame-here");e.innerHTML='<iframe name="jca_course_player" id="jca_course_player" frameborder="0" width="100%" height="100%" src="blank.htm"></iframe>',setupInterface(),setupInterfaceNav()}function returnFromAjaxTocData(e){e&&createTableOfContentsInstance.setTOCCache(e)}function setupInterface(){createTableOfContentsInstance=new CreateTableOfContents,createTableOfContentsInstance.initTraverse(activeCourse,setupInterface2)}function setupInterface2(e){var t,i,r;ssla.storage.getStorageLayer().load(null,config.tocDataObjectName),config.showCourseCompletionStatus||(document.getElementById("course_completion_status_div").style.display="none"),config.showCourseSuccessStatus||(document.getElementById("course_success_status_div").style.display="none"),config.showCourseGrade||(document.getElementById("course_grade_div").style.display="none"),t=document.getElementById("credit-"+String(objVars.credit)),t&&(t.checked=!0),i=document.getElementById("mode-"+String(objVars.mode)),i&&(i.checked=!0),loadTOC(e),1==config.autoLaunchFirstSCO&&(r=createTableOfContentsInstance.menuInstance.getFirstLeafActivity(),gotoSco(r.resourceId,r.itemId))}function loadTOC(e){document.getElementById("toc").innerHTML=e}function getTocInstance(){return createTableOfContentsInstance}function toggleTOC(){var e=document.getElementById("toggle_menu");switch(currMenuState){case"hide":document.body.className="hide-toc",currMenuState="show",e&&(e.innerHTML="Show Menu");break;case"show":document.body.className="",currMenuState="hide",e&&(e.innerHTML="Hide Menu")}}function navigate(n){var strCurrActivityId=getTocInstance().getCurrentActivityId(),strIndex=getTocInstance().menuInstance.getMenuItemIndex("itemId",strCurrActivityId),strOp,intNewIndex,objMenu,i;switch(n){case"previous":strOp="-";break;case"next":strOp="+";break;case"exit":endCurrentActivity(),1*ie<=9?location.assign(from+"cerrarCurso.htm"):window.location.href=from+"cerrarCurso.htm"}for(i=1;i<10;i++){intNewIndex=eval("parseInt("+strIndex+")"+strOp+i),objMenu=createTableOfContentsInstance.menuInstance.getMenuItemByIndex(intNewIndex);try{if(""!=objMenu.resourceId)break}catch(e){}}try{gotoSco(objMenu.resourceId,objMenu.itemId)}catch(e){var r=confirm("Would you like to close this course and return to the LMS main menu?");r&&top.window.close()}}function endCurrentActivity(){API?(API.LMSCommit(""),API.LMSFinish("")):API_1484_11&&(API_1484_11.Commit(""),API_1484_11.Terminate(""))}function gotoSco(e,t){endCurrentActivity(),jca_course_player.document.location.replace("blank.htm"),console.log("GotoSco"),console.log("GotoSco>>>"+e),console.log("GotoSco>>>"+t);var i=setInterval(function(){0==globalActiveSaveCounter&&(createTableOfContentsInstance.lookupHrefByRef(e,t),clearInterval(i))},100)}function setupInterfaceNav(){config.showSCOtoSCONavigation||(document.getElementById("sco_navigation").style.visibility="hidden"),config.hideTOC&&toggleTOC(),config.showStatementLogPopupLink&&(document.getElementById("show_statement_log_holder").style.visibility="visible")}function showStatementLog(){utils.openPage("statementLog.htm","popup","statementLog")}function initScorm12Player(e){qsObject=e,debugWriter.showDebugWindow(),API=getScorm12Api(),doLoadPage(CMI_DB_12)}function initScorm2004Player(e){qsObject=e,debugWriter.showDebugWindow(),API_1484_11=getScorm2004Api(),doLoadPage(CMI_DB_2004)}function myTrim(e){return e.replace(/^\s+|\s+$/gm,"")}function parseStudentName(e){var t="",r="",n=[];if(e.indexOf(",")!=-1)return n=e.split(","),e=myTrim(n[0])+", "+myTrim(n[1]);if(e.indexOf(" ")!=-1){for(n=e.split(" "),i=0;i<n.length;i++)0==i?t=myTrim(n[i]):i>0&&(r+=myTrim(n[i]));return e=r+", "+t}return e}function doLoadPage(e){debugWriter.writeToDebugWindow("doLoadPage :: Loading page data...."),stuName=getStudentName(),stuNumber=getStudentId(),data_from_lms=qsObject.data_from_lms,mastery_score=qsObject.mastery_score,max_time_allowed=qsObject.max_time_allowed,time_limit_action=qsObject.time_limit_action,cmi_core_credit=qsObject.cmi_core_credit,cmi_core_lesson_mode=qsObject.cmi_core_lesson_mode,path=utils.jcaDecodePath(qsObject.path),CMI_DBInstance=new e(stuName,stuNumber,data_from_lms,mastery_score,max_time_allowed,time_limit_action,cmi_core_credit,cmi_core_lesson_mode),debugWriter.writeToDebugWindow("doLoadPage :: Loading Complete !"),loadCourse(stuNumber,qsObject.act_id,qsObject.sco_id,path)}function processRollup(){}function loadCourse(e,t,i,r){debugWriter.writeToDebugWindow("in loadcourse()"),strCookieName=e+"_"+i,debugWriter.writeToDebugWindow("in loadcourse() strCookieName = "+strCookieName),oScormData.coursePath=r,debugWriter.writeToDebugWindow("in loadcourse() oScormData.coursePath = "+oScormData.coursePath),oScormData.strStudentId=e,debugWriter.writeToDebugWindow("in loadcourse() oScormData.strStudentId = "+oScormData.strStudentId),oScormData.strSCOId=i,debugWriter.writeToDebugWindow("in loadcourse() oScormData.strSCOId = "+oScormData.strSCOId),oScormData.strActivityId=t,v=ssla.storage.getStorageLayer().load(null,strCookieName),debugWriter.writeToDebugWindow("in loadCourse GetCookie() returned value = "+v)}function tryPopup(e){return utils.openPage(e,"popup","sco_win",popupSettings)}function popupManually(){var e=tryPopup(oScormData.coursePath);return updateUserText(),e}function updateCenterContent(e){var t=setInterval(function(){try{jca_course_player.document.getElementById("content").innerHTML=e,clearInterval(t)}catch(e){}},10)}function updateUserText(){updateCenterContent("Your course has been opened in a popup.  When you have completed your course, please press exit or close this window.")}function returnFromAjaxScorm12Course(e){var t,i;if(debugWriter.writeToDebugWindow("in returnFromAjax() v = "+e),oScormData.data=e,debugWriter.writeToDebugWindow("in returnFromAjax() oScormData.coursePath = "+oScormData.coursePath),2==config.scoLaunchType){if(0==config.newWindowSettings.length)i=tryPopup(oScormData.coursePath);else{for(popupSettings="",t=0;t<config.newWindowSettings.length;t++)popupSettings+=config.newWindowSettings[t]+",";i=tryPopup(oScormData.coursePath)}i?updateUserText():updateCenterContent('Your course window did not pop open correctly.<br>  <a onclick="parent.popupManually()" href="#">Click here to open the course.</a>')}else jca_course_player.document.location.replace(oScormData.coursePath)}function wrapUp(){endCurrentActivity("")}function getScorm12Api(){var e=ScormBase12(new ScormBase),t=new e,i=function(e){return{LMSInitialize:function(t){return e.initialize(t)},LMSFinish:function(t){return e.finish(t)},LMSCommit:function(t){return e.commit(t)},LMSGetValue:function(t){return e.getValue(t)},LMSSetValue:function(t,i){return e.setValue(t,i)},LMSGetLastError:function(){return e.getLastError()},LMSGetErrorString:function(t){return e.getErrorString(t)},LMSGetDiagnostic:function(t){return e.getDiagnostic(t)}}}(t);return i}function CMI_DB_12(e,t,i,r,n,s,a,o){this.student_name=e,this.student_number=t,this.data_from_lms=i,this.mastery_score=r,this.max_time_allowed=n,this.time_limit_action=s,this.cmi_core_credit=a,this.cmi_core_lesson_mode=o,this.local_data={},this._setLocalData=function(e,t){try{return this.local_data[e]=t,debugWriter.writeToDebugWindow("_setLocalData "+e+"="+t,"blue"),"true"}catch(e){return debugWriter.writeToDebugWindow("ERROR: _setLocalData "+e.description,"red"),"false"}},this._getLocalData=function(e){var t;try{t=this.local_data[e]}catch(e){debugWriter.writeToDebugWindow("ERROR: _getLocalData "+e.description,"red"),t=""}return t},this.addTimes=function(e,t){var i=this.parseTime(e),r=this.parseTime(t),n=new Date,s=new Date(n.getYear(),n.getMonth(),n.getDay(),i[0],i[1],i[2],i[3]),a=new Date(n.getYear(),n.getMonth(),n.getDay(),r[0],r[1],r[2],r[3]),o=a.getHours(),c=a.getMinutes(),l=a.getSeconds(),u=this.getMilliseconds(t),d=o+s.getHours(),m=c+s.getMinutes(),p=l+s.getSeconds(),h=u+this.getMilliseconds(e);return h>=100&&(h=-(100-h),p++),p>=60&&(p=-(60-p),m++),m>=60&&(m=-(60-m),d++),d>=24&&(d=-(24-d)),p<=9&&(p="0"+p),m<=9&&(m="0"+m),d<=9&&(d="0"+d),d+":"+m+":"+p+"."+h},this.getMilliseconds=function(e){var t=e+"",i=0;return t.indexOf(".")!=-1&&(i=parseInt(t.split(".")[1])),i},this.parseTime=function(e){var t=[0,0,0,0];if(""==e||"undefined"==typeof e)return t;var i=e.split(":");if(t[0]=parseInt(i[0]),t[1]=parseInt(i[1]),i[2].indexOf(".")!=-1){var r=i[2].split(".");2==r.length&&(t[2]=parseInt(r[0]),1==r[1].length?t[3]=10*parseInt(r[1]):t[3]=parseInt(r[1]))}else t[2]=parseInt(i[2]);return t}}function getScorm2004Api(){var e=ScormBase2004(new ScormBase),t=new e,i=function(e){return{Initialize:function(t){return e.initialize(t)},Terminate:function(t){return e.terminate(t)},Commit:function(t){return e.commit(t)},GetValue:function(t){return e.getValue(t)},SetValue:function(t,i){return e.setValue(t,i)},GetLastError:function(){return e.getLastError()},GetErrorString:function(t){return e.getErrorString(t)},GetDiagnostic:function(t){return e.getDiagnostic(t)}}}(t);return i}function CMI_DB_2004(e,t,i,r,n,s,a,o){function c(e,t){var i=e&&parseFloat(e.replace(",","."));return(isNaN(i)?0:i)*t}this.student_name=e,this.student_number=t,this.data_from_lms=i,this.mastery_score=r,this.max_time_allowed=n,this.time_limit_action=s,this.cmi_core_credit=a,this.cmi_core_lesson_mode=o,this.local_data={},this._setLocalData=function(e,t){try{return this.local_data[e]=t,debugWriter.writeToDebugWindow("_setLocalData "+e+"="+t,"blue"),"true"}catch(e){return debugWriter.writeToDebugWindow("ERROR: _setLocalData "+e.description,"red"),"false"}},this._getLocalData=function(e){try{value=this.local_data[e]}catch(e){debugWriter.writeToDebugWindow("ERROR: _getLocalData "+e.description,"red"),value=""}return value},this.addTimes=function(e,t){var i=this.parseTime(e),r=this.parseTime(t),n=new Date,s=new Date(n.getYear(),n.getMonth(),n.getDay(),i[0],i[1],i[2],i[3]),a=new Date(n.getYear(),n.getMonth(),n.getDay(),r[0],r[1],r[2],r[3]),o=a.getHours(),c=a.getMinutes(),l=a.getSeconds(),u=o+s.getHours(),d=c+s.getMinutes(),m=l+s.getSeconds();m>=60&&(m=-(60-m),d++),d>=60&&(d=-(60-d),u++),u>=24&&(u=-(24-u)),m<=9&&(m="0"+m),d<=9&&(d="0"+d),u<=9&&(u="0"+u);var p="PT"+u+"H"+d+"M"+m+"S";return p},this.getMilliseconds=function(e){var t=e+"",i=0;return t.indexOf(".")!=-1&&(i=parseInt(t.split(".")[1])),i},this.parseTime=function(e){var t=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;return(match=t.exec(e))?(sign="-"===match[1]?-1:1,duration={y:c(match[2],sign),M:c(match[3],sign),d:c(match[4],sign),h:c(match[5],sign),m:c(match[6],sign),s:c(match[7],sign),w:c(match[8],sign)},[duration.h,duration.m,duration.s,0]):[0,0,0,0]}}this.JSON||(this.JSON={}),function(){function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var i,r,n,s,a,o=gap,c=t[e];switch(c&&"object"==typeof c&&"function"==typeof c.toJSON&&(c=c.toJSON(e)),"function"==typeof rep&&(c=rep.call(t,e,c)),typeof c){case"string":return quote(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(c)){for(s=c.length,i=0;i<s;i+=1)a[i]=str(i,c)||"null";return n=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+o+"]":"["+a.join(",")+"]",gap=o,n}if(rep&&"object"==typeof rep)for(s=rep.length,i=0;i<s;i+=1)r=rep[i],"string"==typeof r&&(n=str(r,c),n&&a.push(quote(r)+(gap?": ":":")+n));else for(r in c)Object.hasOwnProperty.call(c,r)&&(n=str(r,c),n&&a.push(quote(r)+(gap?": ":":")+n));return n=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+o+"}":"{"+a.join(",")+"}",gap=o,n}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,i){var r;if(gap="",indent="","number"==typeof i)for(r=0;r<i;r+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var i,r,n=e[t];if(n&&"object"==typeof n)for(i in n)Object.hasOwnProperty.call(n,i)&&(r=walk(n,i),void 0!==r?n[i]=r:delete n[i]);return reviver.call(e,t,n)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),"undefined"==typeof ParseXMLToObject&&(ParseXMLToObject=function(){}),ParseXMLToObject.ParseXML=function(e,t,i){return this.http=new ParseXMLToObject.ParseXML.HTTP(e,t,i,!1),this},ParseXMLToObject.ParseXML.VERSION="0.22",ParseXMLToObject.ParseXML.MIME_TYPE_XML="text/xml",ParseXMLToObject.ParseXML.MAP_NODETYPE=["","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE"],ParseXMLToObject.ParseXML.prototype.async=function(e,t){this.callback_func=e,this.callback_arg=t},ParseXMLToObject.ParseXML.prototype.onerror=function(e,t){this.onerror_func=e},ParseXMLToObject.ParseXML.prototype.parse=function(){if(this.http){if(this.onerror_func&&this.http.onerror(this.onerror_func),this.callback_func){var e=this,t=function(){if(e.http){var t=e.parseResponse();e.callback_func(t,e.callback_arg)}};this.http.async(t)}if(this.http.load(),!this.callback_func){var i=this.parseResponse();return i}}},ParseXMLToObject.ParseXML.prototype.setOutputArrayAll=function(){this.setOutputArray(!0)},ParseXMLToObject.ParseXML.prototype.setOutputArrayAuto=function(){this.setOutputArray(null)},ParseXMLToObject.ParseXML.prototype.setOutputArrayNever=function(){this.setOutputArray(!1)},ParseXMLToObject.ParseXML.prototype.setOutputArrayElements=function(e){this.setOutputArray(e)},ParseXMLToObject.ParseXML.prototype.setOutputArray=function(e){if("string"==typeof e&&(e=[e]),e&&"object"==typeof e)if(e.length<0)e=!1;else{for(var t={},i=0;i<e.length;i++)t[e[i]]=!0;e=t,e["*"]&&(e=!0)}this.usearray=e},ParseXMLToObject.ParseXML.prototype.parseResponse=function(){var e=this.http.documentElement(),t=this.parseDocument(e);return t},ParseXMLToObject.ParseXML.prototype.parseDocument=function(e){if(e){var t=this.parseElement(e);1==this.usearray?t=[t]:0==this.usearray||null==this.usearray||this.usearray[e.nodeName]&&(t=[t]);var i={};return i[e.nodeName]=t,i}},ParseXMLToObject.ParseXML.prototype.parseElement=function(e){if(7!=e.nodeType){if(3==e.nodeType||4==e.nodeType){var t=e.nodeValue.match(/[^\x00-\x20]/);if(null==t)return;return e.nodeValue}var i,r={};if(e.attributes&&e.attributes.length){i={};for(var n=0;n<e.attributes.length;n++){var s=e.attributes[n].nodeName;if("string"==typeof s){var a=e.attributes[n].nodeValue;a&&("undefined"==typeof r[s]&&(r[s]=0),r[s]++,this.addNode(i,s,r[s],a))}}}if(e.childNodes&&e.childNodes.length){var o=!0;i&&(o=!1);for(var n=0;n<e.childNodes.length&&o;n++){var c=e.childNodes[n].nodeType;3!=c&&4!=c&&(o=!1)}if(o){i||(i="");for(var n=0;n<e.childNodes.length;n++)i+=e.childNodes[n].nodeValue}else{i||(i={});for(var n=0;n<e.childNodes.length;n++){var s=e.childNodes[n].nodeName;if("string"==typeof s){var a=this.parseElement(e.childNodes[n]);a&&("undefined"==typeof r[s]&&(r[s]=0),r[s]++,this.addNode(i,s,r[s],a))}}}}return i}},ParseXMLToObject.ParseXML.prototype.addNode=function(e,t,i,r){1==this.usearray?(1==i&&(e[t]=[]),e[t][e[t].length]=r):0==this.usearray?1==i&&(e[t]=r):null==this.usearray?1==i?e[t]=r:2==i?e[t]=[e[t],r]:e[t][e[t].length]=r:this.usearray[t]?(1==i&&(e[t]=[]),e[t][e[t].length]=r):1==i&&(e[t]=r)},ParseXMLToObject.ParseXML.HTTP=function(e,t,i,r){return this.url=e,"string"==typeof t?this.query=t:this.query="",i?this.method=i:"string"==typeof t?this.method="POST":this.method="GET",this.textmode=!!r,this.req=null,this.xmldom_flag=!1,this.onerror_func=null,this.callback_func=null,this.already_done=null,this},ParseXMLToObject.ParseXML.HTTP.REQUEST_TYPE="application/x-www-form-urlencoded",ParseXMLToObject.ParseXML.HTTP.ACTIVEX_XMLDOM="Microsoft.XMLDOM",ParseXMLToObject.ParseXML.HTTP.ACTIVEX_XMLHTTP="Microsoft.XMLHTTP",ParseXMLToObject.ParseXML.HTTP.EPOCH_TIMESTAMP="Thu, 01 Jun 1970 00:00:00 GMT",ParseXMLToObject.ParseXML.HTTP.prototype.onerror=ParseXMLToObject.ParseXML.prototype.onerror,ParseXMLToObject.ParseXML.HTTP.prototype.async=function(e){this.async_func=e},ParseXMLToObject.ParseXML.HTTP.prototype.load=function(){if(window.ActiveXObject){var e=ParseXMLToObject.ParseXML.HTTP.ACTIVEX_XMLHTTP;"GET"!=this.method||this.textmode||(e=ParseXMLToObject.ParseXML.HTTP.ACTIVEX_XMLDOM),this.req=new ActiveXObject(e)}else window.XMLHttpRequest&&(this.req=new XMLHttpRequest);var t=!!this.async_func;if("undefined"!=typeof this.req.send&&this.req.open(this.method,this.url,t),"undefined"!=typeof this.req.setRequestHeader&&this.req.setRequestHeader("Content-Type",ParseXMLToObject.ParseXML.HTTP.REQUEST_TYPE),"undefined"==typeof this.req.overrideMimeType||this.textmode||this.req.overrideMimeType(ParseXMLToObject.ParseXML.MIME_TYPE_XML),t){var i=this;i.already_done=!1;var r=function(){if(4==i.req.readyState){var e=i.checkResponse();e&&(i.already_done||(i.already_done=!0,i.async_func()))}};this.req.onreadystatechange=r}if("undefined"!=typeof this.req.send?this.req.send(this.query):"undefined"!=typeof this.req.load&&(this.req.async=t,this.req.load(this.url)),!t){this.checkResponse()}},ParseXMLToObject.ParseXML.HTTP.prototype.checkResponse=function(){return this.req.parseError&&0!=this.req.parseError.errorCode?(this.onerror_func&&this.onerror_func(this.req.parseError.reason),!1):!(this.req.status-0>0&&200!=this.req.status&&206!=this.req.status&&304!=this.req.status)||(this.onerror_func&&this.onerror_func(this.req.status),!1)},ParseXMLToObject.ParseXML.HTTP.prototype.documentElement=function(){if(this.req)return this.req.responseXML?this.req.responseXML.documentElement:this.req.documentElement},ParseXMLToObject.ParseXML.HTTP.prototype.responseText=function(){if(this.req){if(navigator.appVersion.match("KHTML")){var e=escape(this.req.responseText);if(!e.match("%u")&&e.match("%"))return decodeURIComponent(e)}return this.req.responseText}},!function(e,t,i){"undefined"!=typeof module&&module.exports?module.exports=i():"function"==typeof define&&define.amd?define(i):t[e]=i()}("reqwest",this,function(){function succeed(e){var t=protocolRe.exec(e.url);return t=t&&t[1]||context.location.protocol,httpsRe.test(t)?twoHundo.test(e.request.status):!!e.request.response}function handleReadyState(e,t,i){return function(){return e._aborted?i(e.request):e._timedOut?i(e.request,"Request is aborted: timeout"):void(e.request&&4==e.request[readyState]&&(e.request.onreadystatechange=noop,succeed(e)?t(e.request):i(e.request)))}}function setHeaders(e,t){var i,r=t.headers||{};r.Accept=r.Accept||defaultHeaders.accept[t.type]||defaultHeaders.accept["*"];var n="function"==typeof FormData&&t.data instanceof FormData;!t.crossOrigin&&!r[requestedWith]&&(r[requestedWith]=defaultHeaders.requestedWith),!r[contentType]&&!n&&(r[contentType]=t.contentType||defaultHeaders.contentType);for(i in r)r.hasOwnProperty(i)&&"setRequestHeader"in e&&e.setRequestHeader(i,r[i])}function setCredentials(e,t){"undefined"!=typeof t.withCredentials&&"undefined"!=typeof e.withCredentials&&(e.withCredentials=!!t.withCredentials)}function generalCallback(e){lastValue=e}function urlappend(e,t){return e+(/\?/.test(e)?"&":"?")+t}function handleJsonp(e,t,i,r){var n=uniqid++,s=e.jsonpCallback||"callback",a=e.jsonpCallbackName||reqwest.getcallbackPrefix(n),o=new RegExp("((^|\\?|&)"+s+")=([^&]+)"),c=r.match(o),l=doc.createElement("script"),u=0,d=navigator.userAgent.indexOf("MSIE 10.0")!==-1;return c?"?"===c[3]?r=r.replace(o,"$1="+a):a=c[3]:r=urlappend(r,s+"="+a),context[a]=generalCallback,l.type="text/javascript",l.src=r,l.async=!0,"undefined"!=typeof l.onreadystatechange&&!d&&(l.htmlFor=l.id="_reqwest_"+n),l.onload=l.onreadystatechange=function(){return!(l[readyState]&&"complete"!==l[readyState]&&"loaded"!==l[readyState]||u)&&(l.onload=l.onreadystatechange=null,l.onclick&&l.onclick(),t(lastValue),lastValue=void 0,head.removeChild(l),u=1,void 0)},head.appendChild(l),{abort:function(){l.onload=l.onreadystatechange=null,i({},"Request is aborted: timeout",{}),lastValue=void 0,head.removeChild(l),u=1}}}function getRequest(e,t){var i,r=this.o,n=(r.method||"GET").toUpperCase(),s="string"==typeof r?r:r.url,a=r.processData!==!1&&r.data&&"string"!=typeof r.data?reqwest.toQueryString(r.data):r.data||null,o=!1;return("jsonp"==r.type||"GET"==n)&&a&&(s=urlappend(s,a),a=null),"jsonp"==r.type?handleJsonp(r,e,t,s):(i=r.xhr&&r.xhr(r)||xhr(r),i.open(n,s,r.async!==!1),setHeaders(i,r),setCredentials(i,r),context[xDomainRequest]&&i instanceof context[xDomainRequest]?(i.onload=e,i.onerror=t,i.onprogress=function(){},o=!0):i.onreadystatechange=handleReadyState(this,e,t),r.before&&r.before(i),o?setTimeout(function(){i.send(a)},200):i.send(a),i)}function Reqwest(e,t){this.o=e,this.fn=t,init.apply(this,arguments)}function setType(e){return e.match("json")?"json":e.match("javascript")?"js":e.match("text")?"html":e.match("xml")?"xml":void 0}function init(o,fn){function complete(e){for(o.timeout&&clearTimeout(self.timeout),self.timeout=null;self._completeHandlers.length>0;)self._completeHandlers.shift()(e)}function success(resp){var type=o.type||resp&&setType(resp.getResponseHeader("Content-Type"));resp="jsonp"!==type?self.request:resp;var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse;try{resp.responseText=r}catch(e){}if(r)switch(type){case"json":try{resp=context.JSON?context.JSON.parse(r):eval("("+r+")")}catch(e){return error(resp,"Could not parse JSON in response",e)}break;case"js":resp=eval(r);break;case"html":resp=r;break;case"xml":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML}for(self._responseArgs.resp=resp,self._fulfilled=!0,fn(resp),self._successHandler(resp);self._fulfillmentHandlers.length>0;)resp=self._fulfillmentHandlers.shift()(resp);complete(resp)}function timedOut(){self._timedOut=!0,self.request.abort()}function error(e,t,i){for(e=self.request,self._responseArgs.resp=e,self._responseArgs.msg=t,self._responseArgs.t=i,self._erred=!0;self._errorHandlers.length>0;)self._errorHandlers.shift()(e,t,i);complete(e)}this.url="string"==typeof o?o:o.url,this.timeout=null,this._fulfilled=!1,this._successHandler=function(){},this._fulfillmentHandlers=[],this._errorHandlers=[],this._completeHandlers=[],this._erred=!1,this._responseArgs={};var self=this;fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){timedOut()},o.timeout)),o.success&&(this._successHandler=function(){o.success.apply(o,arguments)}),o.error&&this._errorHandlers.push(function(){o.error.apply(o,arguments)}),o.complete&&this._completeHandlers.push(function(){o.complete.apply(o,arguments)}),this.request=getRequest.call(this,success,error)}function reqwest(e,t){return new Reqwest(e,t)}function normalize(e){return e?e.replace(/\r?\n/g,"\r\n"):""}function serial(e,t){var i,r,n,s,a=e.name,o=e.tagName.toLowerCase(),c=function(e){e&&!e.disabled&&t(a,normalize(e.attributes.value&&e.attributes.value.specified?e.value:e.text))};if(!e.disabled&&a)switch(o){case"input":/reset|button|image|file/i.test(e.type)||(i=/checkbox/i.test(e.type),r=/radio/i.test(e.type),n=e.value,(!i&&!r||e.checked)&&t(a,normalize(i&&""===n?"on":n)));break;case"textarea":t(a,normalize(e.value));break;case"select":if("select-one"===e.type.toLowerCase())c(e.selectedIndex>=0?e.options[e.selectedIndex]:null);else for(s=0;e.length&&s<e.length;s++)e.options[s].selected&&c(e.options[s])}}function eachFormElement(){var e,t,i=this,r=function(e,t){var r,n,s;for(r=0;r<t.length;r++)for(s=e[byTag](t[r]),n=0;n<s.length;n++)serial(s[n],i)};for(t=0;t<arguments.length;t++)e=arguments[t],/input|select|textarea/i.test(e.tagName)&&serial(e,i),r(e,["input","select","textarea"])}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var e={};return eachFormElement.apply(function(t,i){t in e?(e[t]&&!isArray(e[t])&&(e[t]=[e[t]]),e[t].push(i)):e[t]=i},arguments),e}function buildParams(e,t,i,r){var n,s,a,o=/\[\]$/;if(isArray(t))for(s=0;t&&s<t.length;s++)a=t[s],i||o.test(e)?r(e,a):buildParams(e+"["+("object"==typeof a?s:"")+"]",a,i,r);else if(t&&"[object Object]"===t.toString())for(n in t)buildParams(e+"["+n+"]",t[n],i,r);else r(e,t)}var context=this;if("window"in context)var doc=document,byTag="getElementsByTagName",head=doc[byTag]("head")[0];else{var XHR2;try{XHR2=require("xhr2")}catch(e){throw new Error("Peer dependency `xhr2` required! Please npm install xhr2")}}var httpsRe=/^http/,protocolRe=/(^\w+):\/\//,twoHundo=/^(20\d|1223)$/,readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",uniqid=0,callbackPrefix="reqwest_"+ +new Date,lastValue,xmlHttpRequest="XMLHttpRequest",xDomainRequest="XDomainRequest",noop=function(){},isArray="function"==typeof Array.isArray?Array.isArray:function(e){return e instanceof Array},defaultHeaders={contentType:"application/x-www-form-urlencoded",requestedWith:xmlHttpRequest,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},xhr=function(e){if(e.crossOrigin===!0){var t=context[xmlHttpRequest]?new XMLHttpRequest:null;if(t&&"withCredentials"in t)return t;if(context[xDomainRequest])return new XDomainRequest;throw new Error("Browser does not support cross-origin requests")}return context[xmlHttpRequest]?new XMLHttpRequest:XHR2?new XHR2:new ActiveXObject("Microsoft.XMLHTTP")},globalSetupOptions={dataFilter:function(e){return e}};return Reqwest.prototype={abort:function(){this._aborted=!0,this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(e,t){return e=e||function(){},t=t||function(){},this._fulfilled?this._responseArgs.resp=e(this._responseArgs.resp):this._erred?t(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(e),this._errorHandlers.push(t)),this},always:function(e){return this._fulfilled||this._erred?e(this._responseArgs.resp):this._completeHandlers.push(e),this},fail:function(e){return this._erred?e(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(e),this},catch:function(e){return this.fail(e)}},reqwest.serializeArray=function(){var e=[];return eachFormElement.apply(function(t,i){e.push({name:t,value:i})},arguments),e},reqwest.serialize=function(){if(0===arguments.length)return"";var e,t,i=Array.prototype.slice.call(arguments,0);return e=i.pop(),e&&e.nodeType&&i.push(e)&&(e=null),e&&(e=e.type),t="map"==e?serializeHash:"array"==e?reqwest.serializeArray:serializeQueryString,t.apply(null,i)},reqwest.toQueryString=function(e,t){var i,r,n=t||!1,s=[],a=encodeURIComponent,o=function(e,t){t="function"==typeof t?t():null==t?"":t,s[s.length]=a(e)+"="+a(t)};if(isArray(e))for(r=0;e&&r<e.length;r++)o(e[r].name,e[r].value);else for(i in e)e.hasOwnProperty(i)&&buildParams(i,e[i],n,o);return s.join("&").replace(/%20/g,"+")},reqwest.getcallbackPrefix=function(){return callbackPrefix},reqwest.compat=function(e,t){return e&&(e.type&&(e.method=e.type)&&delete e.type,e.dataType&&(e.type=e.dataType),e.jsonpCallback&&(e.jsonpCallbackName=e.jsonpCallback)&&delete e.jsonpCallback,e.jsonp&&(e.jsonpCallback=e.jsonp)),new Reqwest(e,t)},reqwest.ajaxSetup=function(e){e=e||{};for(var t in e)globalSetupOptions[t]=e[t]},reqwest}),function(e){function t(e,t,i,r,n){this._listener=t,this._isOnce=i,this.context=r,this._signal=e,this._priority=n||0}function i(e,t){if("function"!=typeof e)throw Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",t))}function r(){this._bindings=[],this._prevParams=null;var e=this;this.dispatch=function(){r.prototype.dispatch.apply(e,arguments)}}t.prototype={active:!0,params:null,execute:function(e){var t;return this.active&&this._listener&&(e=this.params?this.params.concat(e):e,t=this._listener.apply(this.context,e),this._isOnce&&this.detach()),t},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},r.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(e,i,r,n){var s=this._indexOfListener(e,r);
if(s!==-1){if(e=this._bindings[s],e.isOnce()!==i)throw Error("You cannot add"+(i?"":"Once")+"() then add"+(i?"Once":"")+"() the same listener without removing the relationship first.")}else e=new t(this,e,i,r,n),this._addBinding(e);return this.memorize&&this._prevParams&&e.execute(this._prevParams),e},_addBinding:function(e){var t=this._bindings.length;do--t;while(this._bindings[t]&&e._priority<=this._bindings[t]._priority);this._bindings.splice(t+1,0,e)},_indexOfListener:function(e,t){for(var i,r=this._bindings.length;r--;)if(i=this._bindings[r],i._listener===e&&i.context===t)return r;return-1},has:function(e,t){return this._indexOfListener(e,t)!==-1},add:function(e,t,r){return i(e,"add"),this._registerListener(e,!1,t,r)},addOnce:function(e,t,r){return i(e,"addOnce"),this._registerListener(e,!0,t,r)},remove:function(e,t){i(e,"remove");var r=this._indexOfListener(e,t);return r!==-1&&(this._bindings[r]._destroy(),this._bindings.splice(r,1)),e},removeAll:function(){for(var e=this._bindings.length;e--;)this._bindings[e]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(e){if(this.active){var t,i=Array.prototype.slice.call(arguments),r=this._bindings.length;if(this.memorize&&(this._prevParams=i),r){t=this._bindings.slice(),this._shouldPropagate=!0;do r--;while(t[r]&&this._shouldPropagate&&t[r].execute(i)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var n=r;n.Signal=r,"function"==typeof define&&define.amd?define(function(){return n}):"undefined"!=typeof module&&module.exports?module.exports=n:e.signals=n}(this),function(e){function t(){var e=arguments[0],i=t.cache;return i[e]&&i.hasOwnProperty(e)||(i[e]=t.parse(e)),t.format.call(null,i[e],arguments)}function i(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function r(e,t){return Array(t+1).join(e)}var n={not_string:/[^sS]/,number:/[def]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosSuxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};t.format=function(e,s){var a,o,c,l,u,d,m,p=1,h=e.length,f="",g=[],_=!0,y="";for(o=0;o<h;o++)if(f=i(e[o]),"string"===f)g[g.length]=e[o];else if("array"===f){if(l=e[o],l[2])for(a=s[p],c=0;c<l[2].length;c++){if(!a.hasOwnProperty(l[2][c]))throw new Error(t("[sprintf] property '%s' does not exist",l[2][c]));a=a[l[2][c]]}else a=l[1]?s[l[1]]:s[p++];if("function"==i(a)&&(a=a()),n.not_string.test(l[8])&&"number"!=i(a)&&isNaN(a))throw new TypeError(t("[sprintf] expecting number but found %s",i(a)));switch(n.number.test(l[8])&&(_=a>=0),l[8]){case"b":a=a.toString(2);break;case"c":a=String.fromCharCode(a);break;case"d":a=parseInt(a,10);break;case"e":a=l[7]?a.toExponential(l[7]):a.toExponential();break;case"f":a=l[7]?parseFloat(a).toFixed(l[7]):parseFloat(a);break;case"o":a=a.toString(8);break;case"s":a=(a=String(a))&&l[7]?a.substring(0,l[7]):a;break;case"S":a="'"+((a=String(a))&&l[7]?a.substring(0,l[7]):a)+"'";break;case"u":a>>>=0;break;case"x":a=a.toString(16);break;case"X":a=a.toString(16).toUpperCase()}(!_||n.number.test(l[8])&&l[3])&&(y=_?"+":"-",a=a.toString().replace(n.sign,"")),d=l[4]?"0"==l[4]?"0":l[4].charAt(1):" ",m=l[6]-(y+a).length,u=l[6]?r(d,m):"",g[g.length]=l[5]?y+a+u:0==d?y+u+a:u+y+a}return g.join("")},t.cache={},t.parse=function(e){for(var t=e,i=[],r=[],s=0;t;){if(null!==(i=n.text.exec(t)))r[r.length]=i[0];else if(null!==(i=n.modulo.exec(t)))r[r.length]="%";else{if(null===(i=n.placeholder.exec(t)))throw new SyntaxError("[sprintf] unexpected placeholder");if(i[2]){s|=1;var a=[],o=i[2],c=[];if(null===(c=n.key.exec(o)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(a[a.length]=c[1];""!==(o=o.substring(c[0].length));)if(null!==(c=n.key_access.exec(o)))a[a.length]=c[1];else{if(null===(c=n.index_access.exec(o)))throw new SyntaxError("[sprintf] failed to parse named argument key");a[a.length]=c[1]}i[2]=a}else s|=2;if(3===s)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");r[r.length]=i}t=t.substring(i[0].length)}return r};var s=function(e,i,r){return r=(i||[]).slice(0),r.splice(0,0,e),t.apply(null,r)};"undefined"!=typeof exports?(exports.sprintf=t,exports.vsprintf=s):(e.sprintf=t,e.vsprintf=s,"function"==typeof define&&define.amd&&define(function(){return{sprintf:t,vsprintf:s}}))}("undefined"==typeof window?this:window);var ssla=function(e){return e||(e={}),e.events={lmsPreInitialize:new signals.Signal,lmsPostInitialize:new signals.Signal,lmsPreFinish:new signals.Signal,lmsPostFinish:new signals.Signal,lmsPreTerminate:new signals.Signal,lmsPostTerminate:new signals.Signal,lmsPreCommit:new signals.Signal,lmsPostCommit:new signals.Signal,lmsPreGetValue:new signals.Signal,lmsPostGetValue:new signals.Signal,lmsPreSetValue:new signals.Signal,lmsPostSetValue:new signals.Signal},e}(ssla),Config=function(e){if(this.aicc_file="",this.courseBaseHtmlPath="courses/",this.showSCOtoSCONavigation=!0,this.showSCORM2004TopNav=!1,this.previousActivityText="Previous Activity",this.nextActivityText="Next Activity",this.scoLaunchType=1,this.hideTOC=!1,this.autoLaunchFirstSCO=!0,this.newWindowSettings=Array("width=1024","height=768"),this.debuggerStatus="on",this.debuggerLaunchType="console",this.masteryScore="",this.showCourseCompletionStatus=!0,this.showCourseSuccessStatus=!0,this.showCourseGrade=!0,this.scormManifestFileName="imsmanifest.xml",this.storageMediaType="server",this.ajaxType="POST",this.setDataURL="/track/set",this.getDataURL="/track/get",this.tocDataObjectName="toc_data",this.saveDataOnSetValue=!1,this.saveDataOnCommit=!0,this.forceSynchronousAjaxOnEnd=!0,this.tocDisplayType="ullistview",this.tocStatusImages=new Object,this.tocStatusImages.completed="images/status/completed.gif",this.tocStatusImages.incomplete="images/status/incomplete.gif",this.tocStatusImages.unknown="images/status/unknown.gif",this.tocStatusImages.not_attempted="images/status/unknown.gif",this.tocStatusImages.passed="images/status/passed.gif",this.tocStatusImages.failed="images/status/failed.gif",this.activeItemHighlightColor="#83f84f",this.showCourseCertificate=!0,this.courseCertThresholdScore=0,this.completeContentOnExit=!1,this.setInitializeToLMS=!0,this.setFinishToLMS=!0,this.saveStatementLog=!1,this.statementLogGetUrl="/track/statement_log/get",this.statementLogSetUrl="/track/statement_log/set",this.showStatementLogPopupLink=!1,this.checkObjectiveId=!1,this.checkInteractionId=!1,this.convertStudentName=!1,this.getStudentIdOverrideFn=null,this.getStudentNameOverrideFn=null,e)for(var t in e)this[t]=e[t]};if(CreateTableOfContents.prototype.getSchemaVersion=function(e){var t=traverse(e,"schemaversion");return t?(versionScorm=t,t):traverse(e,"adlcp:scormtype")?(versionScorm="1.2","1.2"):traverse(e,"adlcp:scormType")?(versionScorm="2004 3rd Edition","2004 3rd Edition"):"http://www.imsproject.org/xsd/imscp_rootv1p1p2"==e.manifest.xmlns?(versionScorm="1.2","1.2"):"http://www.imsglobal.org/xsd/imscp_v1p1"==e.manifest.xmlns?(versionScorm="2004 3rd Edition","2004 3rd Edition"):(versionScorm="1.2","1.2")},CreateTableOfContents.prototype.initTraverse=function(e,t){strCurrentLevel=1,""!=config.aicc_file?(manifestInstance=new manifest(getCourseDirectory()+"/"+config.scormManifestFileName),xmlDom=manifestInstance.create(),xml=utils.StringtoXML(xmlDom),this.objXmlData=(new ParseXMLToObject.ParseXML).parseDocument(xml.documentElement),this.initTraverseContinue(t)):(xml=new ParseXMLToObject.ParseXML(e),xml.async(this.initTraverseContinueWrapper,[this,t]),this.objXmlData=xml.parse())},CreateTableOfContents.prototype.initTraverseContinueWrapper=function(e,t){t[0].objXmlData=e,t[0].initTraverseContinue(t[1])},CreateTableOfContents.prototype.initTraverseContinue=function(e){if("undefined"==typeof this.objXmlData)return void alert("The imsmanifest.xml file was not found at "+file+".\nThe imsmanifest.xml file must be at the root of the SCORM package");this.schemaversion=this.getSchemaVersion(this.objXmlData),n=this.traverse(this.objXmlData);var t="";if("ullistview"==this.blnShowIndent)for(t="</li>",outdent="</ul></li>",k=0;k<strCurrentLevel;k++)t+=outdent;e(n+t)},strLastLevel=0,CreateTableOfContents.prototype.getCurrentActivityId=function(){return this.activityId},CreateTableOfContents.prototype.applyStyle=function(e,t,i){if(before="",after="",strCurrentLevel=t.length+1,1==strCurrentLevel)strCurrentLevel>strLastLevel&&(before+="<ul id='menu_level_"+strLastLevel+"'><div class='headMenuCurso'><li style='background-image: url()'><div class='titulo_curso'>"),strCurrentLevel<strLastLevel&&(before=""),strCurrentLevel==strLastLevel&&(before="</ul>");else if(strCurrentLevel>strLastLevel&&(void 0==i?before+="<ul id='menu_level_"+strLastLevel+"'><li id='"+i+"' style='background-image: url()'><div class='titModuloCurso'>":before+="<ul id='menu_level_"+strLastLevel+"'><li id='"+i+"'>"),strCurrentLevel==strLastLevel&&(void 0==i?(before="</li><li id='"+i+"' style='background-image: url()'><div class='titModuloCurso'>",after="</div>"):before="</li><li id='"+i+"'>"),strCurrentLevel<strLastLevel){for(outdent="</ul></li>",outdentInterval=strLastLevel-strCurrentLevel,k=0;k<outdentInterval;k++)before+=outdent;void 0==i?(before+="<div class='listadoMenuCurso'><li id='"+i+"' style='background-image: url()'><div class='titModuloCurso'>",after="</div>"):before+="<li id='"+i+"'>"}return 1==strCurrentLevel?ret=before+e+"</div>":void 0==i?ret=before+e+"</div>":ret=before+e+after,strLastLevel=strCurrentLevel,ret},CreateTableOfContents.prototype.outputPlain=function(e,t){return e=t.length+t+e+"<br>"},numOfOrganizations=0,aryLookingForItems=new Array,strLastItemName="",aryAttributeCollection=new Array,strCurrentItemId="",intIndexCount=0,intParentIndexCount=-1,CreateTableOfContents.prototype.traverse=function(e,t,i,r){if(attributes="","undefined"==typeof t&&(t="",i=""),"undefined"==typeof i&&(i=""),"object"==typeof e){var n=null,s="";if("organization"==t){if(numOfOrganizations++,numOfOrganizations>1)return alert("This parser does not support multiple organizations."),s;aryLookingForItems=new Array("title"),strLastItemName="organization",i=""}if("item"==t&&(aryLookingForItems=new Array("title","identifier","identifierref","isvisible","adlcp:datafromlms","adlcp:masteryscore","adlcp:timelimitaction","adlcp:maxtimeallowed","adlcp:prerequisite","item"),strLastItemName="item"),"resource"==t)return s;for(var a in e){try{n=e[a]}catch(e){n="<Unable to Evaluate>"}if("object"==typeof n)s+=this.traverse(n,a,i,r+1);else for(j=0;j<aryLookingForItems.length;j++)if(a==aryLookingForItems[j])switch(a){case"title":"organization"==strLastItemName&&(strLastItemName="organization.title",aryLookingForItems=new Array("item"),s="debugview"==this.blnShowIndent?this.outputPlain(n,i):this.applyStyle(n,i),this.menuInstance.setMenuItem(n,"","","unknown",intIndexCount,intParentIndexCount),intIndexCount++,intParentIndexCount++),"item"==strLastItemName&&(strLastItemName="item",aryLookingForItems=new Array("title","identifier","identifierref","isvisible","adlcp:datafromlms","adlcp:masteryscore","adlcp:timelimitaction","adlcp:maxtimeallowed","adlcp:prerequisite","item","parameters"),i+=">","title"==a?"undefined"!=typeof aryAttributeCollection.identifierref||"undefined"==aryAttributeCollection.identifierref?(str="<a href='javascript:gotoSco(\""+aryAttributeCollection.identifierref+'","'+aryAttributeCollection.identifier+"\")'>"+n+"</a>",s="debugview"==this.blnShowIndent?this.outputPlain(str,i,aryAttributeCollection.identifier):this.applyStyle(str,i,aryAttributeCollection.identifier),this.menuInstance.setMenuItem(n,aryAttributeCollection.identifier,aryAttributeCollection.identifierref,"unknown",intIndexCount,intParentIndexCount),intIndexCount++):(s="debugview"==this.blnShowIndent?this.outputPlain(n,i):this.applyStyle(n,i),this.menuInstance.setMenuItem(n,"","","unknown",intIndexCount,intParentIndexCount),intIndexCount++,intParentIndexCount++):s="debugview"==this.blnShowIndent?this.outputPlain(a+":"+n,i):this.applyStyle(a+":"+n,i),aryAttributeCollection=new Array);break;case"identifier":"item"==strLastItemName&&(aryLookingForItems=new Array("title","identifierref","isvisible","adlcp:datafromlms","adlcp:masteryscore","adlcp:timelimitaction","adlcp:maxtimeallowed","adlcp:prerequisite","item","parameters"),aryAttributeCollection[a]=n,strCurrentItemId=n,strLastItemName="item");break;case"identifierref":"item"==strLastItemName&&(aryLookingForItems=new Array("title","identifier","isvisible","adlcp:datafromlms","adlcp:masteryscore","adlcp:timelimitaction","adlcp:maxtimeallowed","adlcp:prerequisite","item","parameters"),aryAttributeCollection[a]=n,strLastItemName="item",this.totalNumOfSCOs++);break;case"isvisible":"item"==strLastItemName&&(aryLookingForItems=new Array("title","identifierref","identifier","adlcp:datafromlms","adlcp:masteryscore","adlcp:timelimitaction","adlcp:maxtimeallowed","adlcp:prerequisite","item","parameters"),aryAttributeCollection[a]=n,strLastItemName="item");break;case"adlcp:datafromlms":"item"==strLastItemName&&(aryLookingForItems=new Array("title","adlcp:masteryscore","identifier","identifierref","adlcp:timelimitaction","adlcp:maxtimeallowed","adlcp:prerequisite","item","parameters"),e[a]=n,this.data[strCurrentItemId]=e);break;case"adlcp:masteryscore":"item"==strLastItemName&&(aryLookingForItems=new Array("title","adlcp:datafromlms","identifier","identifierref","adlcp:timelimitaction","adlcp:maxtimeallowed","adlcp:prerequisite","item","parameters"),e[a]=n,this.data[strCurrentItemId]=e);break;case"adlcp:timelimitaction":"item"==strLastItemName&&(aryLookingForItems=new Array("title","adlcp:datafromlms","adlcp:masteryscore","identifier","identifierref","adlcp:maxtimeallowed","adlcp:prerequisite","item","parameters"),e[a]=n,this.data[strCurrentItemId]=e);break;case"adlcp:maxtimeallowed":"item"==strLastItemName&&(aryLookingForItems=new Array("title","adlcp:datafromlms","adlcp:masteryscore","identifier","identifierref","adlcp:timelimitaction","adlcp:prerequisite","item","parameters"),e[a]=n,this.data[strCurrentItemId]=e);break;case"adlcp:prerequisite":"item"==strLastItemName&&(aryLookingForItems=new Array("title","adlcp:datafromlms","adlcp:masteryscore","identifier","identifierref","adlcp:timelimitaction","adlcp:maxtimeallowed","item","parameters"),e[a]=n,this.data[strCurrentItemId]=e);break;case"parameters":"item"==strLastItemName&&(aryLookingForItems=new Array("title","adlcp:datafromlms","adlcp:masteryscore","identifier","identifierref","adlcp:timelimitaction","adlcp:maxtimeallowed","item","parameters"),e[a]=n,this.data[strCurrentItemId]=e)}}return s}return e},CreateTableOfContents.prototype.lookupHrefByRef=function(e,t){var i,r,n,s,a,o,c,l,u,d,m,p;try{document.getElementById(this.getCurrentActivityId()).childNodes[0].style.backgroundColor=""}catch(e){}if(""!=this.strCurrentActivityId&&(document.getElementById(this.strCurrentActivityId).childNodes[0].style.backgroundColor=""),"undefined"==e)return void alert("identifierref is undefined. Can not find content to launch.");if("undefined"==t)return void alert("identifier is undefined. Can not find content to launch.");for(d=getStudentId(),m=getStudentName(),p=0;p<document.frmMain.credit.length;p++)document.frmMain.credit[p].checked&&(i=document.frmMain.credit[p].value);for(p=0;p<document.frmMain.mode.length;p++)document.frmMain.mode[p].checked&&(r=document.frmMain.mode[p].value);try{s="undefined"==typeof this.data[t]["adlcp:datafromlms"]?"":this.data[t]["adlcp:datafromlms"]}catch(e){s=""}try{a="undefined"==typeof this.data[t]["adlcp:masteryscore"]?"":this.data[t]["adlcp:masteryscore"]}catch(e){a=""}try{o="undefined"==typeof this.data[t]["adlcp:maxtimeallowed"]?"":this.data[t]["adlcp:maxtimeallowed"]}catch(e){o=""}try{c="undefined"==typeof this.data[t]["adlcp:timelimitaction"]?"":this.data[t]["adlcp:timelimitaction"]}catch(e){c=""}try{l="undefined"==typeof this.data[t].parameters?"":this.data[t].parameters}catch(e){l=""}l=l.trim(),"?"==l.charAt(0)&&(l=l.substr(1)),""!=config.masteryScore&&(this.data[t]["adlcp:masteryscore"]=config.masteryScore);for(res in this.objXmlData.manifest.resources.resource){var h=this.objXmlData.manifest.resources.resource[res];if("string"==typeof h&&(h=this.objXmlData.manifest.resources.resource),e==h.identifier){switch(this.schemaversion){case"":return void alert("No schemaversion found in the manifest. I can't tell what SCORM version you want me to launch the course as.");case"1.1":case"1.0":return void alert("This applications does not support launching SCORM 1.0 or 1.1 content. Please make sure you are using the correct schemaversion in the imsmanifest.xml file");case"aicc":n=initAiccPlayer;break;case"1.2":n=initScorm12Player;break;case"CAM 1.3":case"2004 3rd Edition":case"2004 4th Edition":try{getScorm2004Api()}catch(e){return void(document.location.href="scorm2004player.htm?"+document.location.href.split("?")[1])}n=initScorm2004Player;break;default:alert("This applications does not recognize schemaversion "+this.schemaversion+". Please make sure you are using the correct schemaversion in the imsmanifest.xml file")}return u=getCourseDirectory()+"/"+h.href,l&&(u=u.indexOf("?")>-1?u+"&"+l:u+"?"+l),scoid=e,u=utils.jcaEncodePath(u),this.activityId=t,n({act_id:t,sco_id:scoid,path:u,student_name:m,student_id:d,data_from_lms:s,mastery_score:a,max_time_allowed:o,time_limit_action:c,cmi_core_credit:i,cmi_core_lesson_mode:r}),void(document.getElementById(t).childNodes[0].style.backgroundColor=config.activeItemHighlightColor)}}},CreateTableOfContents.prototype.findSCORMVersion=function(e){switch(e){case"aicc":return!1;case"1.1":case"1.0":case"1.2":case"CAM 1.3":case"2004 3rd Edition":case"2004 4th Edition":return e}return n=JSON.stringify(this.objXmlData),this.objXmlData.hasOwnProperty("schemaversion")&&alert("there is a schema version"),n.indexOf("adlcp:scormtype")!=-1?"1.2":n.indexOf("adlcp:scormType")!=-1&&n.indexOf("adlcp_v1p3")!=-1?"2004 3rd Edition":void 0},CreateTableOfContents.prototype.swapIcon=function(e,t){switch(t){case"completed":img=config.tocStatusImages.completed,strImage="url("+img+")";break;case"incomplete":img=config.tocStatusImages.incomplete,strImage="url("+img+")";break;case"unknown":img=config.tocStatusImages.unknown,strImage="url("+img+")";break;case"not attempted":img=config.tocStatusImages.not_attempted,strImage="url("+img+")";break;case"passed":img=config.tocStatusImages.passed,strImage="url("+img+")";break;case"failed":img=config.tocStatusImages.failed,strImage="url("+img+")"}!function(t){setTimeout(function(){document.getElementById(e)&&(document.getElementById(e).style.background=t,document.getElementById(e).style.backgroundRepeat="no-repeat")},1)}(strImage)},CreateTableOfContents.prototype.setCompletionStatus=function(e,t){"completed"!=this.aryCompletionStatus[e]&&"passed"!=this.aryCompletionStatus[e]&&("failed"!=this.aryCompletionStatus[e]&&"completed"!=t?(this.menuInstance.updateItemStatusByItemId(e,t),this.aryCompletionStatus[e]=t,this.swapIcon(e,t),this.processRollup()):"incomplete"==this.aryCompletionStatus[e]&&"completed"==t?(this.menuInstance.updateItemStatusByItemId(e,t),this.aryCompletionStatus[e]=t,this.swapIcon(e,t),this.processRollup()):"failed"==this.aryCompletionStatus[e]&&"passed"==t&&(this.menuInstance.updateItemStatusByItemId(e,t),this.aryCompletionStatus[e]=t,this.swapIcon(e,t),this.processRollup()))},intLastParentIndex=-1,strLastStatus="",strParentStatus="unknown",CreateTableOfContents.prototype.processRollup=function(){},CreateTableOfContents.prototype.getCompletionStatus=function(e){return this.aryCompletionStatus[e]},CreateTableOfContents.prototype.getTOCCache=function(){return a='"aryCompletionStatus":'+JSON.stringify(this.aryCompletionStatus),"{"+a+"}"},CreateTableOfContents.prototype.setTOCCache=function(e){if(numberCompleted=0,"object"==typeof e?objSuspendedData=e:objSuspendedData=JSON.parse(e),"undefined"!=typeof objSuspendedData.aryCompletionStatus&&"undefined"!=objSuspendedData.aryCompletionStatus){this.aryCompletionStatus=objSuspendedData.aryCompletionStatus;for(i in this.aryCompletionStatus)"toJSONString"!=i&&(this.swapIcon(i,this.aryCompletionStatus[i]),"passed"!=this.aryCompletionStatus[i]&&"completed"!=this.aryCompletionStatus[i]||numberCompleted++);this.totalNumOfSCOs==numberCompleted&&config.showCourseCertificate&&window.open("certificate.htm")}},!window.console||!console.log){var console={};console.log=console.error=console.info=console.debug=console.warn=console.trace=console.dir=console.dirxml=console.group=console.groupEnd=console.time=console.timeEnd=console.assert=console.profile=function(){}}DebugWriter.prototype.createDebugWindow=function(e){if("off"!=this.status){switch(e){case"popup":winObj=window.open(),this.documentObject=winObj.document;break;case"embed":this.documentObject=window.document;break;case"console":return void(this.documentObject=console.debug);default:winObj=window.open(),this.documentObject=winObj.document}eleDiv=this.documentObject.createElement("div"),objDiv=this.documentObject.body.appendChild(eleDiv),objDiv.id=this.strDebugDivName,objDiv.style.visibility="hidden",objDiv.style.position="absolute",objDiv.style.top="50px",objDiv.style.left="10px",objDiv.style.border="1px solid black",objDiv.style.backgroundColor="#CCCCCC",objDiv.style.color="#000000",objDiv.style.width="80%",objDiv.style.height="80%",objDiv.style.overflow="auto",objDiv.style.paddingLeft="5px",objDiv.style.zIndex=9,objDiv.innerHTML="",eleDiv1=this.documentObject.createElement("div"),objDiv1=this.documentObject.body.appendChild(eleDiv1),objDiv1.id=this.strDebugToolbarDivName,objDiv1.style.visibility="hidden",objDiv1.style.position="absolute",tmp1=objDiv.style.top,tmp2=tmp1.split("px")[0],objDiv1.style.top=tmp2-30,objDiv1.style.left=objDiv.style.left,objDiv1.style.width=objDiv.style.width,objDiv1.style.height=objDiv.style.height,"embed"==e?(b1="<button onClick='debugWriter.saveDebugWindow();'>Save</button>",b2="<button onClick='debugWriter.printDebugWindow();'>Print</button>",b3="<button onClick='debugWriter.clearDebugWindow();'>Clear</button>",b4="<button onClick='debugWriter.hideDebugWindow();'>Hide</button>",b5="<button onClick='debugWriter.clearDebugQueue();'>Clear Queue</button>",objDiv1.innerHTML=b1+b2+b3+b4+b5):(b1="<button onClick='opener.debugWriter.saveDebugWindow();'>Save</button>",b2="<button onClick='opener.debugWriter.printDebugWindow();'>Print</button>",b3="<button onClick='opener.debugWriter.clearDebugWindow();'>Clear</button>",b4="<button onClick='opener.debugWriter.hideDebugWindow();'>Hide</button>",b5="<button onClick='opener.debugWriter.clearDebugQueue();'>Clear Queue</button>",objDiv1.innerHTML=b1+b2+b3+b4+b5,this.showDebugWindow())}},DebugWriter.prototype.showDebugWindow=function(){"off"!=this.status&&"console"!=this.presentation&&this.documentObject.getElementById(this.strDebugDivName)&&(this.documentObject.getElementById(this.strDebugDivName).style.visibility="visible",this.documentObject.getElementById(this.strDebugToolbarDivName).style.visibility="visible",this.documentObject.getElementById(this.strDebugDivName).innerHTML=this.displayTextInDebugWindow())},DebugWriter.prototype.clearDebugWindow=function(){"off"!=this.status&&(this.documentObject.getElementById(this.strDebugDivName).innerHTML="")},DebugWriter.prototype.clearDebugQueue=function(){"off"!=this.status&&(this.aryDebugText=[],this.aryDebugType=[],this.documentObject.getElementById(this.strDebugDivName)&&"visible"==this.documentObject.getElementById(this.strDebugDivName).style.visibility&&this.showDebugWindow())},DebugWriter.prototype.displayTextInDebugWindow=function(){if("off"!=this.status){var e="";for(i=0;i<this.aryDebugText.length;i++){switch(this.aryDebugType[i].toLowerCase()){case"debug":e+="<FONT COLOR=00FF00>";break;case"warning":e+="<FONT COLOR=FFFF00>";break;case"error":e+="<FONT COLOR=FF0000>";break;default:e+="<FONT COLOR="+this.aryDebugType[i]+">"}e+=this.aryDebugText[i]+"<br>",e+="</FONT><BR>"}return e}},DebugWriter.prototype.hideDebugWindow=function(){"off"!=this.status&&this.documentObject.getElementById(this.strDebugDivName)&&(this.documentObject.getElementById(this.strDebugDivName).style.visibility="hidden",this.documentObject.getElementById(this.strDebugToolbarDivName).style.visibility="hidden")},DebugWriter.prototype.writeToDebugWindow=function(e,t){if("off"!=this.status&&""!=e)if("console"!=this.presentation)this.documentObject.getElementById(this.strDebugDivName).scrollTop=this.documentObject.getElementById(this.strDebugDivName).scrollHeight,""!=t&&"undefined"!=typeof t||(t="#000000"),this.aryDebugText[this.aryDebugText.length]=e,this.aryDebugType[this.aryDebugType.length]=t,"visible"==this.documentObject.getElementById(this.strDebugDivName).style.visibility&&this.showDebugWindow();else try{console.debug(e)}catch(e){this.presentation="popup"}},DebugWriter.prototype.printDebugWindow=function(){"off"!=this.status&&alert("print disabled")},DebugWriter.prototype.saveDebugWindow=function(e){if("off"!=this.status)try{var t=new ActiveXObject("Scripting.FileSystemObject"),i=t.CreateTextFile("C:\\debugger.htm",!0);i.WriteLine(this.displayTextInDebugWindow()),i.Close(),alert("File was saved to C:\\debugger.htm")}catch(e){alert(e.name+"\n"+e.description+"\nThe file was not saved. \nSave uses the activeX File System Object (FSO) so please check your activeX control permissions and try again.")}},Menu=function(){this.objMenuItems=new Object},Menu.prototype.setMenuItem=function(e,t,i,r,n,s){this.objMenuItems[n]={title:e,itemId:t,resourceId:i,status:r,parent:s}},Menu.prototype.getMenuItem=function(name,value){if("index"==name)return this.objMenuItems[value];for(obj in this.objMenuItems)if(v=eval("this.objMenuItems[obj]."+name),v==value)return this.objMenuItems[obj];return-1},Menu.prototype.getMenuItemByIndex=function(e){return this.objMenuItems[e]},Menu.prototype.getMenuItemIndex=function(name,value){if("index"==name)alert("Can not use the index to look up an index.");else for(obj in this.objMenuItems)if(v=eval("this.objMenuItems[obj]."+name),v==value)return obj;return-1},Menu.prototype.getMenuObject=function(){return this.objMenuItems},Menu.prototype.getFirstLeafActivity=function(){for(obj in this.objMenuItems)if(""!=this.objMenuItems[obj].resourceId)return this.objMenuItems[obj];return""},Menu.prototype.getLastItem=function(){return this.objMenuItems[this.objMenuItems.length]},Menu.prototype.getLastAttemptedItem=function(){return""},Menu.prototype.updateItemStatusByItemId=function(e,t){index=this.getMenuItemIndex("itemId",e),index!=-1&&(this.objMenuItems[index].status=t)},StatementLogger.prototype.addStatement=function(e){var t;for(this.statements.push(e),t=0;t<this.listeners.length;t++)try{this.listeners[t](e)}catch(e){console.log("listener disappeared")}},StatementLogger.prototype.serialize=function(){var e,t=[];for(e=0;e<this.statements.length;e++)t.push({statementType:this.statements[e].statementType,statement:this.statements[e].statement,debugLevel:this.statements[e].debugLevel,displayWhen:this.statements[e].getDisplayWhen(),timeTaken:this.statements[e].timeTaken,subStatements:this.statements[e].subStatements});return JSON.stringify(t)},StatementLogger.prototype.save=function(){reqwest({url:config.statementLogSetUrl,method:config.ajaxType,type:"json",async:!0,data:{uuid:this.uuid,courseId:this.courseId,studentId:this.studentId,timestamp:(new Date).getTime(),statements:this.serialize()}})},StatementLogEntry.prototype.addSubStatement=function(e){this.subStatements.push(e)},StatementLogEntry.prototype.stampTimeTaken=function(){this.timeTaken=((new Date).getTime()-this.when.getTime())/1e3},StatementLogEntry.prototype.getDisplayWhen=function(){return this.displayWhen||(this.displayWhen=this.when.toTimeString().split(" ")[0]+"."+this.when.getMilliseconds()),this.displayWhen};var closeEval=!1,ssla=function(e){function t(){var e={},t=document.cookie;if(""===t)return e;for(var i=t.split("; "),r=0;r<i.length;r++){var n=i[r],s=n.indexOf("="),a=n.substring(0,s),o=n.substring(s+1);o=decodeURIComponent(o),e[a]=o}return e}e||(e={}),e.storageLayers||(e.storageLayers={}),e.storage={getStorageLayer:function(){return e.storageLayers.hasOwnProperty(config.storageMediaType)?e.storageLayers[config.storageMediaType]:(alert("Storage layer type not recognized, check your configuration: "+config.storageMediaType),null)},load:function(t,i,r){return e.storage.getStorageLayer().load(t,i,r)},save:function(t,i,r,n){return e.storage.getStorageLayer().save(t,i,r,n)},saveDiff:function(t,i,r,n){return e.storage.getStorageLayer().saveDiff(t,i,r,n)}},e.storageLayers.cookie={doCallback:function(e,t,i){"2004"==i?returnSCORMData(t):"toc_data"==e?returnFromAjaxTocData(t):returnFromAjaxScorm12Course(t)},load:function(i,r,n){var s,a=t();if(a[r])try{s=JSON.parse(a[r]),e.storageLayers.cookie.doCallback(r,s,n)}catch(t){e.storageLayers.cookie.doCallback(r,null,n)}else e.storageLayers.cookie.doCallback(r,null,n)},save:function(e,t,i){var r=null,n="/",s=null,a=null;document.cookie=t+"="+encodeURIComponent(i)+(r?"; expires="+r.toGMTString():"")+(n?"; path="+n:"")+(s?"; domain="+s:"")+(a?"; secure":""),e&&e(!0,t,i)},saveDiff:function(e,t,i){alert("ssla.storageLayers.cookie.saveDiff not supported.")}};var i=function(e){return(e+"").replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0")};return e.storageLayers.server={load:function(e,t,i){var r=window.JSInterface.getScorm(t,getCourseId(),getStudentId());"2004"==i?returnSCORMData(r):"toc_data"==t?returnFromAjaxTocData(r):returnFromAjaxScorm12Course(r)},save:function(t,r,n,s){globalActiveSaveCounter+=1,console.log(">>>"+r),console.log(">>>"+n),n=i(n);var a=window.JSInterface.setScorm(r,n,getCourseId(),versionScorm);a.indexOf("StatusCode: 403")>-1&&(closeEval=!0),e.storageLayers.server.onComplete(),closeEval&&(closeEval=!1,navigate("exit"))},saveDiff:function(e,t,i,r){},onComplete:function(){globalActiveSaveCounter-=1}},e}(ssla);Utils.prototype.StringtoXML=function(e){var t,i;return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):(i=new DOMParser,t=i.parseFromString(e,"text/xml")),t},Utils.prototype.openPage=function(e,t,i,r){var n;switch(t){case"self":document.location.replace(e);break;case"popup":n=r?window.open(e,i,r):window.open(e,i),null==n||"undefined"==typeof n||n.focus()}return n},Utils.prototype.parseQueryString=function(e){var t,i=window.location.search.substring(1),r={};t=i.split("&");for(var n=0;n<t.length;n++){var s=t[n].split("=");r[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return r},Utils.prototype.jcaDecodePath=function(e){return e=e.replace(/\[0\]/g,"&nbsp;"),e=e.replace(/\[1\]/g,"&"),e=e.replace(/\[2\]/g,"?"),e=e.replace(/\[3\]/g,"=")},Utils.prototype.jcaEncodePath=function(e){return e=e.replace(/&nbsp;/g,"[0]"),e=e.replace(/\&/g,"[1]"),e=e.replace(/\?/g,"[2]"),e=e.replace(/\=/g,"[3]")},Utils.prototype.decode=function(e){return unescape(e.replace(/\+/g," "))},String.prototype.trim||!function(){var e=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(e,"")}}(),window.configCustom||(window.configCustom={});var config=new Config(window.configCustom),debugWriter=new DebugWriter(config.debuggerStatus,config.debuggerLaunchType),utils=new Utils,objVars=utils.parseQueryString(document.location.href),globalActiveSaveCounter=0,currentCourseDetails={courseId:getCourseId(),studentId:getStudentId(),studentName:getStudentName()};utils.currentCourseDetails=currentCourseDetails;var statementLogger=new StatementLogger(currentCourseDetails.courseId,currentCourseDetails.studentId),activeCourse=getCourseDirectory()+"/"+config.scormManifestFileName;utils.currentCourseDetails=currentCourseDetails;var createTableOfContentsInstance,currMenuState="hide",ie=function(){
for(var e,t=3,i=document.createElement("div"),r=i.getElementsByTagName("i");i.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->",r[0];);return t>4?t:e}(),qsObject,API,API_1484_11,CMI_DBInstance,oScormData,strCookieName,StatementLogEntry,popupSettings="";CMI_DBInstance={},oScormData={},strCookieName="";var arrInteractionTypes={},ScormBase=function(){function e(e){var t=1*e;return!(isNaN(t)||2!=e.length&&4!=e.length)}function t(e){var t=1*e;return!isNaN(t)&&2==e.length}function i(e){return e.indexOf(".")!=-1?(s=e.split("."),!(s.length>2)&&(!isNaN(s[0])&&2==s[0].length)):(s=e,!isNaN(s)&&2==s.length)}function r(e){return e.indexOf("cmi.objectives")!=-1||e.indexOf("cmi.interactions")!=-1}function o(e){return e.indexOf("_children")!=-1||e.indexOf("_count")!=-1}var l=function(){this._init()};return l.prototype._init=function(){this.lastSCORMData="",this.isDirty=!1,this._isInitialized=!1,this._errorCode,this.statementLogger=statementLogger,this.suspendFlagSet=!1,this.finishing=!1},l.prototype.initialize=function(e){var t,i,r=new StatementLogEntry("runtime");return ssla.events.lmsPreInitialize.dispatch(),t=this._initialize(e),ssla.events.lmsPostInitialize.dispatch(t),i=this._getLastError(),r.statement=vsprintf("LMSInitialize(%S) returned %S.",[e,t]),r.stampTimeTaken(),"0"!==i&&(r.debugLevel="ERROR",r.addSubStatement(vsprintf("LMSGetLastError returned %S.",[i]))),this.statementLogger.addStatement(r),t},l.prototype._initialize=function(e){var t=oScormData.strStudentId+"_"+oScormData.strSCOId,i="";if(this._isInitialized)this._errorCode="101",config.setInitializeToLMS&&ssla.storage.getStorageLayer().save(null,"initialize",'{"'+t+'":"false"}'),i="false";else if(""!=e||null==e)this._errorCode="201",config.setInitializeToLMS&&ssla.storage.getStorageLayer().save(null,"initialize",'{"'+t+'":"false"}'),i="false";else{var r=oScormData.data;CMI_DBInstance.callRestore(r),this._isInitialized=!0,this._errorCode="0",config.setInitializeToLMS&&ssla.storage.getStorageLayer().save(null,"initialize",'{"'+t+'":"true"}'),CMI_DBInstance.callCommit(),this.saveData(),i="true"}return i},l.prototype.finish=function(e){var t,i,r=new StatementLogEntry("runtime");return this.finishing=!0,ssla.events.lmsPreFinish.dispatch(),t=this._finish(e),ssla.events.lmsPreFinish.dispatch(t),i=this._getLastError(),r.statement=vsprintf("LMSFinish(%S) returned %S.",[e,t]),r.stampTimeTaken(),"0"!==i&&(r.debugLevel="ERROR",r.addSubStatement(vsprintf("LMSGetLastError returned %S.",[i]))),this.statementLogger.addStatement(r),t},l.prototype._finish=function(e){console.log("_finish not implemented")},l.prototype.commit=function(e){var t,i,r=new StatementLogEntry("runtime");return ssla.events.lmsPreCommit.dispatch(),t=this._commit(e),ssla.events.lmsPostCommit.dispatch(t),i=this._getLastError(),r.statement=vsprintf("LMSCommit(%S) returned %S.",[e,t]),r.stampTimeTaken(),"0"!==i&&(r.debugLevel="ERROR",r.addSubStatement(vsprintf("LMSGetLastError returned %S.",[i]))),this.statementLogger.addStatement(r),t},l.prototype._commit=function(e){if(!this._isInitialized)return this._errorCode="301","false";if(""!=e||null==e)return this._errorCode="201","false";if(this.isDirty||this.finishing){var t=CMI_DBInstance.callCommit();return debugWriter.writeToDebugWindow("Committing data: "+t),config.saveDataOnCommit&&this.saveData(),null==t?"false":(this.isDirty=!1,"true")}return"true"},l.prototype.getValue=function(e){var t,i,r=new StatementLogEntry("runtime");return ssla.events.lmsPreGetValue.dispatch(e),t=this._getValue(e),ssla.events.lmsPostGetValue.dispatch(e,t),i=this._getLastError(),r.statement=vsprintf("LMSGetValue(%S) returned %S.",[e,t]),r.stampTimeTaken(),"0"!==i&&(r.debugLevel="ERROR",r.addSubStatement(vsprintf("LMSGetLastError returned %S.",[i]))),this.statementLogger.addStatement(r),t},l.prototype._getValue=function(e){debugWriter.writeToDebugWindow("LMSGetValue :: Getting value "+e+" from LMS");var t="";return this._isInitialized?(this._errorCode=this.errorHandling(e,"",this._isInitialized,"get"),this.checkForValidDataModelElement(e)&&this.isReadable(e)&&(t=e.indexOf("_children")!=-1?this.getDataModelElementChildElements(e):this._internalGetValue(e)),debugWriter.writeToDebugWindow("LMSGetValue :: Value of "+e+" is "+t),t.toString()):(t="",this._errorCode="301","")},l.prototype.setValue=function(e,t){var i,r,n=new StatementLogEntry("runtime");return ssla.events.lmsPreSetValue.dispatch(e,t),i=this._setValue(e,t),ssla.events.lmsPostSetValue.dispatch(e,t),r=this._getLastError(),n.statement=vsprintf("LMSSetValue(%S, %S) returned %S.",[e,t,i]),n.stampTimeTaken(),"0"!==r&&(n.debugLevel="ERROR",n.addSubStatement(vsprintf("LMSGetLastError returned %S.",[r]))),this.statementLogger.addStatement(n),i},l.prototype.getLastError=function(){var e,t=new StatementLogEntry("runtime");return e=this._getLastError(),t.statement=vsprintf("LMSGetLastError() returned %S.",[e]),t.stampTimeTaken(),this.statementLogger.addStatement(t),e},l.prototype._getLastError=function(){return null==this._errorCode||void 0==this._errorCode?"0":this._errorCode},l.prototype.getErrorString=function(e){var t,i=new StatementLogEntry("runtime");return t=this._getErrorString(e),i.statement=vsprintf("LMSGetErrorString(%S) returned %S.",[t]),i.stampTimeTaken(),this.statementLogger.addStatement(i),t},l.prototype._getErrorString=function(e){var t="";return this.errorCodeMap[e]&&(t=this.errorCodeMap[e]),t},l.prototype.getDiagnostic=function(e){var t,i=new StatementLogEntry("runtime");return t=this._getDiagnostic(e),i.statement=vsprintf("LMSGetDiagnostic(%S) returned %S.",[t]),i.stampTimeTaken(),this.statementLogger.addStatement(i),t},l.prototype._getDiagnostic=function(e){return e},l.prototype.getErrorCodeByType=function(e){return this.errorCodeLookupByType[e]},l.prototype.checkObjectives=function(){console.log("checkObjectives not implemented.")},l.prototype.checkInteractions=function(){console.log("checkInteractions not implemented.")},l.prototype.customSetValueDmeChecks=function(e,t){return t},l.prototype._setValue=function(e,t){return debugWriter.writeToDebugWindow("LMSSetValue :: Setting value "+e+" to "+t+" in the LMS"),this._isInitialized?(this._errorCode=this.errorHandling(e,t,this._isInitialized,"set"),"402"==this._errorCode?"false":(a=this.checkForValidDataModelElement(e),b=this.isWritable(e),c=this.checkValidValues(e,t),a&&b&&c?(t=this.customSetValueDmeChecks(e,t),ret=this._internalSetValue(e,t),"true"!=ret&&1!=ret||(this._errorCode="0",this.isDirty=!0),ret.toString()):"false")):(this._errorCode="301","false")},l.prototype.hasChildren=function(e){if(this.checkForValidDataModelElement(e)){if(e.indexOf("cmi.objectives")!=-1&&e.indexOf("score._children")!=-1)return!0;switch(e){case"cmi.core._children":return!0;case"cmi.core.score._children":return!0;case"cmi.objectives._children":return!0;case"cmi.interactions._children":return!0;case"cmi.student_data._children":return!0;case"cmi.student_preference._children":return!0;default:return!1}}},l.prototype.errorHandling=function(e,t,i,n){if(!i)return"301";if("set"==n&&(e.indexOf("._count")!=-1||e.indexOf("._children")!=-1))return"402";if(!this.checkForValidDataModelElement(e))return e.indexOf("_children")!=-1?"202":e.indexOf("_count")!=-1?"203":"201";if("undefined"==typeof t)return t="","201";if("get"==n){if(e.indexOf("_children")!=-1&&!this.hasChildren(e))return"202";if(e.indexOf("_count")!=-1&&!r(e))return"203";if(!this.isReadable(e))return this.getErrorCodeByType("NOT_READABLE")}if(""!=t){if(o(e))return"402";if(!this.isWritable(e))return this.getErrorCodeByType("NOT_WRITABLE");if(!this.checkValidValues(e,t))return this.getErrorCodeByType("INVALID_VALUE")}return"0"},l.prototype.getDataModelElementChildElements=function(e){var t="student_id,student_name,lesson_location,credit,lesson_status,entry,score,total_time,lesson_mode,exit,session_time",i="raw,min,max",r="id,score,status",n="mastery_score,max_time_allowed,time_limit_action",s="audio,language,speed,text",a="id,objectives,time,type,correct_responses,weighting,student_response,result,latency";if(this.checkForValidDataModelElement(e)){if(e.indexOf("score._children")!=-1)return i;switch(e){case"cmi.core._children":return t;case"cmi.objectives._children":return r;case"cmi.student_data._children":return n;case"cmi.student_preference._children":return s;case"cmi.interactions._children":return a;default:return""}}},l.prototype.checkForValidDataModelElement=function(e){if(e.indexOf("cmi.objectives")!=-1&&1==this.checkObjectives(e))return!0;if(e.indexOf("cmi.interactions")!=-1)return n=this.checkInteractions(e),n;for(var t=0;t<this.validDmes.length;t++)if(e==this.validDmes[t])return!0;return!1},l.prototype.checkValidValues=function(e,t){console.log("checkValidValues not implemented.")},l.prototype.isWritable=function(e){if(this.checkForValidDataModelElement(e)){if(e.indexOf("cmi.interactions")!=-1&&(e.indexOf("_children")==-1||e.indexOf("_count")==-1)&&1==this.checkInteractions(e))return!0;if(e.indexOf("cmi.objectives")==-1){for(var t=0;t<this.validWritables.length;t++)if(e==this.validWritables[t])return!0;return!1}if((e.indexOf("_children")==-1||e.indexOf("_count")==-1)&&1==this.checkObjectives(e))return!0}},l.prototype.isReadable=function(e){if(this.checkForValidDataModelElement(e)){if(e.indexOf("cmi.interactions")!=-1){if(e.indexOf("._children")!=-1)return!0;if(e.indexOf("._count")!=-1)return!0}if(e.indexOf("cmi.objectives")==-1){for(var t=0;t<this.validReadables.length;t++)if(e==this.validReadables[t])return!0;return!1}if(1==this.checkObjectives(e))return!0}},l.prototype._internalGetValue=function(e){console.log("_internalGetValue not implemented.")},l.prototype._internalSetValue=function(e,t){console.log("_internalSetValue not implemented.")},l.prototype.checkStatus=function(e,t){console.log("checkStatus not implemented.")},l.prototype.checkRawMinMax=function(e){var t=1*e;return!(isNaN(t)||t<0||t>100)},l.prototype.checkCMITimeSpan=function(r){var n=r.split(":"),s=n[0],a=n[1],o=n[2];return 0!=e(s)&&0!=t(a)&&0!=i(o)},l.prototype.checkCMIString255=function(e){var t="^.{0,255}$";return matchRegEx(t,e)},l.prototype.checkCMIString4096=function(e){var t="^.{0,4096}$";return matchRegEx(t,e)},l.prototype.saveData=function(){var e,t,i;e=oScormData.strStudentId+"_"+oScormData.strSCOId,t=CMI_DBInstance.toDB(),(this.lastSCORMData!=t||this.finishing)&&(n=ssla.storage.getStorageLayer().save(null,e,t,{isEndRequest:this.finishing}),this.lastSCORMData=t,this.isDirty=!1),debugWriter.writeToDebugWindow("SaveData() setting :: Value of "+e+" is "+t);try{i=createTableOfContentsInstance.getTOCCache()}catch(e){debugWriter.writeToDebugWindow("SaveData() error :: failed to locate createTableOfContentsInstance.getTOCCache()")}ssla.storage.getStorageLayer().save(null,config.tocDataObjectName,i,{isEndRequest:this.finishing}),config.saveStatementLog&&parent.statementLogger.save(),debugWriter.writeToDebugWindow("Leaving")},l},ScormBase12=function(e){var t="^-?([0-9]{0,3})(.[0-9]{1,2})?$",i="^.{0,255}$",r="^\\w{1,255}$",n="^([0-2]{1}[0-9]{1}):([0-5]{1}[0-9]{1}):([0-5]{1}[0-9]{1})(.[0-9]{1,2})?$",s="^([0-9]{2,4}):([0-9]{2}):([0-9]{2})(.[0-9]{1,2})?$",a="^correct$|^wrong$|^unanticipated$|^neutral$|^([0-9]{0,3})?(.[0-9]{1,2})?$",o=function(){this._init()};for(var c in e.prototype)o.prototype[c]=e.prototype[c];return o.prototype.validDmes=["cmi.comments_from_lms","cmi.comments","cmi.core._children","cmi.core.credit","cmi.core.entry","cmi.core.exit","cmi.core.lesson_location","cmi.core.lesson_mode","cmi.core.lesson_status","cmi.core.score._children","cmi.core.score.max","cmi.core.score.min","cmi.core.score.raw","cmi.core.session_time","cmi.core.student_id","cmi.core.student_name","cmi.core.total_time","cmi.launch_data","cmi.student_data._children","cmi.student_data.mastery_score","cmi.student_data.max_time_allowed","cmi.student_data.time_limit_action","cmi.student_preference._children","cmi.student_preference.audio","cmi.student_preference.language","cmi.student_preference.speed","cmi.student_preference.text","cmi.suspend_data"],o.prototype.validWritables=["cmi.comments","cmi.core.exit","cmi.core.lesson_location","cmi.core.lesson_status","cmi.core.score.max","cmi.core.score.min","cmi.core.score.raw","cmi.core.session_time","cmi.student_preference.audio","cmi.student_preference.language","cmi.student_preference.speed","cmi.student_preference.text","cmi.suspend_data"],o.prototype.validReadables=["cmi.comments_from_lms","cmi.comments","cmi.core._children","cmi.core.credit","cmi.core.entry","cmi.core.lesson_location","cmi.core.lesson_mode","cmi.core.lesson_status","cmi.core.score._children","cmi.core.score.max","cmi.core.score.min","cmi.core.score.raw","cmi.core.student_id","cmi.core.student_name","cmi.core.total_time","cmi.launch_data","cmi.student_data._children","cmi.student_data.mastery_score","cmi.student_data.max_time_allowed","cmi.student_data.time_limit_action","cmi.student_preference._children","cmi.student_preference.audio","cmi.student_preference.language","cmi.student_preference.speed","cmi.student_preference.text","cmi.suspend_data"],o.prototype.errorCodeMap={0:"No error",101:"General Exception",201:"Invalid argument error",202:"Element cannot have children",203:"Element not an array.",301:"Not initialized",401:"Not implemented error",402:"Invalid set value, element is a keyword",403:"Element is read only",404:"Element is write only",405:"Incorrect Data Type"},o.prototype.errorCodeLookupByType={NOT_READABLE:"403",NOT_WRITABLE:"404",INVALID_VALUE:"405"},o.prototype._finish=function(e){var t=oScormData.strStudentId+"_"+oScormData.strSCOId;if(""!=e||null==e)return this._errorCode="201",config.setFinishToLMS&&ssla.storage.getStorageLayer().save(null,"finish",'{"'+t+'":"false"}'),"false";if(this._isInitialized){config.completeContentOnExit&&CMI_DBInstance.callSetValue("cmi.core.lesson_status","completed");var i=CMI_DBInstance.local_data["cmi.student_data.mastery_score"];if(""!=i){var r=CMI_DBInstance.callGetValue("cmi.core.score.raw");""!=r&&(parseInt(r)>=parseInt(i)?CMI_DBInstance.callSetValue("cmi.core.lesson_status","passed"):CMI_DBInstance.callSetValue("cmi.core.lesson_status","failed"))}return this.suspendFlagSet?CMI_DBInstance.callSetValue("cmi.core.entry","resume"):CMI_DBInstance.callSetValue("cmi.core.entry",""),this.saveData(),this._isInitialized=!1,this._errorCode="0",debugWriter.writeToDebugWindow("Finishing...LMS called LMSCommitted on data"),debugWriter.writeToDebugWindow("Finished !"),config.setFinishToLMS&&ssla.storage.getStorageLayer().save(null,"finish",'{"'+t+'":"true"}'),"true"}return this._errorCode="301",config.setFinishToLMS&&ssla.storage.getStorageLayer().save(null,"finish",'{"'+t+'":"false"}'),"false"},o.prototype.customSetValueDmeChecks=function(e,t){switch(e){case"cmi.comments":var i=this._internalGetValue(e);t=i+t;break;case"cmi.core.exit":switch(debugWriter.writeToDebugWindow("cmi_core_exit_value = "+t,"green"),t){case"time-out":case"":case"logout":this.suspendFlagSet=!1;break;case"suspend":this.suspendFlagSet=!0}debugWriter.writeToDebugWindow("cmi.core.entry = "+CMI_DBInstance.callGetValue("cmi.core.entry"),"green")}return t},o.prototype.checkObjectives=function(e){return!!(endsWith(e,"._children")||endsWith(e,"._count")||endsWith(e,".id")||endsWith(e,".score._children")||endsWith(e,".score.max")||endsWith(e,".score.min")||endsWith(e,".score.raw")||endsWith(e,".status"))},o.prototype.checkInteractions=function(e){if(endsWith(e,"._children")||endsWith(e,"._count")||endsWith(e,".id")||endsWith(e,".type")||endsWith(e,".time")||endsWith(e,".correct_responses._count")||endsWith(e,".weighting")||endsWith(e,".student_response")||endsWith(e,".result")||endsWith(e,".latency"))return!0;if(e.indexOf("correct_responses")!=-1){if(e.indexOf(".pattern")!=-1)return!0}else e.indexOf("objectives")!=-1&&(e="objectives"+e.split(".objectives")[1],this.checkObjectives(e));return!1},o.prototype.checkValidValues=function(e,o){var c,l,u,d,m=[],p=String(o);if(null==o)return!1;if("undefined"==typeof o)return!1;if(e.indexOf("cmi.objectives")!=-1&&(e.indexOf("_children")==-1||e.indexOf("_count")==-1)){if(e.indexOf("id")!=-1)return""==o?(this._errorCode="405",!1):(c=this._internalGetValue("cmi.objectives._count"),m=e.split("."),parseInt(m[2])>c+1?(this._errorCode="201",!1):!!matchRegEx(r,o)||(config.checkObjectiveId?(this._errorCode="405",debugWriter.writeToDebugWindow("The interaction id "+o+" does not match the CMIIdentifier definition "+r,"red"),!1):(this._errorCode="0",!0)));if(e.indexOf("score.max")!=-1)return this.checkRawMinMax(o)||(this._errorCode="405"),this.checkRawMinMax(o);if(e.indexOf("score.min")!=-1)return this.checkRawMinMax(o)||(this._errorCode="405"),this.checkRawMinMax(o);if(e.indexOf("score.raw")!=-1)return this.checkRawMinMax(o)||(this._errorCode="405"),this.checkRawMinMax(o);if(e.indexOf("status")!=-1)return this.checkStatus(o)}if(e.indexOf("cmi.interactions")!=-1&&(e.indexOf("_children")==-1||e.indexOf("_count")==-1)){if(c=this._internalGetValue("cmi.interactions._count"),m=e.split("."),parseInt(m[2])>c+1)return this._errorCode="201",!1;if(e.indexOf("id")!=-1)return""==o?(this._errorCode="405",!1):!!matchRegEx(r,o)||(config.checkInteractionId?(this._errorCode="405",debugWriter.writeToDebugWindow("The interaction id "+o+" does not match the CMIIdentifier definition "+r,"red"),!1):(this._errorCode="0",!0));if(e.indexOf("correct_responses")!=-1&&(l=e.split("correct_responses")[0]+"._count",c=this._internalGetValue(l),m=e.split("."),parseInt(m[4])>c+1))return this._errorCode="201",!1;if(e.indexOf("time")!=-1)return matchRegEx(n,o);if(e.indexOf("type")!=-1)return this.checkInteractionType(o);if(e.indexOf("pattern")!=-1)switch(d=e.replace("pattern","type"),arrInteractionTypes[d]){case"true-false":null!=p.match(/^0|1|t|f$/)&&(u=!0);break;case"choice":null!=p.match(/(^([0-9a-z],){0,25}[0-9a-z]$)|(^\{([0-9a-z],){0,25}[0-9a-z]\}$)/)&&(u=!0);break;case"fill-in":null!=p.match(/^[a-zA-Z0-9 ]{0,255}$/)&&(u=!0);break;case"matching":null!=p.match(/(^([0-9a-z]\.[0-9a-z],)*[0-9a-z]\.[0-9a-z]$)|(^{([0-9a-z]\.[0-9a-z],)*[0-9a-z]\.[0-9a-z]}$)/)&&(u=!0);break;case"performance":null!=p.match(/^[a-zA-Z0-9 ]{0,255}$/)&&(u=!0);break;case"sequencing":null!=p.match(/^([0-9a-z],)*[0-9a-z]$/)&&(u=!0);break;case"likert":u=!0;break;case"numeric":null!=p.match(/^[\+\-]?(\d+|\d*\.\d+)$/)&&(u=!0)}if(e.indexOf("weighting")!=-1)return matchRegEx(t,o);if(e.indexOf("student_response")!=-1)return matchRegEx(i,o);if(e.indexOf("result")!=-1)return matchRegEx(a,o);if(e.indexOf("latency")!=-1)return this.checkCMITimeSpan(o)}var h=parseInt(o),f=1*h;switch(e){case"cmi.suspend_data":return this.checkCMIString4096(o);case"cmi.core.lesson_location":return this.checkCMIString255(o);case"cmi.core.lesson_status":return this.checkStatus(o,1);case"cmi.comments":return this.checkCMIString4096(o);case"cmi.core.exit":switch(o){case"time-out":return!0;case"suspend":return!0;case"logout":return!0;case"":return!0;default:return!1}break;case"cmi.core.score.max":return this.checkRawMinMax(o);case"cmi.core.score.min":return this.checkRawMinMax(o);case"cmi.core.score.raw":return this.checkRawMinMax(o);case"cmi.core.session_time":return s="^([0-9]{2,4}):([0-9]{2}):([0-9]{2})(.[0-9]{1,2})?$",!!matchRegEx(s,o)&&this.checkCMITimeSpan(o);case"cmi.student_preference.audio":return""==o?(this._errorCode="405",!1):"string"==typeof o&&o.indexOf(".")==-1&&!isNaN(o)&&(h=parseInt(o),f=1*h,!isNaN(f)&&!(f<-1||f>100));case"cmi.student_preference.language":return this.checkCMIString255(o);case"cmi.student_preference.speed":return""==o?(this._errorCode="405",!1):"string"==typeof o&&o.indexOf(".")==-1&&!isNaN(o)&&(h=parseInt(o),f=1*h,!isNaN(f)&&!(f<-100||f>100));case"cmi.student_preference.text":return""==o?(this._errorCode="405",!1):"string"==typeof o&&("-1"==o||"0"==o||"1"==o);default:return!0}},o.prototype._internalGetValue=function(e){return CMI_DBInstance.callGetValue(e)},o.prototype._internalSetValue=function(e,t){debugWriter.writeToDebugWindow("setValue("+e+","+t+")");var i=CMI_DBInstance.callSetValue(e,t);if(debugWriter.writeToDebugWindow("CMI_DBInstance.callSetValue returned "+i),"undefined"==typeof i)i="false";else try{config.saveDataOnSetValue&&this.saveData()}catch(e){}return"cmi.core.lesson_status"==e&&(createTableOfContentsInstance&&createTableOfContentsInstance.setCompletionStatus(oScormData.strActivityId,t),debugWriter.writeToDebugWindow("setValue on activity id "+oScormData.strSCOId)),debugWriter.writeToDebugWindow("setValue("+e+","+t+") Returns: "+i),i},o.prototype.checkStatus=function(e,t){switch(e){case"passed":case"completed":case"failed":case"incomplete":case"browsed":return!0;case"not attempted":return 1!=t;default:return!1}},o.prototype.checkInteractionType=function(e){return""==e?(this._errorCode="405",!1):!("true-false"!==e&&"choice"!==e&&"fill-in"!==e&&"matching"!==e&&"performance"!==e&&"sequencing"!==e&&"likert"!==e&&"numeric"!==e)},o};CMI_DB_12.prototype.callSetValue=function(e,t){var i="NO_DATA_REPORTED",r=0;switch(e){case"cmi.core.session_time":var n=this._getLocalData("cmi.core.total_time");"undefined"==typeof n&&(n="0000:00:00");var s=this.addTimes(n,t);i=this._setLocalData("cmi.core.total_time",s+"")}if(e.indexOf("cmi.objectives.")!=-1)e.indexOf(".id")!=-1&&(i=this.local_data[e],"undefined"==typeof i&&(r=parseInt(this.local_data["cmi.objectives._count"]),isNaN(r)&&(r=0),r++,this.local_data["cmi.objectives._count"]=r));else if(e.indexOf("cmi.interactions.")!=-1)if(e.indexOf("type")!=-1&&(arrInteractionTypes[e]=t),e.indexOf(".objectives")!=-1){if(e.indexOf(".id")!=-1&&(i=this.local_data[e],"undefined"==typeof i)){var a=e.split(".")[2];r=parseInt(this.local_data["cmi.interactions."+a+".objectives._count"]),isNaN(r)&&(r=0),r++,this.local_data["cmi.interactions."+a+".objectives._count"]=r}}else e.indexOf(".id")!=-1?(i=this.local_data[e],"undefined"==typeof i&&(r=parseInt(this.local_data["cmi.interactions._count"]),isNaN(r)&&(r=0),r++,this.local_data["cmi.interactions._count"]=r)):e.indexOf(".correct_responses")!=-1&&e.indexOf(".pattern")!=-1&&(i=this.local_data[e],"undefined"==typeof i&&(a=e.split(".")[2],r=parseInt(this.local_data["cmi.interactions."+a+".correct_responses._count"]),isNaN(r)&&(r=0),r++,this.local_data["cmi.interactions."+a+".correct_responses._count"]=r));return i=this._setLocalData(e,t)},CMI_DB_12.prototype.callGetValue=function(e){var t=this._getLocalData(e);return e.indexOf("._count")>-1&&"undefined"==typeof t&&(t="0"),t},CMI_DB_12.prototype.callCommit=function(){return this.toDB()},CMI_DB_12.prototype.toDB=function(){return debugWriter.writeToDebugWindow("CMI_DB_12.prototype.toDB() "+JSON.stringify(this.local_data),"blue"),JSON.stringify(this.local_data)},CMI_DB_12.prototype.callRestore=function(e){"undefined"==typeof e||!e||isEmptyObject(e)?(debugWriter.writeToDebugWindow("CMI_DB_12.prototype.callRestore nothing to restore; set up the string with all the default values","blue"),this.local_data["cmi.core.lesson_status"]="not attempted",this.local_data["cmi.suspend_data"]="",this.local_data["cmi.core.lesson_location"]="",this.local_data["cmi.core.total_time"]="0000:00:00",this.local_data["cmi.core.entry"]="ab-initio",this.local_data["cmi.core.score.raw"]="",this.local_data["cmi.core.score.min"]="",this.local_data["cmi.core.score.max"]="",this.local_data["cmi.comments"]="",this.local_data["cmi.comments_from_lms"]="No comment",this.local_data["cmi.objectives._count"]="0",this.local_data["cmi.interactions._count"]="0",this.local_data["cmi.student_preference.audio"]="",this.local_data["cmi.student_preference.language"]="",this.local_data["cmi.student_preference.speed"]="",this.local_data["cmi.student_preference.text"]=""):(debugWriter.writeToDebugWindow("CMI_DB_12.prototype.callRestore "+this.local_data,"blue"),this.local_data=e,"ab-initio"==this.local_data["cmi.core.entry"]&&(this.local_data["cmi.core.entry"]="")),this._setLocalData("cmi.core.student_name",this.student_name?this.student_name:""),this._setLocalData("cmi.core.student_id",this.student_number&&""!=this.student_number?this.student_number:"001DEFAULTSTUDENT"),this._setLocalData("cmi.launch_data",this.data_from_lms?this.data_from_lms:""),this._setLocalData("cmi.student_data.mastery_score",this.mastery_score?this.mastery_score:""),this._setLocalData("cmi.student_data.max_time_allowed",this.max_time_allowed?this.max_time_allowed:""),this._setLocalData("cmi.student_data.time_limit_action",this.time_limit_action?this.time_limit_action:""),this._setLocalData("cmi.core.credit",this.cmi_core_credit?this.cmi_core_credit:"credit"),this._setLocalData("cmi.core.lesson_mode",this.cmi_core_lesson_mode?this.cmi_core_lesson_mode:"normal")};var ScormBase2004=function(e){function t(e){switch(e){case"completed":case"incomplete":case"unknown":return!0;case"not attempted":return 1!=n}return!1}function r(e){return!("passed"!=e&&"failed"!=e&&"unknown"!=e)}var s="^\\w{1,255}$",a=function(){this._init()};for(i in e.prototype)a.prototype[i]=e.prototype[i];a.prototype.validDmes=["cmi.comments_from_lms","cmi.comments_from_learner","cmi.credit","cmi.entry","cmi.exit","cmi.location","cmi.mode","cmi.success_status","cmi.completion_status","cmi.score._children","cmi.score.max","cmi.score.min","cmi.score.raw","cmi.score.scaled","cmi.session_time","cmi.learner_id","cmi.learner_name","cmi.total_time","cmi.launch_data","cmi.learner_preference._children","cmi.learner_preference.mastery_score","cmi.learner_preference.max_time_allowed","cmi.learner_preference.time_limit_action","cmi.learner_preference._children","cmi.learner_preference.audio_level","cmi.learner_preference.language","cmi.learner_preference.delivery_speed","cmi.learner_preference.audio_captioning","cmi.suspend_data","adl.nav.request","cmi._version","cmi.progress_measure"],a.prototype.validWritables=["cmi.comments","cmi.exit","cmi.location","cmi.completion_status","cmi.success_status","cmi.score.max","cmi.score.min","cmi.score.raw","cmi.score.scaled","cmi.session_checkCMIString255","cmi.session_time","cmi.learner_preference.audio_level","cmi.learner_preference.language","cmi.learner_preference.delivery_speed","cmi.learner_preference.audio_captioning","cmi.suspend_data","adl.nav.request","cmi.progress_measure"],a.prototype.validReadables=["cmi.comments_from_lms","cmi.comments_from_learner","cmi._version","cmi.credit","cmi.entry","cmi.location","cmi.mode","cmi.completion_status","cmi.success_status","cmi.score._children","cmi.score.max","cmi.score.min","cmi.score.raw","cmi.score.scaled","cmi.learner_id","cmi.learner_name","cmi.total_time","cmi.launch_data","cmi.learner_preference._children","cmi.learner_preference.mastery_score","cmi.learner_preference.max_time_allowed","cmi.learner_preference.time_limit_action","cmi.learner_preference._children","cmi.learner_preference.audio_level","cmi.learner_preference.language","cmi.learner_preference.delivery_speed","cmi.learner_preference.audio_captioning","cmi.suspend_data","cmi.progress_measure"],a.prototype.errorCodeMap={0:"No error",101:"General Exception",102:"General Initialization Failure",103:"Already Initialized",104:"Content Instance Terminated",111:"General Termination Failure",112:"Termination Before Initialization",113:"Termination After Termination",122:"Retrieve Data Before Initialization",123:"Retrieve Data After Termination",132:"Store Data Before Initialization",133:"Store Data After Termination",142:"Commit Before Initialization",143:"Commit After Termination",201:"General Argument Error",301:"General Get Failure",351:"General Set Failure",391:"General Commit Failure",401:"Undefined Data Model Element",402:"Unimplemented Data Model Element",403:"Data Model Element Value Not Initialized",404:"Data Model Element Is Read Only",405:"Data Model Element Is Write Only",406:"Data Model Element Type Mismatch",407:"Data Model Element Value Out Of Range",408:"Data Model Dependency Not Established"},a.prototype.errorCodeLookupByType={NOT_READABLE:"404",NOT_WRITABLE:"405",INVALID_VALUE:"406"},a.prototype.terminate=function(e){var t,i,r=new StatementLogEntry("runtime");return ssla.events.lmsPreTerminate.dispatch(),t=this._terminate(e),ssla.events.lmsPostTerminate.dispatch(t),i=this._getLastError(),r.statement=vsprintf("Terminate(%S) returned %S.",[e,t]),r.stampTimeTaken(),"0"!==i&&(r.debugLevel="ERROR",r.addSubStatement(vsprintf("LMSGetLastError returned %S.",[i]))),this.statementLogger.addStatement(r),t},a.prototype._terminate=function(e){if(""!=e||null==e)return this._errorCode="201","false";if(this._isInitialized){switch(config.completeContentOnExit&&CMI_DBInstance.callSetValue("cmi.core.lesson_status","completed"),cmi_core_exit_value=CMI_DBInstance.callGetValue("cmi.exit"),debugWriter.writeToDebugWindow("cmi_core_exit_value = "+cmi_core_exit_value,"green"),cmi_core_exit_value){case"time-out":CMI_DBInstance.callSetValue("cmi.entry","");case"":CMI_DBInstance.callSetValue("cmi.entry","");break;case"logout":CMI_DBInstance.callSetValue("cmi.entry","");break;case"suspend":CMI_DBInstance.callSetValue("cmi.entry","resume")}return this._commit(""),this._isInitialized=!1,this._errorCode="0",config.setFinishToLMS&&ssla.storage.getStorageLayer().save(null,"finish","true"),2==config.scoLaunchType&&top.window.close(),"true"}return this._errorCode="301","false"},a.prototype.checkObjectives=function(e){return!!(endsWith(e,"._children")||endsWith(e,"._count")||endsWith(e,".id")||endsWith(e,".score._children")||endsWith(e,".score.max")||endsWith(e,".score.min")||endsWith(e,".score.raw")||endsWith(e,".score.scaled")||endsWith(e,".completion_status")||endsWith(e,".success_status")||endsWith(e,".description")||endsWith(e,".progress_measure"))},a.prototype.checkInteractions=function(e){if(endsWith(e,"._children")||endsWith(e,"._count")||endsWith(e,".id")||endsWith(e,".type")||endsWith(e,".timestamp")||endsWith(e,".correct_responses._count")||endsWith(e,".weighting")||endsWith(e,".learner_response")||endsWith(e,".result")||endsWith(e,".latency")||endsWith(e,".description"))return!0;if(e.indexOf("correct_responses")!=-1){if(e.indexOf(".pattern")!=-1)return!0}else e.indexOf("objectives")!=-1&&(e="objectives"+e.split(".objectives")[1],this.checkObjectives(e));return!1},a.prototype.checkValidValues=function(e,i){if(null==i)return!1;if("undefined"==typeof i)return!1;if(""!=i||null!=i){if(e.indexOf("cmi.objectives")!=-1&&(e.indexOf("_children")==-1||e.indexOf("_count")==-1)){if(e.indexOf("id")!=-1)return""==i?(this._errorCode="405",!1):(n=getValue("cmi.objectives._count"),aryEle=e.split("."),parseInt(aryEle[2])>n+1?(this._errorCode="201",!1):(s="^\\S{0,254}[a-zA-Z0-9]$",matchRegEx(s,i)));if(e.indexOf("score.max")!=-1)return this.checkRawMinMax(i);if(e.indexOf("score.min")!=-1)return this.checkRawMinMax(i);if(e.indexOf("score.raw")!=-1)return this.checkRawMinMax(i);if(e.indexOf("score.scaled")!=-1)return this.checkRawMinMax(i);if(e.indexOf("completion_status")!=-1)return t(i);if(e.indexOf("success_status")!=-1)return r(i);if(e.indexOf("description")!=-1)return!0;if(e.indexOf("progress_measure")!=-1)return!0}if(e.indexOf("cmi.interactions")!=-1)return n=this.checkInteractions(e),n;switch(e){case"cmi.completion_status":return t(i,1);case"cmi.success_status":return r(i,1);case"cmi.comments":return this.checkCMIString4096(i);case"cmi.exit":switch(i){case"time-out":return!0;case"suspend":return!0;case"logout":return!0;case"":return!0;default:return!1}break;case"cmi.location":return this.checkCMIString255(i);case"cmi.score.max":return this.checkRawMinMax(i);case"cmi.score.min":return this.checkRawMinMax(i);case"cmi.score.raw":return this.checkRawMinMax(i);case"cmi.score.scaled":return this.checkRawMinMax(i);case"cmi.progress_measure":return this.checkRawMinMax(i);case"cmi.session_time":var a=new RegExp(/^P(([0-9]+Y)?([0-9]+M)?([0-9]+D)?)?(T([0-9]+H)?([0-9]+M)?([0-9]+(\.[0-9]{1,2})?S)?)?$/);return!!a.test(i)&&i;case"cmi.learner_preference.audio_level":if(""==i)return this._errorCode="405",!1;if("string"!=typeof i||i.indexOf(".")!=-1||isNaN(i))return!1;var o=parseInt(i),c=1*o;return!isNaN(c)&&!(c<-1||c>100);case"cmi.learner_preference.language":
return this.checkCMIString255(i);case"cmi.learner_preference.delivery_speed":if(""==i)return this._errorCode="405",!1;if("string"!=typeof i||i.indexOf(".")!=-1||isNaN(i))return!1;var o=parseInt(i),c=1*o;return!isNaN(c)&&!(c<-100||c>100);case"cmi.learner_preference.audio_captioning":return""==i?(this._errorCode="405",!1):"string"==typeof i&&("-1"==i||"0"==i||"1"==i);case"cmi.suspend_data":return this.checkCMIString4096(i);case"adl.nav.request":return this.checkADLNavRequest(i)}}};var o=!0;return a.prototype._internalGetValue=function(e){var t=CMI_DBInstance.callGetValue(e);if(!t)switch(e){case"cmi.launch_data":t=data_from_lms;break;case"cmi.credit":t="credit";break;case"cmi.mode":t="normal";break;case"cmi.success_status":t="unknown";case"cmi.completion_status":t="not attempted";break;case"cmi.learner_name":break;case"cmi.learner_id":t=CMI_DBInstance.local_data["cmi.core.student_id"];break;case"cmi.suspend_data":t="";break;case"cmi.location":t="";break;case"cmi.total_time":t="PY0M0D0TH0M0S0";break;case"cmi.entry":t=o?"ab-initio":"resume";break;case"cmi.score.raw":t="";break;case"cmi.progress_measure":t="";break;case"cmi.score.min":t="";break;case"cmi.score.max":t="";break;case"cmi.score.scaled":t="";break;case"cmi.comments_from_learner":t="";break;case"cmi.comments_from_lms":t="No comment";break;case"cmi.objectives._count":t="0";break;case"cmi._version":t="1.0";break;case"cmi.learner_preference.mastery_score":t=CMI_DBInstance.local_data["cmi.student_data.mastery_score"];break;case"cmi.learner_preference.max_time_allowed":t=CMI_DBInstance.local_data["cmi.student_data.max_time_allowed"];break;case"cmi.learner_preference.time_limit_action":t=CMI_DBInstance.local_data["cmi.student_data.time_limit_action"];break;case"cmi.learner_preference.audio_level":o&&(t="");break;case"cmi.learner_preference.language":o&&(t="");break;case"cmi.learner_preference.delivery_speed":o&&(t="");break;case"cmi.learner_preference.audio_captioning":o&&(t="")}return t},a.prototype._internalSetValue=function(e,t){var i=CMI_DBInstance.callSetValue(e,t);if("undefined"==typeof i)i="false";else try{config.saveDataOnSetValue&&this.saveData()}catch(e){}return"cmi.completion_status"!=e&&"cmi.success_status"!=e||createTableOfContentsInstance&&createTableOfContentsInstance.setCompletionStatus(oScormData.strActivityId,t),i},a.prototype.checkADLNavRequest=function(e){return!0},a};CMI_DB_2004.prototype.callSetValue=function(e,i){var r="NO_DATA_REPORTED",n=0;switch(e){case"cmi.session_time":total_time=this._getLocalData("cmi.total_time"),"undefined"==typeof total_time&&(total_time="0000:00:00"),t=this.addTimes(total_time,i),r=this._setLocalData("cmi.total_time",t+"")}return e.indexOf("cmi.objectives.")!=-1?e.indexOf(".id")!=-1&&(r=this.local_data[e],"undefined"==typeof r&&(n=parseInt(this.local_data["cmi.objectives._count"]),isNaN(n)&&(n=0),n++,r=this._setLocalData("cmi.objectives._count",n+""),this.local_data["cmi.objectives._count"]=n)):e.indexOf("cmi.interactions.")!=-1&&(e.indexOf("type")!=-1&&(arrInteractionTypes[e]=i),e.indexOf(".objectives")!=-1?e.indexOf(".id")!=-1&&(r=this.local_data[e],"undefined"==typeof r&&(index=e.split(".")[2],n=parseInt(this.local_data["cmi.interactions."+index+".objectives._count"]),isNaN(n)&&(n=0),n++,r=this._setLocalData("cmi.interactions."+index+".objectives._count",n+""),this.local_data["cmi.interactions."+index+".objectives._count"]=n)):e.indexOf(".id")!=-1?(r=this.local_data[e],"undefined"==typeof r&&(n=parseInt(this.local_data["cmi.interactions._count"]),isNaN(n)&&(n=0),n++,r=this._setLocalData("cmi.interactions._count",n+""),this.local_data["cmi.interactions._count"]=n)):e.indexOf(".correct_responses")!=-1&&e.indexOf(".pattern")!=-1&&(r=this.local_data[e],"undefined"==typeof r&&(index=e.split(".")[2],n=parseInt(this.local_data["cmi.interactions."+index+".correct_responses._count"]),isNaN(n)&&(n=0),n++,r=this._setLocalData("cmi.interactions."+index+".correct_responses._count",n+""),this.local_data["cmi.interactions."+index+".correct_responses._count"]=n))),r=this._setLocalData(e,i)},CMI_DB_2004.prototype.callGetValue=function(e){return v=this._getLocalData(e),e.indexOf("._count")&&"undefined"==typeof v&&(v="0"),v},CMI_DB_2004.prototype.callCommit=function(){return this.toDB()},CMI_DB_2004.prototype.toDB=function(){return debugWriter.writeToDebugWindow("CMI_DB_2004.prototype.toDB() "+JSON.stringify(this.local_data),"blue"),JSON.stringify(this.local_data)},CMI_DB_2004.prototype.callRestore=function(e){"undefined"==typeof e||!e||isEmptyObject(e)?(debugWriter.writeToDebugWindow("CMI_DB_2004.prototype.callRestore nothing to restore; set up the string with all the default values","blue"),this.local_data["cmi.completion_status"]="unknown",this.local_data["cmi.success_status"]="unknown",this.local_data["cmi.suspend_data"]="",this.local_data["cmi.location"]="",this.local_data["cmi.total_time"]="PTH0M0S0",this.local_data["cmi.entry"]="ab-initio",this.local_data["cmi.score.raw"]="",this.local_data["cmi.score.min"]="",this.local_data["cmi.score.max"]="",this.local_data["cmi.score.scaled"]="",this.local_data["cmi.comments_from_learner"]="",this.local_data["cmi.comments_from_lms"]="No comment",this.local_data["cmi.objectives._count"]="0",this.local_data["cmi.interactions._count"]="0",this.local_data["cmi.learner_preference.audio_level"]="1",this.local_data["cmi.learner_preference.language"]="",this.local_data["cmi.learner_preference.delivery_speed"]="1",this.local_data["cmi.learner_preference.audio_captioning"]="0"):(debugWriter.writeToDebugWindow("CMI_DB_2004.prototype.callRestore "+this.local_data,"blue"),this.local_data=e),this._setLocalData("cmi.learner_name",this.student_name?this.student_name:""),this._setLocalData("cmi.learner_id",this.student_number&&""!=this.student_number?this.student_number:"001DEFAULTSTUDENT"),this._setLocalData("cmi.launch_data",this.data_from_lms?this.data_from_lms:""),this._setLocalData("cmi.learner_preference.mastery_score",this.mastery_score?this.mastery_score:""),this._setLocalData("cmi.learner_preference.max_time_allowed",this.max_time_allowed?this.max_time_allowed:""),this._setLocalData("cmi.learner_preference.time_limit_action",this.time_limit_action?this.time_limit_action:""),this._setLocalData("cmi.credit",this.cmi_core_credit?this.cmi_core_credit:""),this._setLocalData("cmi.mode",this.cmi_core_lesson_mode?this.cmi_core_lesson_mode:"")};
//# sourceMappingURL=scorm12_2004-api.min.js.map