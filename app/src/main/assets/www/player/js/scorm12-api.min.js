function CreateTableOfContents(){this.strIdRef="",this.strId="",this.parseXMLToObjectInstance={},this.objXmlData={},this.strCurrentActivityId="",this.aryCompletionStatus={},this.schemaversion="",this.data={},this.blnShowIndent=config.tocDisplayType,this.totalNumOfSCOs=0,this.menuInstance=new Menu,this.activityId=""}function traverse(a,b){var c;for(var d in a)if(a.hasOwnProperty(d)){if(d==b)return a[d];if("object"==typeof a[d]&&(c=traverse(a[d],b),null!==c))return c}return null}function DebugWriter(a,b){this.aryDebugText=new Array,this.aryDebugType=new Array,this.objWin=new Object,this.strDebugDivName="_debug_window",this.strDebugToolbarDivName="_debug_window_toolbar";new Object;this.status=a,this.presentation=b,this.createDebugWindow(this.presentation)}function StatementLogger(a,b){this.courseId=a,this.studentId=b,this.uuid=generateUUID(),this.statements=[],this.listeners=[]}function StatementLogEntry(a){this.when=new Date,this.statement="",this.displayWhen=null,this.timeTaken=0,this.statementType=a,this.subStatements=[],this.debugLevel="INFO"}function Utils(){this.currentCourseDetails={}}function generateUUID(){var a=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"==b?c:7&c|8).toString(16)})}function isEmptyObject(a){var b;for(b in a)return!1;return!0}function matchRegEx(a,b){b+="";var c=new RegExp(a);return!!b.match(c)}function endsWith(a,b){return-1!==a.indexOf(b,a.length-b.length)}function getCourseId(){return objVars.courseId}function getCourseDirectory(){return config.courseBaseHtmlPath+objVars.courseDirectory}function getStudentId(){return config.getStudentIdOverrideFn?config.getStudentIdOverrideFn():objVars.studentId}function getStudentName(){return config.getStudentNameOverrideFn?config.getStudentNameOverrideFn():objVars.studentName}function prepareFrames(){var a=document.getElementById("frame-here");a.innerHTML='<iframe name="jca_course_player" id="jca_course_player" frameborder="0" width="100%" height="100%" src="blank.htm"></iframe>',setupInterface(),setupInterfaceNav()}function returnFromAjaxTocData(a){a&&createTableOfContentsInstance.setTOCCache(a)}function setupInterface(){createTableOfContentsInstance=new CreateTableOfContents,createTableOfContentsInstance.initTraverse(activeCourse,setupInterface2)}function setupInterface2(a){var b,c,d;ssla.storage.getStorageLayer().load(null,config.tocDataObjectName),config.showCourseCompletionStatus||(document.getElementById("course_completion_status_div").style.display="none"),config.showCourseSuccessStatus||(document.getElementById("course_success_status_div").style.display="none"),config.showCourseGrade||(document.getElementById("course_grade_div").style.display="none"),b=document.getElementById("credit-"+String(objVars.credit)),b&&(b.checked=!0),c=document.getElementById("mode-"+String(objVars.mode)),c&&(c.checked=!0),loadTOC(a),1==config.autoLaunchFirstSCO&&(d=createTableOfContentsInstance.menuInstance.getFirstLeafActivity(),gotoSco(d.resourceId,d.itemId))}function loadTOC(a){document.getElementById("toc").innerHTML=a}function getTocInstance(){return createTableOfContentsInstance}function toggleTOC(){var a=document.getElementById("toggle_menu");switch(currMenuState){case"hide":document.body.className="hide-toc",currMenuState="show",a&&(a.innerHTML="Show Menu");break;case"show":document.body.className="",currMenuState="hide",a&&(a.innerHTML="Hide Menu")}}function navigate(n){var strCurrActivityId=getTocInstance().getCurrentActivityId(),strIndex=getTocInstance().menuInstance.getMenuItemIndex("itemId",strCurrActivityId),strOp,intNewIndex,objMenu,i;switch(n){case"previous":strOp="-";break;case"next":strOp="+";break;case"exit":return endCurrentActivity(),window.location.href="blank_unloading.htm",void window.close()}for(i=1;10>i;i++){intNewIndex=eval("parseInt("+strIndex+")"+strOp+i),objMenu=createTableOfContentsInstance.menuInstance.getMenuItemByIndex(intNewIndex);try{if(""!=objMenu.resourceId)break}catch(e){}}try{gotoSco(objMenu.resourceId,objMenu.itemId)}catch(e){var r=confirm("Would you like to close this course and return to the LMS main menu?");r&&top.window.close()}}function endCurrentActivity(){API?(API.LMSCommit(""),API.LMSFinish("")):API_1484_11&&(API_1484_11.Commit(""),API_1484_11.Terminate(""))}function gotoSco(a,b){endCurrentActivity(),jca_course_player.document.location.replace("blank.htm");var c=setInterval(function(){0==globalActiveSaveCounter&&(createTableOfContentsInstance.lookupHrefByRef(a,b),clearInterval(c))},100)}function setupInterfaceNav(){config.showSCOtoSCONavigation||(document.getElementById("sco_navigation").style.visibility="hidden"),config.hideTOC&&toggleTOC(),config.showStatementLogPopupLink&&(document.getElementById("show_statement_log_holder").style.visibility="visible"),document.getElementById("prev").innerHTML=config.previousActivityText,document.getElementById("next").innerHTML=config.nextActivityText}function showStatementLog(){utils.openPage("statementLog.htm","popup","statementLog")}function initScorm12Player(a){qsObject=a,debugWriter.showDebugWindow(),API=getScorm12Api(),doLoadPage(CMI_DB_12)}function initScorm2004Player(a){qsObject=a,debugWriter.showDebugWindow(),API_1484_11=getScorm2004Api(),doLoadPage(CMI_DB_2004)}function myTrim(a){return a.replace(/^\s+|\s+$/gm,"")}function parseStudentName(a){var b="",c="",d=[];if(-1!=a.indexOf(","))return d=a.split(","),a=myTrim(d[0])+", "+myTrim(d[1]);if(-1!=a.indexOf(" ")){for(d=a.split(" "),i=0;i<d.length;i++)0==i?b=myTrim(d[i]):i>0&&(c+=myTrim(d[i]));return a=c+", "+b}return a}function doLoadPage(a){debugWriter.writeToDebugWindow("doLoadPage :: Loading page data...."),stuName=getStudentName(),stuNumber=getStudentId(),data_from_lms=qsObject.data_from_lms,mastery_score=qsObject.mastery_score,max_time_allowed=qsObject.max_time_allowed,time_limit_action=qsObject.time_limit_action,cmi_core_credit=qsObject.cmi_core_credit,cmi_core_lesson_mode=qsObject.cmi_core_lesson_mode,path=utils.jcaDecodePath(qsObject.path),CMI_DBInstance=new a(stuName,stuNumber,data_from_lms,mastery_score,max_time_allowed,time_limit_action,cmi_core_credit,cmi_core_lesson_mode),debugWriter.writeToDebugWindow("doLoadPage :: Loading Complete !"),loadCourse(stuNumber,qsObject.act_id,qsObject.sco_id,path)}function processRollup(){}function loadCourse(a,b,c,d){debugWriter.writeToDebugWindow("in loadcourse()"),strCookieName=a+"_"+c,debugWriter.writeToDebugWindow("in loadcourse() strCookieName = "+strCookieName),oScormData.coursePath=d,debugWriter.writeToDebugWindow("in loadcourse() oScormData.coursePath = "+oScormData.coursePath),oScormData.strStudentId=a,debugWriter.writeToDebugWindow("in loadcourse() oScormData.strStudentId = "+oScormData.strStudentId),oScormData.strSCOId=c,debugWriter.writeToDebugWindow("in loadcourse() oScormData.strSCOId = "+oScormData.strSCOId),oScormData.strActivityId=b,v=ssla.storage.getStorageLayer().load(null,strCookieName),debugWriter.writeToDebugWindow("in loadCourse GetCookie() returned value = "+v)}function tryPopup(a){return utils.openPage(a,"popup","sco_win",popupSettings)}function popupManually(){var a=tryPopup(oScormData.coursePath);return updateUserText(),a}function updateCenterContent(a){var b=setInterval(function(){try{jca_course_player.document.getElementById("content").innerHTML=a,clearInterval(b)}catch(c){}},10)}function updateUserText(){updateCenterContent("Your course has been opened in a popup.  When you have completed your course, please press exit or close this window.")}function returnFromAjaxScorm12Course(a){var b,c;if(debugWriter.writeToDebugWindow("in returnFromAjax() v = "+a),oScormData.data=a,debugWriter.writeToDebugWindow("in returnFromAjax() oScormData.coursePath = "+oScormData.coursePath),2==config.scoLaunchType){if(0==config.newWindowSettings.length)c=tryPopup(oScormData.coursePath);else{for(popupSettings="",b=0;b<config.newWindowSettings.length;b++)popupSettings+=config.newWindowSettings[b]+",";c=tryPopup(oScormData.coursePath)}c?updateUserText():updateCenterContent('Your course window did not pop open correctly.<br>  <a onclick="parent.popupManually()" href="#">Click here to open the course.</a>')}else jca_course_player.document.location.replace(oScormData.coursePath)}function wrapUp(){endCurrentActivity()}function CMI_DB_12(a,b,c,d,e,f,g,h){this.student_name=a,this.student_number=b,this.data_from_lms=c,this.mastery_score=d,this.max_time_allowed=e,this.time_limit_action=f,this.cmi_core_credit=g,this.cmi_core_lesson_mode=h,this.local_data={},this._setLocalData=function(a,b){try{return this.local_data[a]=b,debugWriter.writeToDebugWindow("_setLocalData "+a+"="+b,"blue"),"true"}catch(c){return debugWriter.writeToDebugWindow("ERROR: _setLocalData "+c.description,"red"),"false"}},this._getLocalData=function(a){var b;try{b=this.local_data[a]}catch(c){debugWriter.writeToDebugWindow("ERROR: _getLocalData "+c.description,"red"),b=""}return b},this.addTimes=function(a,b){var c=this.parseTime(a),d=this.parseTime(b),e=new Date,f=new Date(e.getYear(),e.getMonth(),e.getDay(),c[0],c[1],c[2],c[3]),g=new Date(e.getYear(),e.getMonth(),e.getDay(),d[0],d[1],d[2],d[3]),h=g.getHours(),i=g.getMinutes(),j=g.getSeconds(),k=this.getMilliseconds(b),l=h+f.getHours(),m=i+f.getMinutes(),n=j+f.getSeconds(),o=k+this.getMilliseconds(a);return o>=100&&(o=-(100-o),n++),n>=60&&(n=-(60-n),m++),m>=60&&(m=-(60-m),l++),l>=24&&(l=-(24-l)),9>=n&&(n="0"+n),9>=m&&(m="0"+m),9>=l&&(l="0"+l),l+":"+m+":"+n+"."+o},this.getMilliseconds=function(a){var b=a+"",c=0;return-1!=b.indexOf(".")&&(c=parseInt(b.split(".")[1])),c},this.parseTime=function(a){var b=[0,0,0,0];if(""==a||"undefined"==typeof a)return b;var c=a.split(":");if(b[0]=parseInt(c[0]),b[1]=parseInt(c[1]),-1!=c[2].indexOf(".")){var d=c[2].split(".");2==d.length&&(b[2]=parseInt(d[0]),b[3]=1==d[1].length?10*parseInt(d[1]):parseInt(d[1]))}else b[2]=parseInt(c[2]);return b}}function getScorm12Api(){var a=ScormBase12(new ScormBase),b=new a,c=function(a){return{LMSInitialize:function(b){return a.initialize(b)},LMSFinish:function(b){return a.finish(b)},LMSCommit:function(b){return a.commit(b)},LMSGetValue:function(b){return a.getValue(b)},LMSSetValue:function(b,c){return a.setValue(b,c)},LMSGetLastError:function(){return a.getLastError()},LMSGetErrorString:function(b){return a.getErrorString(b)},LMSGetDiagnostic:function(b){return a.getDiagnostic(b)}}}(b);return c}this.JSON||(this.JSON={}),function(){function f(a){return 10>a?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;f>c;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)d=rep[c],"string"==typeof d&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),"undefined"==typeof ParseXMLToObject&&(ParseXMLToObject=function(){}),ParseXMLToObject.ParseXML=function(a,b,c){return this.http=new ParseXMLToObject.ParseXML.HTTP(a,b,c,!1),this},ParseXMLToObject.ParseXML.VERSION="0.22",ParseXMLToObject.ParseXML.MIME_TYPE_XML="text/xml",ParseXMLToObject.ParseXML.MAP_NODETYPE=["","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE"],ParseXMLToObject.ParseXML.prototype.async=function(a,b){this.callback_func=a,this.callback_arg=b},ParseXMLToObject.ParseXML.prototype.onerror=function(a){this.onerror_func=a},ParseXMLToObject.ParseXML.prototype.parse=function(){if(this.http){if(this.onerror_func&&this.http.onerror(this.onerror_func),this.callback_func){var a=this,b=function(){if(a.http){var b=a.parseResponse();a.callback_func(b,a.callback_arg)}};this.http.async(b)}if(this.http.load(),!this.callback_func){var c=this.parseResponse();return c}}},ParseXMLToObject.ParseXML.prototype.setOutputArrayAll=function(){this.setOutputArray(!0)},ParseXMLToObject.ParseXML.prototype.setOutputArrayAuto=function(){this.setOutputArray(null)},ParseXMLToObject.ParseXML.prototype.setOutputArrayNever=function(){this.setOutputArray(!1)},ParseXMLToObject.ParseXML.prototype.setOutputArrayElements=function(a){this.setOutputArray(a)},ParseXMLToObject.ParseXML.prototype.setOutputArray=function(a){if("string"==typeof a&&(a=[a]),a&&"object"==typeof a)if(a.length<0)a=!1;else{for(var b={},c=0;c<a.length;c++)b[a[c]]=!0;a=b,a["*"]&&(a=!0)}this.usearray=a},ParseXMLToObject.ParseXML.prototype.parseResponse=function(){var a=this.http.documentElement(),b=this.parseDocument(a);return b},ParseXMLToObject.ParseXML.prototype.parseDocument=function(a){if(a){var b=this.parseElement(a);1==this.usearray?b=[b]:0==this.usearray||null==this.usearray||this.usearray[a.nodeName]&&(b=[b]);var c={};return c[a.nodeName]=b,c}},ParseXMLToObject.ParseXML.prototype.parseElement=function(a){if(7!=a.nodeType){if(3==a.nodeType||4==a.nodeType){var b=a.nodeValue.match(/[^\x00-\x20]/);if(null==b)return;return a.nodeValue}var c,d={};if(a.attributes&&a.attributes.length){c={};for(var e=0;e<a.attributes.length;e++){var f=a.attributes[e].nodeName;if("string"==typeof f){var g=a.attributes[e].nodeValue;g&&("undefined"==typeof d[f]&&(d[f]=0),d[f]++,this.addNode(c,f,d[f],g))}}}if(a.childNodes&&a.childNodes.length){var h=!0;c&&(h=!1);for(var e=0;e<a.childNodes.length&&h;e++){var i=a.childNodes[e].nodeType;3!=i&&4!=i&&(h=!1)}if(h){c||(c="");for(var e=0;e<a.childNodes.length;e++)c+=a.childNodes[e].nodeValue}else{c||(c={});for(var e=0;e<a.childNodes.length;e++){var f=a.childNodes[e].nodeName;if("string"==typeof f){var g=this.parseElement(a.childNodes[e]);g&&("undefined"==typeof d[f]&&(d[f]=0),d[f]++,this.addNode(c,f,d[f],g))}}}}return c}},ParseXMLToObject.ParseXML.prototype.addNode=function(a,b,c,d){1==this.usearray?(1==c&&(a[b]=[]),a[b][a[b].length]=d):0==this.usearray?1==c&&(a[b]=d):null==this.usearray?1==c?a[b]=d:2==c?a[b]=[a[b],d]:a[b][a[b].length]=d:this.usearray[b]?(1==c&&(a[b]=[]),a[b][a[b].length]=d):1==c&&(a[b]=d)},ParseXMLToObject.ParseXML.HTTP=function(a,b,c,d){return this.url=a,this.query="string"==typeof b?b:"",this.method=c?c:"string"==typeof b?"POST":"GET",this.textmode=d?!0:!1,this.req=null,this.xmldom_flag=!1,this.onerror_func=null,this.callback_func=null,this.already_done=null,this},ParseXMLToObject.ParseXML.HTTP.REQUEST_TYPE="application/x-www-form-urlencoded",ParseXMLToObject.ParseXML.HTTP.ACTIVEX_XMLDOM="Microsoft.XMLDOM",ParseXMLToObject.ParseXML.HTTP.ACTIVEX_XMLHTTP="Microsoft.XMLHTTP",ParseXMLToObject.ParseXML.HTTP.EPOCH_TIMESTAMP="Thu, 01 Jun 1970 00:00:00 GMT",ParseXMLToObject.ParseXML.HTTP.prototype.onerror=ParseXMLToObject.ParseXML.prototype.onerror,ParseXMLToObject.ParseXML.HTTP.prototype.async=function(a){this.async_func=a},ParseXMLToObject.ParseXML.HTTP.prototype.load=function(){if(window.ActiveXObject){var a=ParseXMLToObject.ParseXML.HTTP.ACTIVEX_XMLHTTP;"GET"!=this.method||this.textmode||(a=ParseXMLToObject.ParseXML.HTTP.ACTIVEX_XMLDOM),this.req=new ActiveXObject(a)}else window.XMLHttpRequest&&(this.req=new XMLHttpRequest);var b=this.async_func?!0:!1;if("undefined"!=typeof this.req.send&&this.req.open(this.method,this.url,b),"undefined"!=typeof this.req.setRequestHeader&&this.req.setRequestHeader("Content-Type",ParseXMLToObject.ParseXML.HTTP.REQUEST_TYPE),"undefined"==typeof this.req.overrideMimeType||this.textmode||this.req.overrideMimeType(ParseXMLToObject.ParseXML.MIME_TYPE_XML),b){var c=this;c.already_done=!1;var d=function(){if(4==c.req.readyState){var a=c.checkResponse();a&&(c.already_done||(c.already_done=!0,c.async_func()))}};this.req.onreadystatechange=d}if("undefined"!=typeof this.req.send?this.req.send(this.query):"undefined"!=typeof this.req.load&&(this.req.async=b,this.req.load(this.url)),!b){this.checkResponse()}},ParseXMLToObject.ParseXML.HTTP.prototype.checkResponse=function(){return this.req.parseError&&0!=this.req.parseError.errorCode?(this.onerror_func&&this.onerror_func(this.req.parseError.reason),!1):this.req.status-0>0&&200!=this.req.status&&206!=this.req.status&&304!=this.req.status?(this.onerror_func&&this.onerror_func(this.req.status),!1):!0},ParseXMLToObject.ParseXML.HTTP.prototype.documentElement=function(){return this.req?this.req.responseXML?this.req.responseXML.documentElement:this.req.documentElement:void 0},ParseXMLToObject.ParseXML.HTTP.prototype.responseText=function(){if(this.req){if(navigator.appVersion.match("KHTML")){var a=escape(this.req.responseText);if(!a.match("%u")&&a.match("%"))return decodeURIComponent(a)}return this.req.responseText}},!function(a,b,c){"undefined"!=typeof module&&module.exports?module.exports=c():"function"==typeof define&&define.amd?define(c):b[a]=c()}("reqwest",this,function(){function succeed(a){var b=protocolRe.exec(a.url);return b=b&&b[1]||context.location.protocol,httpsRe.test(b)?twoHundo.test(a.request.status):!!a.request.response}function handleReadyState(a,b,c){return function(){return a._aborted?c(a.request):a._timedOut?c(a.request,"Request is aborted: timeout"):void(a.request&&4==a.request[readyState]&&(a.request.onreadystatechange=noop,succeed(a)?b(a.request):c(a.request)))}}function setHeaders(a,b){var c,d=b.headers||{};d.Accept=d.Accept||defaultHeaders.accept[b.type]||defaultHeaders.accept["*"];var e="function"==typeof FormData&&b.data instanceof FormData;!b.crossOrigin&&!d[requestedWith]&&(d[requestedWith]=defaultHeaders.requestedWith),!d[contentType]&&!e&&(d[contentType]=b.contentType||defaultHeaders.contentType);for(c in d)d.hasOwnProperty(c)&&"setRequestHeader"in a&&a.setRequestHeader(c,d[c])}function setCredentials(a,b){"undefined"!=typeof b.withCredentials&&"undefined"!=typeof a.withCredentials&&(a.withCredentials=!!b.withCredentials)}function generalCallback(a){lastValue=a}function urlappend(a,b){return a+(/\?/.test(a)?"&":"?")+b}function handleJsonp(a,b,c,d){var e=uniqid++,f=a.jsonpCallback||"callback",g=a.jsonpCallbackName||reqwest.getcallbackPrefix(e),h=new RegExp("((^|\\?|&)"+f+")=([^&]+)"),i=d.match(h),j=doc.createElement("script"),k=0,l=-1!==navigator.userAgent.indexOf("MSIE 10.0");return i?"?"===i[3]?d=d.replace(h,"$1="+g):g=i[3]:d=urlappend(d,f+"="+g),context[g]=generalCallback,j.type="text/javascript",j.src=d,j.async=!0,"undefined"!=typeof j.onreadystatechange&&!l&&(j.htmlFor=j.id="_reqwest_"+e),j.onload=j.onreadystatechange=function(){return j[readyState]&&"complete"!==j[readyState]&&"loaded"!==j[readyState]||k?!1:(j.onload=j.onreadystatechange=null,j.onclick&&j.onclick(),b(lastValue),lastValue=void 0,head.removeChild(j),k=1,void 0)},head.appendChild(j),{abort:function(){j.onload=j.onreadystatechange=null,c({},"Request is aborted: timeout",{}),lastValue=void 0,head.removeChild(j),k=1}}}function getRequest(a,b){var c,d=this.o,e=(d.method||"GET").toUpperCase(),f="string"==typeof d?d:d.url,g=d.processData!==!1&&d.data&&"string"!=typeof d.data?reqwest.toQueryString(d.data):d.data||null,h=!1;return("jsonp"==d.type||"GET"==e)&&g&&(f=urlappend(f,g),g=null),"jsonp"==d.type?handleJsonp(d,a,b,f):(c=d.xhr&&d.xhr(d)||xhr(d),c.open(e,f,d.async===!1?!1:!0),setHeaders(c,d),setCredentials(c,d),context[xDomainRequest]&&c instanceof context[xDomainRequest]?(c.onload=a,c.onerror=b,c.onprogress=function(){},h=!0):c.onreadystatechange=handleReadyState(this,a,b),d.before&&d.before(c),h?setTimeout(function(){c.send(g)},200):c.send(g),c)}function Reqwest(a,b){this.o=a,this.fn=b,init.apply(this,arguments)}function setType(a){return a.match("json")?"json":a.match("javascript")?"js":a.match("text")?"html":a.match("xml")?"xml":void 0}function init(o,fn){function complete(a){for(o.timeout&&clearTimeout(self.timeout),self.timeout=null;self._completeHandlers.length>0;)self._completeHandlers.shift()(a)}function success(resp){var type=o.type||resp&&setType(resp.getResponseHeader("Content-Type"));resp="jsonp"!==type?self.request:resp;var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse;try{resp.responseText=r}catch(e){}if(r)switch(type){case"json":try{resp=context.JSON?context.JSON.parse(r):eval("("+r+")")}catch(err){return error(resp,"Could not parse JSON in response",err)}break;case"js":resp=eval(r);break;case"html":resp=r;break;case"xml":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML}for(self._responseArgs.resp=resp,self._fulfilled=!0,fn(resp),self._successHandler(resp);self._fulfillmentHandlers.length>0;)resp=self._fulfillmentHandlers.shift()(resp);complete(resp)}function timedOut(){self._timedOut=!0,self.request.abort()}function error(a,b,c){for(a=self.request,self._responseArgs.resp=a,self._responseArgs.msg=b,self._responseArgs.t=c,self._erred=!0;self._errorHandlers.length>0;)self._errorHandlers.shift()(a,b,c);complete(a)}this.url="string"==typeof o?o:o.url,this.timeout=null,this._fulfilled=!1,this._successHandler=function(){},this._fulfillmentHandlers=[],this._errorHandlers=[],this._completeHandlers=[],this._erred=!1,this._responseArgs={};var self=this;fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){timedOut()},o.timeout)),o.success&&(this._successHandler=function(){o.success.apply(o,arguments)}),o.error&&this._errorHandlers.push(function(){o.error.apply(o,arguments)}),o.complete&&this._completeHandlers.push(function(){o.complete.apply(o,arguments)}),this.request=getRequest.call(this,success,error)}function reqwest(a,b){return new Reqwest(a,b)}function normalize(a){return a?a.replace(/\r?\n/g,"\r\n"):""}function serial(a,b){var c,d,e,f,g=a.name,h=a.tagName.toLowerCase(),i=function(a){a&&!a.disabled&&b(g,normalize(a.attributes.value&&a.attributes.value.specified?a.value:a.text))};if(!a.disabled&&g)switch(h){case"input":/reset|button|image|file/i.test(a.type)||(c=/checkbox/i.test(a.type),d=/radio/i.test(a.type),e=a.value,(!c&&!d||a.checked)&&b(g,normalize(c&&""===e?"on":e)));break;case"textarea":b(g,normalize(a.value));break;case"select":if("select-one"===a.type.toLowerCase())i(a.selectedIndex>=0?a.options[a.selectedIndex]:null);else for(f=0;a.length&&f<a.length;f++)a.options[f].selected&&i(a.options[f])}}function eachFormElement(){var a,b,c=this,d=function(a,b){var d,e,f;for(d=0;d<b.length;d++)for(f=a[byTag](b[d]),e=0;e<f.length;e++)serial(f[e],c)};for(b=0;b<arguments.length;b++)a=arguments[b],/input|select|textarea/i.test(a.tagName)&&serial(a,c),d(a,["input","select","textarea"])}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var a={};return eachFormElement.apply(function(b,c){b in a?(a[b]&&!isArray(a[b])&&(a[b]=[a[b]]),a[b].push(c)):a[b]=c},arguments),a}function buildParams(a,b,c,d){var e,f,g,h=/\[\]$/;if(isArray(b))for(f=0;b&&f<b.length;f++)g=b[f],c||h.test(a)?d(a,g):buildParams(a+"["+("object"==typeof g?f:"")+"]",g,c,d);else if(b&&"[object Object]"===b.toString())for(e in b)buildParams(a+"["+e+"]",b[e],c,d);else d(a,b)}var context=this;if("window"in context)var doc=document,byTag="getElementsByTagName",head=doc[byTag]("head")[0];else{var XHR2;try{XHR2=require("xhr2")}catch(ex){throw new Error("Peer dependency `xhr2` required! Please npm install xhr2")}}var httpsRe=/^http/,protocolRe=/(^\w+):\/\//,twoHundo=/^(20\d|1223)$/,readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",uniqid=0,callbackPrefix="reqwest_"+ +new Date,lastValue,xmlHttpRequest="XMLHttpRequest",xDomainRequest="XDomainRequest",noop=function(){},isArray="function"==typeof Array.isArray?Array.isArray:function(a){return a instanceof Array},defaultHeaders={contentType:"application/x-www-form-urlencoded",requestedWith:xmlHttpRequest,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},xhr=function(a){if(a.crossOrigin===!0){var b=context[xmlHttpRequest]?new XMLHttpRequest:null;if(b&&"withCredentials"in b)return b;if(context[xDomainRequest])return new XDomainRequest;throw new Error("Browser does not support cross-origin requests")}return context[xmlHttpRequest]?new XMLHttpRequest:XHR2?new XHR2:new ActiveXObject("Microsoft.XMLHTTP")},globalSetupOptions={dataFilter:function(a){return a}};return Reqwest.prototype={abort:function(){this._aborted=!0,this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(a,b){return a=a||function(){},b=b||function(){},this._fulfilled?this._responseArgs.resp=a(this._responseArgs.resp):this._erred?b(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(a),this._errorHandlers.push(b)),this},always:function(a){return this._fulfilled||this._erred?a(this._responseArgs.resp):this._completeHandlers.push(a),this},fail:function(a){return this._erred?a(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(a),this},"catch":function(a){return this.fail(a)}},reqwest.serializeArray=function(){var a=[];return eachFormElement.apply(function(b,c){a.push({name:b,value:c})},arguments),a},reqwest.serialize=function(){if(0===arguments.length)return"";var a,b,c=Array.prototype.slice.call(arguments,0);return a=c.pop(),a&&a.nodeType&&c.push(a)&&(a=null),a&&(a=a.type),b="map"==a?serializeHash:"array"==a?reqwest.serializeArray:serializeQueryString,b.apply(null,c)},reqwest.toQueryString=function(a,b){var c,d,e=b||!1,f=[],g=encodeURIComponent,h=function(a,b){b="function"==typeof b?b():null==b?"":b,f[f.length]=g(a)+"="+g(b)};if(isArray(a))for(d=0;a&&d<a.length;d++)h(a[d].name,a[d].value);else for(c in a)a.hasOwnProperty(c)&&buildParams(c,a[c],e,h);return f.join("&").replace(/%20/g,"+")},reqwest.getcallbackPrefix=function(){return callbackPrefix},reqwest.compat=function(a,b){return a&&(a.type&&(a.method=a.type)&&delete a.type,a.dataType&&(a.type=a.dataType),a.jsonpCallback&&(a.jsonpCallbackName=a.jsonpCallback)&&delete a.jsonpCallback,a.jsonp&&(a.jsonpCallback=a.jsonp)),new Reqwest(a,b)},reqwest.ajaxSetup=function(a){a=a||{};for(var b in a)globalSetupOptions[b]=a[b]},reqwest}),function(a){function b(a,b,c,d,e){this._listener=b,this._isOnce=c,this.context=d,this._signal=a,this._priority=e||0}function c(a,b){if("function"!=typeof a)throw Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",b))}function d(){this._bindings=[],this._prevParams=null;var a=this;this.dispatch=function(){d.prototype.dispatch.apply(a,arguments)}}b.prototype={active:!0,params:null,execute:function(a){var b;return this.active&&this._listener&&(a=this.params?this.params.concat(a):a,b=this._listener.apply(this.context,a),this._isOnce&&this.detach()),b},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},d.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(a,c,d,e){var f=this._indexOfListener(a,d);if(-1!==f){if(a=this._bindings[f],a.isOnce()!==c)throw Error("You cannot add"+(c?"":"Once")+"() then add"+(c?"Once":"")+"() the same listener without removing the relationship first.")}else a=new b(this,a,c,d,e),this._addBinding(a);return this.memorize&&this._prevParams&&a.execute(this._prevParams),a},_addBinding:function(a){var b=this._bindings.length;do--b;while(this._bindings[b]&&a._priority<=this._bindings[b]._priority);this._bindings.splice(b+1,0,a)},_indexOfListener:function(a,b){for(var c,d=this._bindings.length;d--;)if(c=this._bindings[d],c._listener===a&&c.context===b)return d;return-1},has:function(a,b){return-1!==this._indexOfListener(a,b)},add:function(a,b,d){return c(a,"add"),this._registerListener(a,!1,b,d)},addOnce:function(a,b,d){return c(a,"addOnce"),this._registerListener(a,!0,b,d)},remove:function(a,b){c(a,"remove");var d=this._indexOfListener(a,b);return-1!==d&&(this._bindings[d]._destroy(),this._bindings.splice(d,1)),a},removeAll:function(){for(var a=this._bindings.length;a--;)this._bindings[a]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(){if(this.active){var a,b=Array.prototype.slice.call(arguments),c=this._bindings.length;if(this.memorize&&(this._prevParams=b),c){a=this._bindings.slice(),this._shouldPropagate=!0;do c--;while(a[c]&&this._shouldPropagate&&a[c].execute(b)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var e=d;e.Signal=d,"function"==typeof define&&define.amd?define(function(){return e}):"undefined"!=typeof module&&module.exports?module.exports=e:a.signals=e}(this),function(a){function b(){var a=arguments[0],c=b.cache;return c[a]&&c.hasOwnProperty(a)||(c[a]=b.parse(a)),b.format.call(null,c[a],arguments)}function c(a){return Object.prototype.toString.call(a).slice(8,-1).toLowerCase()}function d(a,b){return Array(b+1).join(a)}var e={not_string:/[^sS]/,number:/[def]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosSuxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};
b.format=function(a,f){var g,h,i,j,k,l,m,n=1,o=a.length,p="",q=[],r=!0,s="";for(h=0;o>h;h++)if(p=c(a[h]),"string"===p)q[q.length]=a[h];else if("array"===p){if(j=a[h],j[2])for(g=f[n],i=0;i<j[2].length;i++){if(!g.hasOwnProperty(j[2][i]))throw new Error(b("[sprintf] property '%s' does not exist",j[2][i]));g=g[j[2][i]]}else g=j[1]?f[j[1]]:f[n++];if("function"==c(g)&&(g=g()),e.not_string.test(j[8])&&"number"!=c(g)&&isNaN(g))throw new TypeError(b("[sprintf] expecting number but found %s",c(g)));switch(e.number.test(j[8])&&(r=g>=0),j[8]){case"b":g=g.toString(2);break;case"c":g=String.fromCharCode(g);break;case"d":g=parseInt(g,10);break;case"e":g=j[7]?g.toExponential(j[7]):g.toExponential();break;case"f":g=j[7]?parseFloat(g).toFixed(j[7]):parseFloat(g);break;case"o":g=g.toString(8);break;case"s":g=(g=String(g))&&j[7]?g.substring(0,j[7]):g;break;case"S":g="'"+((g=String(g))&&j[7]?g.substring(0,j[7]):g)+"'";break;case"u":g>>>=0;break;case"x":g=g.toString(16);break;case"X":g=g.toString(16).toUpperCase()}(!r||e.number.test(j[8])&&j[3])&&(s=r?"+":"-",g=g.toString().replace(e.sign,"")),l=j[4]?"0"==j[4]?"0":j[4].charAt(1):" ",m=j[6]-(s+g).length,k=j[6]?d(l,m):"",q[q.length]=j[5]?s+g+k:0==l?s+k+g:k+s+g}return q.join("")},b.cache={},b.parse=function(a){for(var b=a,c=[],d=[],f=0;b;){if(null!==(c=e.text.exec(b)))d[d.length]=c[0];else if(null!==(c=e.modulo.exec(b)))d[d.length]="%";else{if(null===(c=e.placeholder.exec(b)))throw new SyntaxError("[sprintf] unexpected placeholder");if(c[2]){f|=1;var g=[],h=c[2],i=[];if(null===(i=e.key.exec(h)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(g[g.length]=i[1];""!==(h=h.substring(i[0].length));)if(null!==(i=e.key_access.exec(h)))g[g.length]=i[1];else{if(null===(i=e.index_access.exec(h)))throw new SyntaxError("[sprintf] failed to parse named argument key");g[g.length]=i[1]}c[2]=g}else f|=2;if(3===f)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");d[d.length]=c}b=b.substring(c[0].length)}return d};var f=function(a,c,d){return d=(c||[]).slice(0),d.splice(0,0,a),b.apply(null,d)};"undefined"!=typeof exports?(exports.sprintf=b,exports.vsprintf=f):(a.sprintf=b,a.vsprintf=f,"function"==typeof define&&define.amd&&define(function(){return{sprintf:b,vsprintf:f}}))}("undefined"==typeof window?this:window);var ssla=function(a){return a||(a={}),a.events={lmsPreInitialize:new signals.Signal,lmsPostInitialize:new signals.Signal,lmsPreFinish:new signals.Signal,lmsPostFinish:new signals.Signal,lmsPreTerminate:new signals.Signal,lmsPostTerminate:new signals.Signal,lmsPreCommit:new signals.Signal,lmsPostCommit:new signals.Signal,lmsPreGetValue:new signals.Signal,lmsPostGetValue:new signals.Signal,lmsPreSetValue:new signals.Signal,lmsPostSetValue:new signals.Signal},a}(ssla),Config=function(a){if(this.aicc_file="",this.courseBaseHtmlPath="../",this.showSCOtoSCONavigation=!0,this.showSCORM2004TopNav=!1,this.previousActivityText="Previous Activity",this.nextActivityText="Next Activity",this.scoLaunchType=1,this.hideTOC=!1,this.autoLaunchFirstSCO=!0,this.newWindowSettings=Array("width=1024","height=768"),this.debuggerStatus="off",this.debuggerLaunchType="console",this.masteryScore="",this.showCourseCompletionStatus=!0,this.showCourseSuccessStatus=!0,this.showCourseGrade=!0,this.scormManifestFileName="imsmanifest.xml",this.storageMediaType="server",this.ajaxType="POST",this.setDataURL="/track/set",this.getDataURL="/track/get",this.tocDataObjectName="toc_data",this.saveDataOnSetValue=!1,this.saveDataOnCommit=!0,this.forceSynchronousAjaxOnEnd=!0,this.tocDisplayType="ullistview",this.tocStatusImages=new Object,this.tocStatusImages.completed="images/status/completed.gif",this.tocStatusImages.incomplete="images/status/incomplete.gif",this.tocStatusImages.unknown="images/status/unknown.gif",this.tocStatusImages.not_attempted="images/status/unknown.gif",this.tocStatusImages.passed="images/status/passed.gif",this.tocStatusImages.failed="images/status/failed.gif",this.activeItemHighlightColor="#83f84f",this.showCourseCertificate=!0,this.courseCertThresholdScore=0,this.completeContentOnExit=!1,this.setInitializeToLMS=!0,this.setFinishToLMS=!0,this.saveStatementLog=!1,this.statementLogGetUrl="/track/statement_log/get",this.statementLogSetUrl="/track/statement_log/set",this.showStatementLogPopupLink=!1,this.checkObjectiveId=!1,this.checkInteractionId=!1,this.convertStudentName=!1,this.getStudentIdOverrideFn=null,this.getStudentNameOverrideFn=null,a)for(var b in a)this[b]=a[b]};if(CreateTableOfContents.prototype.getSchemaVersion=function(a){var b=traverse(a,"schemaversion");return b?b:traverse(a,"adlcp:scormtype")?"1.2":traverse(a,"adlcp:scormType")?"2004 3rd Edition":"http://www.imsproject.org/xsd/imscp_rootv1p1p2"==a.manifest.xmlns?"1.2":"http://www.imsglobal.org/xsd/imscp_v1p1"==a.manifest.xmlns?"2004 3rd Edition":"1.2"},CreateTableOfContents.prototype.initTraverse=function(a,b){strCurrentLevel=1,""!=config.aicc_file?(manifestInstance=new manifest(getCourseDirectory()+"/"+config.scormManifestFileName),xmlDom=manifestInstance.create(),xml=utils.StringtoXML(xmlDom),this.objXmlData=(new ParseXMLToObject.ParseXML).parseDocument(xml.documentElement),this.initTraverseContinue(b)):(xml=new ParseXMLToObject.ParseXML(a),xml.async(this.initTraverseContinueWrapper,[this,b]),this.objXmlData=xml.parse())},CreateTableOfContents.prototype.initTraverseContinueWrapper=function(a,b){b[0].objXmlData=a,b[0].initTraverseContinue(b[1])},CreateTableOfContents.prototype.initTraverseContinue=function(a){if("undefined"==typeof this.objXmlData)return void alert("The imsmanifest.xml file was not found at "+file+".\nThe imsmanifest.xml file must be at the root of the SCORM package");this.schemaversion=this.getSchemaVersion(this.objXmlData),n=this.traverse(this.objXmlData);var b="";if("ullistview"==this.blnShowIndent)for(b="</li>",outdent="</ul></li>",k=0;k<strCurrentLevel;k++)b+=outdent;a(n+b)},strLastLevel=0,CreateTableOfContents.prototype.getCurrentActivityId=function(){return this.activityId},CreateTableOfContents.prototype.applyStyle=function(a,b,c){if(before="",after="",strCurrentLevel=b.length+1,1==strCurrentLevel)strCurrentLevel>strLastLevel&&(before+="<ul id='menu_level_"+strLastLevel+"'><li>"),strCurrentLevel<strLastLevel&&(before=""),strCurrentLevel==strLastLevel&&(before="</ul>");else if(strCurrentLevel>strLastLevel&&(before+="<ul id='menu_level_"+strLastLevel+"'><li id='"+c+"'>"),strCurrentLevel==strLastLevel&&(before="</li><li id='"+c+"'>"),strCurrentLevel<strLastLevel){for(outdent="</ul></li>",outdentInterval=strLastLevel-strCurrentLevel,k=0;k<outdentInterval;k++)before+=outdent;before+="<li id='"+c+"'>"}return ret=before+a+after,strLastLevel=strCurrentLevel,ret},CreateTableOfContents.prototype.outputPlain=function(a,b){return a=b.length+b+a+"<br>"},numOfOrganizations=0,aryLookingForItems=new Array,strLastItemName="",aryAttributeCollection=new Array,strCurrentItemId="",intIndexCount=0,intParentIndexCount=-1,CreateTableOfContents.prototype.traverse=function(a,b,c,d){if(attributes="","undefined"==typeof b&&(b="",c=""),"undefined"==typeof c&&(c=""),"object"==typeof a){var e=null,f="";if("organization"==b){if(numOfOrganizations++,numOfOrganizations>1)return alert("This parser does not support multiple organizations."),f;aryLookingForItems=new Array("title"),strLastItemName="organization",c=""}if("item"==b&&(aryLookingForItems=new Array("title","identifier","identifierref","isvisible","adlcp:datafromlms","adlcp:masteryscore","adlcp:timelimitaction","adlcp:maxtimeallowed","adlcp:prerequisite","item"),strLastItemName="item"),"resource"==b)return f;for(var g in a){try{e=a[g]}catch(h){e="<Unable to Evaluate>"}if("object"==typeof e)f+=this.traverse(e,g,c,d+1);else for(j=0;j<aryLookingForItems.length;j++)if(g==aryLookingForItems[j])switch(g){case"title":"organization"==strLastItemName&&(strLastItemName="organization.title",aryLookingForItems=new Array("item"),f="debugview"==this.blnShowIndent?this.outputPlain(e,c):this.applyStyle(e,c),this.menuInstance.setMenuItem(e,"","","unknown",intIndexCount,intParentIndexCount),intIndexCount++,intParentIndexCount++),"item"==strLastItemName&&(strLastItemName="item",aryLookingForItems=new Array("title","identifier","identifierref","isvisible","adlcp:datafromlms","adlcp:masteryscore","adlcp:timelimitaction","adlcp:maxtimeallowed","adlcp:prerequisite","item","parameters"),c+=">","title"==g?"undefined"!=typeof aryAttributeCollection.identifierref||"undefined"==aryAttributeCollection.identifierref?(str="<a href='javascript:gotoSco(\""+aryAttributeCollection.identifierref+'","'+aryAttributeCollection.identifier+"\")'>"+e+"</a>",f="debugview"==this.blnShowIndent?this.outputPlain(str,c,aryAttributeCollection.identifier):this.applyStyle(str,c,aryAttributeCollection.identifier),this.menuInstance.setMenuItem(e,aryAttributeCollection.identifier,aryAttributeCollection.identifierref,"unknown",intIndexCount,intParentIndexCount),intIndexCount++):(f="debugview"==this.blnShowIndent?this.outputPlain(e,c):this.applyStyle(e,c),this.menuInstance.setMenuItem(e,"","","unknown",intIndexCount,intParentIndexCount),intIndexCount++,intParentIndexCount++):f="debugview"==this.blnShowIndent?this.outputPlain(g+":"+e,c):this.applyStyle(g+":"+e,c),aryAttributeCollection=new Array);break;case"identifier":"item"==strLastItemName&&(aryLookingForItems=new Array("title","identifierref","isvisible","adlcp:datafromlms","adlcp:masteryscore","adlcp:timelimitaction","adlcp:maxtimeallowed","adlcp:prerequisite","item","parameters"),aryAttributeCollection[g]=e,strCurrentItemId=e,strLastItemName="item");break;case"identifierref":"item"==strLastItemName&&(aryLookingForItems=new Array("title","identifier","isvisible","adlcp:datafromlms","adlcp:masteryscore","adlcp:timelimitaction","adlcp:maxtimeallowed","adlcp:prerequisite","item","parameters"),aryAttributeCollection[g]=e,strLastItemName="item",this.totalNumOfSCOs++);break;case"isvisible":"item"==strLastItemName&&(aryLookingForItems=new Array("title","identifierref","identifier","adlcp:datafromlms","adlcp:masteryscore","adlcp:timelimitaction","adlcp:maxtimeallowed","adlcp:prerequisite","item","parameters"),aryAttributeCollection[g]=e,strLastItemName="item");break;case"adlcp:datafromlms":"item"==strLastItemName&&(aryLookingForItems=new Array("title","adlcp:masteryscore","identifier","identifierref","adlcp:timelimitaction","adlcp:maxtimeallowed","adlcp:prerequisite","item","parameters"),a[g]=e,this.data[strCurrentItemId]=a);break;case"adlcp:masteryscore":"item"==strLastItemName&&(aryLookingForItems=new Array("title","adlcp:datafromlms","identifier","identifierref","adlcp:timelimitaction","adlcp:maxtimeallowed","adlcp:prerequisite","item","parameters"),a[g]=e,this.data[strCurrentItemId]=a);break;case"adlcp:timelimitaction":"item"==strLastItemName&&(aryLookingForItems=new Array("title","adlcp:datafromlms","adlcp:masteryscore","identifier","identifierref","adlcp:maxtimeallowed","adlcp:prerequisite","item","parameters"),a[g]=e,this.data[strCurrentItemId]=a);break;case"adlcp:maxtimeallowed":"item"==strLastItemName&&(aryLookingForItems=new Array("title","adlcp:datafromlms","adlcp:masteryscore","identifier","identifierref","adlcp:timelimitaction","adlcp:prerequisite","item","parameters"),a[g]=e,this.data[strCurrentItemId]=a);break;case"adlcp:prerequisite":"item"==strLastItemName&&(aryLookingForItems=new Array("title","adlcp:datafromlms","adlcp:masteryscore","identifier","identifierref","adlcp:timelimitaction","adlcp:maxtimeallowed","item","parameters"),a[g]=e,this.data[strCurrentItemId]=a);break;case"parameters":"item"==strLastItemName&&(aryLookingForItems=new Array("title","adlcp:datafromlms","adlcp:masteryscore","identifier","identifierref","adlcp:timelimitaction","adlcp:maxtimeallowed","item","parameters"),a[g]=e,this.data[strCurrentItemId]=a)}}return f}return a},CreateTableOfContents.prototype.lookupHrefByRef=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n;try{document.getElementById(this.getCurrentActivityId()).childNodes[0].style.backgroundColor=""}catch(o){}if(""!=this.strCurrentActivityId&&(document.getElementById(this.strCurrentActivityId).childNodes[0].style.backgroundColor=""),"undefined"==a)return void alert("identifierref is undefined. Can not find content to launch.");if("undefined"==b)return void alert("identifier is undefined. Can not find content to launch.");for(l=getStudentId(),m=getStudentName(),n=0;n<document.frmMain.credit.length;n++)document.frmMain.credit[n].checked&&(c=document.frmMain.credit[n].value);for(n=0;n<document.frmMain.mode.length;n++)document.frmMain.mode[n].checked&&(d=document.frmMain.mode[n].value);try{f="undefined"==typeof this.data[b]["adlcp:datafromlms"]?"":this.data[b]["adlcp:datafromlms"]}catch(o){f=""}try{g="undefined"==typeof this.data[b]["adlcp:masteryscore"]?"":this.data[b]["adlcp:masteryscore"]}catch(o){g=""}try{h="undefined"==typeof this.data[b]["adlcp:maxtimeallowed"]?"":this.data[b]["adlcp:maxtimeallowed"]}catch(o){h=""}try{i="undefined"==typeof this.data[b]["adlcp:timelimitaction"]?"":this.data[b]["adlcp:timelimitaction"]}catch(o){i=""}try{j="undefined"==typeof this.data[b].parameters?"":this.data[b].parameters}catch(o){j=""}j=j.trim(),"?"==j.charAt(0)&&(j=j.substr(1)),""!=config.masteryScore&&(this.data[b]["adlcp:masteryscore"]=config.masteryScore);for(res in this.objXmlData.manifest.resources.resource){var p=this.objXmlData.manifest.resources.resource[res];if("string"==typeof p&&(p=this.objXmlData.manifest.resources.resource),a==p.identifier){switch(this.schemaversion){case"":return void alert("No schemaversion found in the manifest. I can't tell what SCORM version you want me to launch the course as.");case"1.1":case"1.0":return void alert("This applications does not support launching SCORM 1.0 or 1.1 content. Please make sure you are using the correct schemaversion in the imsmanifest.xml file");case"aicc":e=initAiccPlayer;break;case"1.2":e=initScorm12Player;break;case"CAM 1.3":case"2004 3rd Edition":case"2004 4th Edition":try{getScorm2004Api()}catch(o){return void(document.location.href="scorm2004player.htm?"+document.location.href.split("?")[1])}e=initScorm2004Player;break;default:alert("This applications does not recognize schemaversion "+this.schemaversion+". Please make sure you are using the correct schemaversion in the imsmanifest.xml file")}return k=getCourseDirectory()+"/"+p.href,j&&(k=k.indexOf("?")>-1?k+"&"+j:k+"?"+j),scoid=a,k=utils.jcaEncodePath(k),this.activityId=b,e({act_id:b,sco_id:scoid,path:k,student_name:m,student_id:l,data_from_lms:f,mastery_score:g,max_time_allowed:h,time_limit_action:i,cmi_core_credit:c,cmi_core_lesson_mode:d}),void(document.getElementById(b).childNodes[0].style.backgroundColor=config.activeItemHighlightColor)}}},CreateTableOfContents.prototype.findSCORMVersion=function(a){switch(a){case"aicc":return!1;case"1.1":case"1.0":case"1.2":case"CAM 1.3":case"2004 3rd Edition":case"2004 4th Edition":return a}return n=JSON.stringify(this.objXmlData),this.objXmlData.hasOwnProperty("schemaversion")&&alert("there is a schema version"),-1!=n.indexOf("adlcp:scormtype")?"1.2":-1!=n.indexOf("adlcp:scormType")&&-1!=n.indexOf("adlcp_v1p3")?"2004 3rd Edition":void 0},CreateTableOfContents.prototype.swapIcon=function(a,b){switch(b){case"completed":img=config.tocStatusImages.completed,strImage="url("+img+")";break;case"incomplete":img=config.tocStatusImages.incomplete,strImage="url("+img+")";break;case"unknown":img=config.tocStatusImages.unknown,strImage="url("+img+")";break;case"not attempted":img=config.tocStatusImages.not_attempted,strImage="url("+img+")";break;case"passed":img=config.tocStatusImages.passed,strImage="url("+img+")";break;case"failed":img=config.tocStatusImages.failed,strImage="url("+img+")"}!function(b){setTimeout(function(){document.getElementById(a)&&(document.getElementById(a).style.background=b,document.getElementById(a).style.backgroundRepeat="no-repeat")},1)}(strImage)},CreateTableOfContents.prototype.setCompletionStatus=function(a,b){this.menuInstance.updateItemStatusByItemId(a,b),this.aryCompletionStatus[a]=b,this.swapIcon(a,b),this.processRollup()},intLastParentIndex=-1,strLastStatus="",strParentStatus="unknown",CreateTableOfContents.prototype.processRollup=function(){},CreateTableOfContents.prototype.getCompletionStatus=function(a){return this.aryCompletionStatus[a]},CreateTableOfContents.prototype.getTOCCache=function(){return a='"aryCompletionStatus":'+JSON.stringify(this.aryCompletionStatus),"{"+a+"}"},CreateTableOfContents.prototype.setTOCCache=function(a){if(numberCompleted=0,objSuspendedData="object"==typeof a?a:JSON.parse(a),"undefined"!=typeof objSuspendedData.aryCompletionStatus&&"undefined"!=objSuspendedData.aryCompletionStatus){this.aryCompletionStatus=objSuspendedData.aryCompletionStatus;for(i in this.aryCompletionStatus)"toJSONString"!=i&&(this.swapIcon(i,this.aryCompletionStatus[i]),("passed"==this.aryCompletionStatus[i]||"completed"==this.aryCompletionStatus[i])&&numberCompleted++);this.totalNumOfSCOs==numberCompleted&&config.showCourseCertificate&&window.open("certificate.htm")}},!window.console||!console.log){var console={};console.log=console.error=console.info=console.debug=console.warn=console.trace=console.dir=console.dirxml=console.group=console.groupEnd=console.time=console.timeEnd=console.assert=console.profile=function(){}}DebugWriter.prototype.createDebugWindow=function(a){if("off"!=this.status){switch(a){case"popup":winObj=window.open(),this.documentObject=winObj.document;break;case"embed":this.documentObject=window.document;break;case"console":return void(this.documentObject=console.debug);default:winObj=window.open(),this.documentObject=winObj.document}eleDiv=this.documentObject.createElement("div"),objDiv=this.documentObject.body.appendChild(eleDiv),objDiv.id=this.strDebugDivName,objDiv.style.visibility="hidden",objDiv.style.position="absolute",objDiv.style.top="50px",objDiv.style.left="10px",objDiv.style.border="1px solid black",objDiv.style.backgroundColor="#CCCCCC",objDiv.style.color="#000000",objDiv.style.width="80%",objDiv.style.height="80%",objDiv.style.overflow="auto",objDiv.style.paddingLeft="5px",objDiv.style.zIndex=9,objDiv.innerHTML="",eleDiv1=this.documentObject.createElement("div"),objDiv1=this.documentObject.body.appendChild(eleDiv1),objDiv1.id=this.strDebugToolbarDivName,objDiv1.style.visibility="hidden",objDiv1.style.position="absolute",tmp1=objDiv.style.top,tmp2=tmp1.split("px")[0],objDiv1.style.top=tmp2-30,objDiv1.style.left=objDiv.style.left,objDiv1.style.width=objDiv.style.width,objDiv1.style.height=objDiv.style.height,"embed"==a?(b1="<button onClick='debugWriter.saveDebugWindow();'>Save</button>",b2="<button onClick='debugWriter.printDebugWindow();'>Print</button>",b3="<button onClick='debugWriter.clearDebugWindow();'>Clear</button>",b4="<button onClick='debugWriter.hideDebugWindow();'>Hide</button>",b5="<button onClick='debugWriter.clearDebugQueue();'>Clear Queue</button>",objDiv1.innerHTML=b1+b2+b3+b4+b5):(b1="<button onClick='opener.debugWriter.saveDebugWindow();'>Save</button>",b2="<button onClick='opener.debugWriter.printDebugWindow();'>Print</button>",b3="<button onClick='opener.debugWriter.clearDebugWindow();'>Clear</button>",b4="<button onClick='opener.debugWriter.hideDebugWindow();'>Hide</button>",b5="<button onClick='opener.debugWriter.clearDebugQueue();'>Clear Queue</button>",objDiv1.innerHTML=b1+b2+b3+b4+b5,this.showDebugWindow())}},DebugWriter.prototype.showDebugWindow=function(){"off"!=this.status&&"console"!=this.presentation&&this.documentObject.getElementById(this.strDebugDivName)&&(this.documentObject.getElementById(this.strDebugDivName).style.visibility="visible",this.documentObject.getElementById(this.strDebugToolbarDivName).style.visibility="visible",this.documentObject.getElementById(this.strDebugDivName).innerHTML=this.displayTextInDebugWindow())},DebugWriter.prototype.clearDebugWindow=function(){"off"!=this.status&&(this.documentObject.getElementById(this.strDebugDivName).innerHTML="")},DebugWriter.prototype.clearDebugQueue=function(){"off"!=this.status&&(this.aryDebugText=[],this.aryDebugType=[],this.documentObject.getElementById(this.strDebugDivName)&&"visible"==this.documentObject.getElementById(this.strDebugDivName).style.visibility&&this.showDebugWindow())},DebugWriter.prototype.displayTextInDebugWindow=function(){if("off"!=this.status){var a="";for(i=0;i<this.aryDebugText.length;i++){switch(this.aryDebugType[i].toLowerCase()){case"debug":a+="<FONT COLOR=00FF00>";break;case"warning":a+="<FONT COLOR=FFFF00>";break;case"error":a+="<FONT COLOR=FF0000>";break;default:a+="<FONT COLOR="+this.aryDebugType[i]+">"}a+=this.aryDebugText[i]+"<br>",a+="</FONT><BR>"}return a}},DebugWriter.prototype.hideDebugWindow=function(){"off"!=this.status&&this.documentObject.getElementById(this.strDebugDivName)&&(this.documentObject.getElementById(this.strDebugDivName).style.visibility="hidden",this.documentObject.getElementById(this.strDebugToolbarDivName).style.visibility="hidden")},DebugWriter.prototype.writeToDebugWindow=function(a,b){if("off"!=this.status&&""!=a)if("console"!=this.presentation)this.documentObject.getElementById(this.strDebugDivName).scrollTop=this.documentObject.getElementById(this.strDebugDivName).scrollHeight,(""==b||"undefined"==typeof b)&&(b="#000000"),this.aryDebugText[this.aryDebugText.length]=a,this.aryDebugType[this.aryDebugType.length]=b,"visible"==this.documentObject.getElementById(this.strDebugDivName).style.visibility&&this.showDebugWindow();else try{console.debug(a)}catch(c){this.presentation="popup"}},DebugWriter.prototype.printDebugWindow=function(){"off"!=this.status&&alert("print disabled")},DebugWriter.prototype.saveDebugWindow=function(){if("off"!=this.status)try{var a=new ActiveXObject("Scripting.FileSystemObject"),b=a.CreateTextFile("C:\\debugger.htm",!0);b.WriteLine(this.displayTextInDebugWindow()),b.Close(),alert("File was saved to C:\\debugger.htm")}catch(c){alert(c.name+"\n"+c.description+"\nThe file was not saved. \nSave uses the activeX File System Object (FSO) so please check your activeX control permissions and try again.")}},Menu=function(){this.objMenuItems=new Object},Menu.prototype.setMenuItem=function(a,b,c,d,e,f){this.objMenuItems[e]={title:a,itemId:b,resourceId:c,status:d,parent:f}},Menu.prototype.getMenuItem=function(name,value){if("index"==name)return this.objMenuItems[value];for(obj in this.objMenuItems)if(v=eval("this.objMenuItems[obj]."+name),v==value)return this.objMenuItems[obj];return-1},Menu.prototype.getMenuItemByIndex=function(a){return this.objMenuItems[a]},Menu.prototype.getMenuItemIndex=function(name,value){if("index"==name)alert("Can not use the index to look up an index.");else for(obj in this.objMenuItems)if(v=eval("this.objMenuItems[obj]."+name),v==value)return obj;return-1},Menu.prototype.getMenuObject=function(){return this.objMenuItems},Menu.prototype.getFirstLeafActivity=function(){for(obj in this.objMenuItems)if(""!=this.objMenuItems[obj].resourceId)return this.objMenuItems[obj];return""},Menu.prototype.getLastItem=function(){return this.objMenuItems[this.objMenuItems.length]},Menu.prototype.getLastAttemptedItem=function(){return""},Menu.prototype.updateItemStatusByItemId=function(a,b){index=this.getMenuItemIndex("itemId",a),-1!=index&&(this.objMenuItems[index].status=b)},StatementLogger.prototype.addStatement=function(a){var b;for(this.statements.push(a),b=0;b<this.listeners.length;b++)try{this.listeners[b](a)}catch(c){console.log("listener disappeared")}},StatementLogger.prototype.serialize=function(){var a,b=[];for(a=0;a<this.statements.length;a++)b.push({statementType:this.statements[a].statementType,statement:this.statements[a].statement,debugLevel:this.statements[a].debugLevel,displayWhen:this.statements[a].getDisplayWhen(),timeTaken:this.statements[a].timeTaken,subStatements:this.statements[a].subStatements});return JSON.stringify(b)},StatementLogger.prototype.save=function(){reqwest({url:config.statementLogSetUrl,method:config.ajaxType,type:"json",async:!0,data:{uuid:this.uuid,courseId:this.courseId,studentId:this.studentId,timestamp:(new Date).getTime(),statements:this.serialize()}})},StatementLogEntry.prototype.addSubStatement=function(a){this.subStatements.push(a)},StatementLogEntry.prototype.stampTimeTaken=function(){this.timeTaken=((new Date).getTime()-this.when.getTime())/1e3},StatementLogEntry.prototype.getDisplayWhen=function(){return this.displayWhen||(this.displayWhen=this.when.toTimeString().split(" ")[0]+"."+this.when.getMilliseconds()),this.displayWhen};var ssla=function(a){function b(){var a={},b=document.cookie;if(""===b)return a;for(var c=b.split("; "),d=0;d<c.length;d++){var e=c[d],f=e.indexOf("="),g=e.substring(0,f),h=e.substring(f+1);h=decodeURIComponent(h),a[g]=h}return a}return a||(a={}),a.storageLayers||(a.storageLayers={}),a.storage={getStorageLayer:function(){return a.storageLayers.hasOwnProperty(config.storageMediaType)?a.storageLayers[config.storageMediaType]:(alert("Storage layer type not recognized, check your configuration: "+config.storageMediaType),null)},load:function(b,c,d){return a.storage.getStorageLayer().load(b,c,d)},save:function(b,c,d,e){return a.storage.getStorageLayer().save(b,c,d,e)},saveDiff:function(b,c,d,e){return a.storage.getStorageLayer().saveDiff(b,c,d,e)}},a.storageLayers.cookie={doCallback:function(a,b,c){"2004"==c?returnSCORMData(b):"toc_data"==a?returnFromAjaxTocData(b):returnFromAjaxScorm12Course(b)},load:function(c,d,e){var f,g=b();if(g[d])try{f=JSON.parse(g[d]),a.storageLayers.cookie.doCallback(d,f,e)}catch(h){a.storageLayers.cookie.doCallback(d,null,e)}else a.storageLayers.cookie.doCallback(d,null,e)},save:function(a,b,c){var d=null,e="/",f=null,g=null;document.cookie=b+"="+encodeURIComponent(c)+(d?"; expires="+d.toGMTString():"")+(e?"; path="+e:"")+(f?"; domain="+f:"")+(g?"; secure":""),a&&a(!0,b,c)},saveDiff:function(){alert("ssla.storageLayers.cookie.saveDiff not supported.")}},a.storageLayers.server={load:function(a,b,c){reqwest({url:config.getDataURL,method:config.ajaxType,type:"json",async:!0,data:{name:b,activityId:getCourseId(),studentId:getStudentId(),timestamp:(new Date).getTime()},success:function(a){debugWriter.writeToDebugWindow("in storage.load server returned value = "+a),("undefined"==typeof a||!a||"responseText"in a||"responseXML"in a)&&(a={}),"2004"==c?returnSCORMData(a):"toc_data"==b?returnFromAjaxTocData(a):returnFromAjaxScorm12Course(a)},error:function(a,b,c){console.log(a,b,c),debugWriter.writeToDebugWindow("in storage.load error retrieving data from server."),alert("error in get ajax"+a+","+b+","+c),returnFromAjax(null)}})},save:function(b,c,d,e){var f=!0;globalActiveSaveCounter+=1,e||(e={}),config.forceSynchronousAjaxOnEnd&&e.isEndRequest&&(f=!1),reqwest({url:config.setDataURL,method:config.ajaxType,async:f,timeout:5e3,data:{name:c,theData:d,activityId:getCourseId(),studentId:getStudentId(),timestamp:(new Date).getTime()},success:function(){},error:function(){},complete:function(){a.storageLayers.server.onComplete()}}),f||a.storageLayers.server.onComplete()},saveDiff:function(){alert("ssla.storageLayers.server.saveDiff not supported.")},onComplete:function(){globalActiveSaveCounter-=1}},a}(ssla);Utils.prototype.StringtoXML=function(a){var b,c;return window.ActiveXObject?(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)):(c=new DOMParser,b=c.parseFromString(a,"text/xml")),b},Utils.prototype.openPage=function(a,b,c,d){var e;switch(b){case"self":document.location.replace(a);break;case"popup":e=d?window.open(a,c,d):window.open(a,c),null==e||"undefined"==typeof e||e.focus()}return e},Utils.prototype.parseQueryString=function(){var a,b=window.location.search.substring(1),c={};a=b.split("&");for(var d=0;d<a.length;d++){var e=a[d].split("=");c[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}return c},Utils.prototype.jcaDecodePath=function(a){return a=a.replace(/\[0\]/g,"&nbsp;"),a=a.replace(/\[1\]/g,"&"),a=a.replace(/\[2\]/g,"?"),a=a.replace(/\[3\]/g,"=")},Utils.prototype.jcaEncodePath=function(a){return a=a.replace(/&nbsp;/g,"[0]"),a=a.replace(/\&/g,"[1]"),a=a.replace(/\?/g,"[2]"),a=a.replace(/\=/g,"[3]")},Utils.prototype.decode=function(a){return unescape(a.replace(/\+/g," "))},String.prototype.trim||!function(){var a=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(a,"")}}(),window.configCustom||(window.configCustom={});var config=new Config(window.configCustom),debugWriter=new DebugWriter(config.debuggerStatus,config.debuggerLaunchType),utils=new Utils,objVars=utils.parseQueryString(document.location.href),globalActiveSaveCounter=0,currentCourseDetails={courseId:getCourseId(),studentId:getStudentId(),studentName:getStudentName()};utils.currentCourseDetails=currentCourseDetails;var statementLogger=new StatementLogger(currentCourseDetails.courseId,currentCourseDetails.studentId),activeCourse=getCourseDirectory()+"/"+config.scormManifestFileName;utils.currentCourseDetails=currentCourseDetails;var createTableOfContentsInstance,currMenuState="hide",qsObject,API,API_1484_11,CMI_DBInstance,oScormData,strCookieName,StatementLogEntry,popupSettings="";CMI_DBInstance={},oScormData={},strCookieName="";var arrInteractionTypes={},ScormBase=function(){function d(a){var b=1*a;return isNaN(b)||2!=a.length&&4!=a.length?!1:!0}function e(a){var b=1*a;return isNaN(b)||2!=a.length?!1:!0}function f(a){return-1!=a.indexOf(".")?(s=a.split("."),s.length>2?!1:isNaN(s[0])||2!=s[0].length?!1:!0):(s=a,isNaN(s)||2!=s.length?!1:!0)}function g(a){return-1!=a.indexOf("cmi.objectives")||-1!=a.indexOf("cmi.interactions")?!0:!1}function h(a){return-1!=a.indexOf("_children")||-1!=a.indexOf("_count")?!0:!1}var i=function(){this._init()};return i.prototype._init=function(){this.lastSCORMData="",this.isDirty=!1,this._isInitialized=!1,this._errorCode,this.statementLogger=statementLogger,this.suspendFlagSet=!1,this.finishing=!1},i.prototype.initialize=function(a){var b,c,d=new StatementLogEntry("runtime");return ssla.events.lmsPreInitialize.dispatch(),b=this._initialize(a),ssla.events.lmsPostInitialize.dispatch(b),c=this._getLastError(),d.statement=vsprintf("LMSInitialize(%S) returned %S.",[a,b]),d.stampTimeTaken(),"0"!==c&&(d.debugLevel="ERROR",d.addSubStatement(vsprintf("LMSGetLastError returned %S.",[c]))),this.statementLogger.addStatement(d),b},i.prototype._initialize=function(a){var b=oScormData.strStudentId+"_"+oScormData.strSCOId,c="";if(this._isInitialized)this._errorCode="101",config.setInitializeToLMS&&ssla.storage.getStorageLayer().save(null,"initialize",'{"'+b+'":"false"}'),c="false";else if(""!=a||null==a)this._errorCode="201",config.setInitializeToLMS&&ssla.storage.getStorageLayer().save(null,"initialize",'{"'+b+'":"false"}'),c="false";else{var d=oScormData.data;CMI_DBInstance.callRestore(d),this._isInitialized=!0,this._errorCode="0",config.setInitializeToLMS&&ssla.storage.getStorageLayer().save(null,"initialize",'{"'+b+'":"true"}'),CMI_DBInstance.callCommit(),this.saveData(),c="true"}return c},i.prototype.finish=function(a){var b,c,d=new StatementLogEntry("runtime");return this.finishing=!0,ssla.events.lmsPreFinish.dispatch(),b=this._finish(a),ssla.events.lmsPreFinish.dispatch(b),c=this._getLastError(),d.statement=vsprintf("LMSFinish(%S) returned %S.",[a,b]),d.stampTimeTaken(),"0"!==c&&(d.debugLevel="ERROR",d.addSubStatement(vsprintf("LMSGetLastError returned %S.",[c]))),this.statementLogger.addStatement(d),b},i.prototype._finish=function(){console.log("_finish not implemented")},i.prototype.commit=function(a){var b,c,d=new StatementLogEntry("runtime");return ssla.events.lmsPreCommit.dispatch(),b=this._commit(a),ssla.events.lmsPostCommit.dispatch(b),c=this._getLastError(),d.statement=vsprintf("LMSCommit(%S) returned %S.",[a,b]),d.stampTimeTaken(),"0"!==c&&(d.debugLevel="ERROR",d.addSubStatement(vsprintf("LMSGetLastError returned %S.",[c]))),this.statementLogger.addStatement(d),b},i.prototype._commit=function(a){if(!this._isInitialized)return this._errorCode="301","false";
if(""!=a||null==a)return this._errorCode="201","false";if(this.isDirty||this.finishing){var b=CMI_DBInstance.callCommit();return debugWriter.writeToDebugWindow("Committing data: "+b),config.saveDataOnCommit&&this.saveData(),null==b?"false":(this.isDirty=!1,"true")}return"true"},i.prototype.getValue=function(a){var b,c,d=new StatementLogEntry("runtime");return ssla.events.lmsPreGetValue.dispatch(a),b=this._getValue(a),ssla.events.lmsPostGetValue.dispatch(a,b),c=this._getLastError(),d.statement=vsprintf("LMSGetValue(%S) returned %S.",[a,b]),d.stampTimeTaken(),"0"!==c&&(d.debugLevel="ERROR",d.addSubStatement(vsprintf("LMSGetLastError returned %S.",[c]))),this.statementLogger.addStatement(d),b},i.prototype._getValue=function(a){debugWriter.writeToDebugWindow("LMSGetValue :: Getting value "+a+" from LMS");var b="";return this._isInitialized?(this._errorCode=this.errorHandling(a,"",this._isInitialized,"get"),this.checkForValidDataModelElement(a)&&this.isReadable(a)&&(b=-1!=a.indexOf("_children")?this.getDataModelElementChildElements(a):this._internalGetValue(a)),debugWriter.writeToDebugWindow("LMSGetValue :: Value of "+a+" is "+b),b.toString()):(b="",this._errorCode="301","")},i.prototype.setValue=function(a,b){var c,d,e=new StatementLogEntry("runtime");return ssla.events.lmsPreSetValue.dispatch(a,b),c=this._setValue(a,b),ssla.events.lmsPostSetValue.dispatch(a,b),d=this._getLastError(),e.statement=vsprintf("LMSSetValue(%S, %S) returned %S.",[a,b,c]),e.stampTimeTaken(),"0"!==d&&(e.debugLevel="ERROR",e.addSubStatement(vsprintf("LMSGetLastError returned %S.",[d]))),this.statementLogger.addStatement(e),c},i.prototype.getLastError=function(){var a,b=new StatementLogEntry("runtime");return a=this._getLastError(),b.statement=vsprintf("LMSGetLastError() returned %S.",[a]),b.stampTimeTaken(),this.statementLogger.addStatement(b),a},i.prototype._getLastError=function(){return null==this._errorCode||void 0==this._errorCode?"0":this._errorCode},i.prototype.getErrorString=function(a){var b,c=new StatementLogEntry("runtime");return b=this._getErrorString(a),c.statement=vsprintf("LMSGetErrorString(%S) returned %S.",[b]),c.stampTimeTaken(),this.statementLogger.addStatement(c),b},i.prototype._getErrorString=function(a){var b="";return this.errorCodeMap[a]&&(b=this.errorCodeMap[a]),b},i.prototype.getDiagnostic=function(a){var b,c=new StatementLogEntry("runtime");return b=this._getDiagnostic(a),c.statement=vsprintf("LMSGetDiagnostic(%S) returned %S.",[b]),c.stampTimeTaken(),this.statementLogger.addStatement(c),b},i.prototype._getDiagnostic=function(a){return a},i.prototype.checkObjectives=function(){console.log("checkObjectives not implemented.")},i.prototype.checkInteractions=function(){console.log("checkInteractions not implemented.")},i.prototype.customSetValueDmeChecks=function(a,b){return b},i.prototype._setValue=function(d,e){return debugWriter.writeToDebugWindow("LMSSetValue :: Setting value "+d+" to "+e+" in the LMS"),this._isInitialized?(this._errorCode=this.errorHandling(d,e,this._isInitialized,"set"),"402"==this._errorCode?"false":(a=this.checkForValidDataModelElement(d),b=this.isWritable(d),c=this.checkValidValues(d,e),a&&b&&c?(e=this.customSetValueDmeChecks(d,e),ret=this._internalSetValue(d,e),("true"==ret||1==ret)&&(this._errorCode="0",this.isDirty=!0),ret.toString()):"false")):(this._errorCode="301","false")},i.prototype.hasChildren=function(a){if(this.checkForValidDataModelElement(a)){if(-1!=a.indexOf("cmi.objectives")&&-1!=a.indexOf("score._children"))return!0;switch(a){case"cmi.core._children":return!0;case"cmi.core.score._children":return!0;case"cmi.objectives._children":return!0;case"cmi.interactions._children":return!0;case"cmi.student_data._children":return!0;case"cmi.student_preference._children":return!0;default:return!1}}},i.prototype.errorHandling=function(a,b,c,d){var e="0";if(c){if("set"==d&&(-1!=a.indexOf("._count")||-1!=a.indexOf("._children")))return e="402";if(this.checkForValidDataModelElement(a)){if("undefined"==typeof b)return b="",e="201";"get"==d&&(-1!=a.indexOf("_children")&&(this.hasChildren(a)||(e="202")),-1!=a.indexOf("_count")&&(g(a)||(e="203")),this.isReadable(a)||(e="404")),""!=b&&(h(a)?e="402":(this.checkValidValues(a,b)||(e="405"),this.isWritable(a)||(e="403")))}else e=-1!=a.indexOf("_children")?"202":-1!=a.indexOf("_count")?"203":"201"}else e="301";return e},i.prototype.getDataModelElementChildElements=function(a){var b="student_id,student_name,lesson_location,credit,lesson_status,entry,score,total_time,lesson_mode,exit,session_time",c="raw,min,max",d="id,score,status",e="mastery_score,max_time_allowed,time_limit_action",f="audio,language,speed,text",g="id,objectives,time,type,correct_responses,weighting,student_response,result,latency";if(this.checkForValidDataModelElement(a)){if(-1!=a.indexOf("score._children"))return c;switch(a){case"cmi.core._children":return b;case"cmi.objectives._children":return d;case"cmi.student_data._children":return e;case"cmi.student_preference._children":return f;case"cmi.interactions._children":return g;default:return""}}},i.prototype.checkForValidDataModelElement=function(a){if(-1!=a.indexOf("cmi.objectives")&&1==this.checkObjectives(a))return!0;if(-1!=a.indexOf("cmi.interactions"))return n=this.checkInteractions(a),n;for(var b=0;b<this.validDmes.length;b++)if(a==this.validDmes[b])return!0;return!1},i.prototype.checkValidValues=function(){console.log("checkValidValues not implemented.")},i.prototype.isWritable=function(a){if(this.checkForValidDataModelElement(a)){if(-1!=a.indexOf("cmi.interactions")&&(-1==a.indexOf("_children")||-1==a.indexOf("_count"))&&1==this.checkInteractions(a))return!0;if(-1==a.indexOf("cmi.objectives")){for(var b=0;b<this.validWritables.length;b++)if(a==this.validWritables[b])return!0;return!1}if((-1==a.indexOf("_children")||-1==a.indexOf("_count"))&&1==this.checkObjectives(a))return!0}},i.prototype.isReadable=function(a){if(this.checkForValidDataModelElement(a)){if(-1!=a.indexOf("cmi.interactions")){if(-1!=a.indexOf("._children"))return!0;if(-1!=a.indexOf("._count"))return!0}if(-1==a.indexOf("cmi.objectives")){for(var b=0;b<this.validReadables.length;b++)if(a==this.validReadables[b])return!0;return!1}if(1==this.checkObjectives(a))return!0}},i.prototype._internalGetValue=function(){console.log("_internalGetValue not implemented.")},i.prototype._internalSetValue=function(){console.log("_internalSetValue not implemented.")},i.prototype.checkStatus=function(){console.log("checkStatus not implemented.")},i.prototype.checkRawMinMax=function(a){var b=1*a;return isNaN(b)||0>b||b>100?!1:!0},i.prototype.checkCMITimeSpan=function(a){var b=a.split(":"),c=b[0],g=b[1],h=b[2];return 0==d(c)||0==e(g)||0==f(h)?!1:!0},i.prototype.checkCMIString255=function(a){var b="^.{0,255}$";return matchRegEx(b,a)},i.prototype.checkCMIString4096=function(a){var b="^.{0,4096}$";return matchRegEx(b,a)},i.prototype.saveData=function(){var a,b,c;a=oScormData.strStudentId+"_"+oScormData.strSCOId,b=CMI_DBInstance.toDB(),(this.lastSCORMData!=b||this.finishing)&&(n=ssla.storage.getStorageLayer().save(null,a,b,{isEndRequest:this.finishing}),this.lastSCORMData=b,this.isDirty=!1),debugWriter.writeToDebugWindow("SaveData() setting :: Value of "+a+" is "+b);try{c=createTableOfContentsInstance.getTOCCache()}catch(d){debugWriter.writeToDebugWindow("SaveData() error :: failed to locate createTableOfContentsInstance.getTOCCache()")}ssla.storage.getStorageLayer().save(null,config.tocDataObjectName,c,{isEndRequest:this.finishing}),config.saveStatementLog&&parent.statementLogger.save(),debugWriter.writeToDebugWindow("Leaving")},i};CMI_DB_12.prototype.callSetValue=function(a,b){var c="NO_DATA_REPORTED",d=0;switch(a){case"cmi.core.session_time":var e=this._getLocalData("cmi.core.total_time");"undefined"==typeof e&&(e="0000:00:00");var f=this.addTimes(e,b);c=this._setLocalData("cmi.core.total_time",f+"")}if(-1!=a.indexOf("cmi.objectives."))-1!=a.indexOf(".id")&&(c=this.local_data[a],"undefined"==typeof c&&(d=parseInt(this.local_data["cmi.objectives._count"]),isNaN(d)&&(d=0),d++,this.local_data["cmi.objectives._count"]=d));else if(-1!=a.indexOf("cmi.interactions."))if(-1!=a.indexOf("type")&&(arrInteractionTypes[a]=b),-1!=a.indexOf(".objectives")){if(-1!=a.indexOf(".id")&&(c=this.local_data[a],"undefined"==typeof c)){var g=a.split(".")[2];d=parseInt(this.local_data["cmi.interactions."+g+".objectives._count"]),isNaN(d)&&(d=0),d++,this.local_data["cmi.interactions."+g+".objectives._count"]=d}}else-1!=a.indexOf(".id")?(c=this.local_data[a],"undefined"==typeof c&&(d=parseInt(this.local_data["cmi.interactions._count"]),isNaN(d)&&(d=0),d++,this.local_data["cmi.interactions._count"]=d)):-1!=a.indexOf(".correct_responses")&&-1!=a.indexOf(".pattern")&&(c=this.local_data[a],"undefined"==typeof c&&(g=a.split(".")[2],d=parseInt(this.local_data["cmi.interactions."+g+".correct_responses._count"]),isNaN(d)&&(d=0),d++,this.local_data["cmi.interactions."+g+".correct_responses._count"]=d));return c=this._setLocalData(a,b)},CMI_DB_12.prototype.callGetValue=function(a){var b=this._getLocalData(a);return a.indexOf("._count")>-1&&"undefined"==typeof b&&(b="0"),b},CMI_DB_12.prototype.callCommit=function(){return this.toDB()},CMI_DB_12.prototype.toDB=function(){return debugWriter.writeToDebugWindow("CMI_DB_12.prototype.toDB() "+JSON.stringify(this.local_data),"blue"),JSON.stringify(this.local_data)},CMI_DB_12.prototype.callRestore=function(a){"undefined"==typeof a||!a||isEmptyObject(a)?(debugWriter.writeToDebugWindow("CMI_DB_12.prototype.callRestore nothing to restore; set up the string with all the default values","blue"),this.local_data["cmi.core.lesson_status"]="not attempted",this.local_data["cmi.suspend_data"]="",this.local_data["cmi.core.lesson_location"]="",this.local_data["cmi.core.total_time"]="0000:00:00",this.local_data["cmi.core.entry"]="ab-initio",this.local_data["cmi.core.score.raw"]="",this.local_data["cmi.core.score.min"]="",this.local_data["cmi.core.score.max"]="",this.local_data["cmi.comments"]="",this.local_data["cmi.comments_from_lms"]="No comment",this.local_data["cmi.objectives._count"]="0",this.local_data["cmi.interactions._count"]="0",this.local_data["cmi.student_preference.audio"]="",this.local_data["cmi.student_preference.language"]="",this.local_data["cmi.student_preference.speed"]="",this.local_data["cmi.student_preference.text"]=""):(debugWriter.writeToDebugWindow("CMI_DB_12.prototype.callRestore "+this.local_data,"blue"),this.local_data=a,"ab-initio"==this.local_data["cmi.core.entry"]&&(this.local_data["cmi.core.entry"]="")),this._setLocalData("cmi.core.student_name",this.student_name?this.student_name:""),this._setLocalData("cmi.core.student_id",this.student_number&&""!=this.student_number?this.student_number:"001DEFAULTSTUDENT"),this._setLocalData("cmi.launch_data",this.data_from_lms?this.data_from_lms:""),this._setLocalData("cmi.student_data.mastery_score",this.mastery_score?this.mastery_score:""),this._setLocalData("cmi.student_data.max_time_allowed",this.max_time_allowed?this.max_time_allowed:""),this._setLocalData("cmi.student_data.time_limit_action",this.time_limit_action?this.time_limit_action:""),this._setLocalData("cmi.core.credit",this.cmi_core_credit?this.cmi_core_credit:"credit"),this._setLocalData("cmi.core.lesson_mode",this.cmi_core_lesson_mode?this.cmi_core_lesson_mode:"normal")};var ScormBase12=function(a){var b="^-?([0-9]{0,3})(.[0-9]{1,2})?$",c="^.{0,255}$",d="^\\w{1,255}$",e="^([0-2]{1}[0-9]{1}):([0-5]{1}[0-9]{1}):([0-5]{1}[0-9]{1})(.[0-9]{1,2})?$",f="^([0-9]{2,4}):([0-9]{2}):([0-9]{2})(.[0-9]{1,2})?$",g="^correct$|^wrong$|^unanticipated$|^neutral$|^([0-9]{0,3})?(.[0-9]{1,2})?$",h=function(){this._init()};for(var i in a.prototype)h.prototype[i]=a.prototype[i];return h.prototype.validDmes=["cmi.comments_from_lms","cmi.comments","cmi.core._children","cmi.core.credit","cmi.core.entry","cmi.core.exit","cmi.core.lesson_location","cmi.core.lesson_mode","cmi.core.lesson_status","cmi.core.score._children","cmi.core.score.max","cmi.core.score.min","cmi.core.score.raw","cmi.core.session_time","cmi.core.student_id","cmi.core.student_name","cmi.core.total_time","cmi.launch_data","cmi.student_data._children","cmi.student_data.mastery_score","cmi.student_data.max_time_allowed","cmi.student_data.time_limit_action","cmi.student_preference._children","cmi.student_preference.audio","cmi.student_preference.language","cmi.student_preference.speed","cmi.student_preference.text","cmi.suspend_data"],h.prototype.validWritables=["cmi.comments","cmi.core.exit","cmi.core.lesson_location","cmi.core.lesson_status","cmi.core.score.max","cmi.core.score.min","cmi.core.score.raw","cmi.core.session_time","cmi.student_preference.audio","cmi.student_preference.language","cmi.student_preference.speed","cmi.student_preference.text","cmi.suspend_data"],h.prototype.validReadables=["cmi.comments_from_lms","cmi.comments","cmi.core._children","cmi.core.credit","cmi.core.entry","cmi.core.lesson_location","cmi.core.lesson_mode","cmi.core.lesson_status","cmi.core.score._children","cmi.core.score.max","cmi.core.score.min","cmi.core.score.raw","cmi.core.student_id","cmi.core.student_name","cmi.core.total_time","cmi.launch_data","cmi.student_data._children","cmi.student_data.mastery_score","cmi.student_data.max_time_allowed","cmi.student_data.time_limit_action","cmi.student_preference._children","cmi.student_preference.audio","cmi.student_preference.language","cmi.student_preference.speed","cmi.student_preference.text","cmi.suspend_data"],h.prototype.errorCodeMap={0:"No error",101:"General Exception",201:"Invalid argument error",202:"Element cannot have children",203:"Element not an array.",301:"Not initialized",401:"Not implemented error",402:"Invalid set value, element is a keyword",403:"Element is read only",404:"Element is write only",405:"Incorrect Data Type"},h.prototype._finish=function(a){var b=oScormData.strStudentId+"_"+oScormData.strSCOId;if(""!=a||null==a)return this._errorCode="201",config.setFinishToLMS&&ssla.storage.getStorageLayer().save(null,"finish",'{"'+b+'":"false"}'),"false";if(this._isInitialized){config.completeContentOnExit&&CMI_DBInstance.callSetValue("cmi.core.lesson_status","completed");var c=CMI_DBInstance.local_data["cmi.student_data.mastery_score"];if(""!=c){var d=CMI_DBInstance.callGetValue("cmi.core.score.raw");""!=d&&(parseInt(d)>=parseInt(c)?CMI_DBInstance.callSetValue("cmi.core.lesson_status","passed"):CMI_DBInstance.callSetValue("cmi.core.lesson_status","failed"))}return this.suspendFlagSet?CMI_DBInstance.callSetValue("cmi.core.entry","resume"):CMI_DBInstance.callSetValue("cmi.core.entry",""),this.saveData(),this._isInitialized=!1,this._errorCode="0",debugWriter.writeToDebugWindow("Finishing...LMS called LMSCommitted on data"),debugWriter.writeToDebugWindow("Finished !"),config.setFinishToLMS&&ssla.storage.getStorageLayer().save(null,"finish",'{"'+b+'":"true"}'),"true"}return this._errorCode="301",config.setFinishToLMS&&ssla.storage.getStorageLayer().save(null,"finish",'{"'+b+'":"false"}'),"false"},h.prototype.customSetValueDmeChecks=function(a,b){switch(a){case"cmi.comments":var c=this._internalGetValue(a);b=c+b;break;case"cmi.core.exit":switch(debugWriter.writeToDebugWindow("cmi_core_exit_value = "+b,"green"),b){case"time-out":case"":case"logout":this.suspendFlagSet=!1;break;case"suspend":this.suspendFlagSet=!0}debugWriter.writeToDebugWindow("cmi.core.entry = "+CMI_DBInstance.callGetValue("cmi.core.entry"),"green")}return b},h.prototype.checkObjectives=function(a){return!!(endsWith(a,"._children")||endsWith(a,"._count")||endsWith(a,".id")||endsWith(a,".score._children")||endsWith(a,".score.max")||endsWith(a,".score.min")||endsWith(a,".score.raw")||endsWith(a,".status"))},h.prototype.checkInteractions=function(a){if(endsWith(a,"._children")||endsWith(a,"._count")||endsWith(a,".id")||endsWith(a,".type")||endsWith(a,".time")||endsWith(a,".correct_responses._count")||endsWith(a,".weighting")||endsWith(a,".student_response")||endsWith(a,".result")||endsWith(a,".latency"))return!0;if(-1!=a.indexOf("correct_responses")){if(-1!=a.indexOf(".pattern"))return!0}else-1!=a.indexOf("objectives")&&(a="objectives"+a.split(".objectives")[1],this.checkObjectives(a));return!1},h.prototype.checkValidValues=function(a,h){var i,j,k,l,m=[],n=String(h);if(null==h)return!1;if("undefined"==typeof h)return!1;if(-1!=a.indexOf("cmi.objectives")&&(-1==a.indexOf("_children")||-1==a.indexOf("_count"))){if(-1!=a.indexOf("id"))return""==h?(this._errorCode="405",!1):(i=this._internalGetValue("cmi.objectives._count"),m=a.split("."),parseInt(m[2])>i+1?(this._errorCode="201",!1):matchRegEx(d,h)?!0:config.checkObjectiveId?(this._errorCode="405",debugWriter.writeToDebugWindow("The interaction id "+h+" does not match the CMIIdentifier definition "+d,"red"),!1):(this._errorCode="0",!0));if(-1!=a.indexOf("score.max"))return this.checkRawMinMax(h)||(this._errorCode="405"),this.checkRawMinMax(h);if(-1!=a.indexOf("score.min"))return this.checkRawMinMax(h)||(this._errorCode="405"),this.checkRawMinMax(h);if(-1!=a.indexOf("score.raw"))return this.checkRawMinMax(h)||(this._errorCode="405"),this.checkRawMinMax(h);if(-1!=a.indexOf("status"))return this.checkStatus(h)}if(-1!=a.indexOf("cmi.interactions")&&(-1==a.indexOf("_children")||-1==a.indexOf("_count"))){if(i=this._internalGetValue("cmi.interactions._count"),m=a.split("."),parseInt(m[2])>i+1)return this._errorCode="201",!1;if(-1!=a.indexOf("id"))return""==h?(this._errorCode="405",!1):matchRegEx(d,h)?!0:config.checkInteractionId?(this._errorCode="405",debugWriter.writeToDebugWindow("The interaction id "+h+" does not match the CMIIdentifier definition "+d,"red"),!1):(this._errorCode="0",!0);if(-1!=a.indexOf("correct_responses")&&(j=a.split("correct_responses")[0]+"._count",i=this._internalGetValue(j),m=a.split("."),parseInt(m[4])>i+1))return this._errorCode="201",!1;if(-1!=a.indexOf("time"))return matchRegEx(e,h);if(-1!=a.indexOf("type"))return this.checkInteractionType(h);if(-1!=a.indexOf("pattern"))switch(l=a.replace("pattern","type"),arrInteractionTypes[l]){case"true-false":null!=n.match(/^0|1|t|f$/)&&(k=!0);break;case"choice":null!=n.match(/(^([0-9a-z],){0,25}[0-9a-z]$)|(^\{([0-9a-z],){0,25}[0-9a-z]\}$)/)&&(k=!0);break;case"fill-in":null!=n.match(/^[a-zA-Z0-9 ]{0,255}$/)&&(k=!0);break;case"matching":null!=n.match(/(^([0-9a-z]\.[0-9a-z],)*[0-9a-z]\.[0-9a-z]$)|(^{([0-9a-z]\.[0-9a-z],)*[0-9a-z]\.[0-9a-z]}$)/)&&(k=!0);break;case"performance":null!=n.match(/^[a-zA-Z0-9 ]{0,255}$/)&&(k=!0);break;case"sequencing":null!=n.match(/^([0-9a-z],)*[0-9a-z]$/)&&(k=!0);break;case"likert":k=!0;break;case"numeric":null!=n.match(/^[\+\-]?(\d+|\d*\.\d+)$/)&&(k=!0)}if(-1!=a.indexOf("weighting"))return matchRegEx(b,h);if(-1!=a.indexOf("student_response"))return matchRegEx(c,h);if(-1!=a.indexOf("result"))return matchRegEx(g,h);if(-1!=a.indexOf("latency"))return this.checkCMITimeSpan(h)}var o=parseInt(h),p=1*o;switch(a){case"cmi.suspend_data":return this.checkCMIString4096(h);case"cmi.core.lesson_location":return this.checkCMIString255(h);case"cmi.core.lesson_status":return this.checkStatus(h,1);case"cmi.comments":return this.checkCMIString4096(h);case"cmi.core.exit":switch(h){case"time-out":return!0;case"suspend":return!0;case"logout":return!0;case"":return!0;default:return!1}break;case"cmi.core.score.max":return this.checkRawMinMax(h);case"cmi.core.score.min":return this.checkRawMinMax(h);case"cmi.core.score.raw":return this.checkRawMinMax(h);case"cmi.core.session_time":return f="^([0-9]{2,4}):([0-9]{2}):([0-9]{2})(.[0-9]{1,2})?$",matchRegEx(f,h)?this.checkCMITimeSpan(h):!1;case"cmi.student_preference.audio":return""==h?(this._errorCode="405",!1):"string"!=typeof h||-1!=h.indexOf(".")||isNaN(h)?!1:(o=parseInt(h),p=1*o,isNaN(p)?!1:-1>p||p>100?!1:!0);case"cmi.student_preference.language":return this.checkCMIString255(h);case"cmi.student_preference.speed":return""==h?(this._errorCode="405",!1):"string"!=typeof h||-1!=h.indexOf(".")||isNaN(h)?!1:(o=parseInt(h),p=1*o,isNaN(p)?!1:-100>p||p>100?!1:!0);case"cmi.student_preference.text":return""==h?(this._errorCode="405",!1):"string"!=typeof h?!1:"-1"==h||"0"==h||"1"==h?!0:!1;default:return!0}},h.prototype._internalGetValue=function(a){return CMI_DBInstance.callGetValue(a)},h.prototype._internalSetValue=function(a,b){debugWriter.writeToDebugWindow("setValue("+a+","+b+")");var c=CMI_DBInstance.callSetValue(a,b);if(debugWriter.writeToDebugWindow("CMI_DBInstance.callSetValue returned "+c),"undefined"==typeof c)c="false";else try{config.saveDataOnSetValue&&this.saveData()}catch(d){}return"cmi.core.lesson_status"==a&&(createTableOfContentsInstance&&createTableOfContentsInstance.setCompletionStatus(oScormData.strActivityId,b),debugWriter.writeToDebugWindow("setValue on activity id "+oScormData.strSCOId)),debugWriter.writeToDebugWindow("setValue("+a+","+b+") Returns: "+c),c},h.prototype.checkStatus=function(a,b){switch(a){case"passed":case"completed":case"failed":case"incomplete":case"browsed":return!0;case"not attempted":return 1==b?!1:!0;default:return!1}},h.prototype.checkInteractionType=function(a){return""==a?(this._errorCode="405",!1):!("true-false"!==a&&"choice"!==a&&"fill-in"!==a&&"matching"!==a&&"performance"!==a&&"sequencing"!==a&&"likert"!==a&&"numeric"!==a)},h};
//# sourceMappingURL=scorm12-api.min.js.map